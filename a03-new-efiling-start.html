<head>

<!-- Google tag (gtag.js) -->

<script src="https://efiling.fca-caf.ca/Content/vendors/wet-boew/js/i18n/en.min.js"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-Q1HWL3M994"></script>

<script>

window.dataLayer = window.dataLayer || [];

function gtag(){dataLayer.push(arguments);}

gtag('js', new Date());

gtag('config', 'G-Q1HWL3M994');

</script>

<!-- Google tag (gtag.js) -->

    <meta charset="utf-8">
    <!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
            wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
    <title>Initiate New Proceeding</title>
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <meta name="description" content="Web Experience Toolkit (WET) includes reusable components for building and maintaining innovative Web sites that are accessible, usable, and interoperable. These reusable components are open source software and free for use by departments and external Web communities">
    <link rel="alternate" hreflang="fr" href="https://efiling.fca-caf.ca/fr/acces-en-ligne/new-e-filing-start">
    <link rel="apple-touch-icon" sizes="57x57 72x72 114x114 144x144 150x150" class="wb-favicon" href="https://efiling.fca-caf.ca/Content/vendors/GCWeb/assets/favicon-mobile.png"><link href="https://efiling.fca-caf.ca/Content/vendors/GCWeb/assets/favicon.ico" rel="icon" type="image/x-icon" class="wb-init wb-favicon-inited">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link rel="stylesheet" href="https://efiling.fca-caf.ca/Content/vendors/GCWeb/css/theme.min.css">
    <noscript><link rel="stylesheet" href="https://efiling.fca-caf.ca/Content/vendors/wet-boew/css/noscript.min.css" /></noscript>
    

    <script src="https://efiling.fca-caf.ca/Content/vendors/Jquery/jquery.js"></script>
    <link rel="stylesheet" href="https://efiling.fca-caf.ca/content/css/base/loading.css">

 <!-- New Font Awesome CSS (6) - for 'X' icon-->
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

 <!--Bullets-->
 <link rel="stylesheet" href="bullets.css">

</head>
<body vocab="http://schema.org/" resource="#wb-webpage" typeof="WebPage" class="">
    <div id="loadingscreen" class="loading" style="display: none">
    </div>
    <div id="loadingscreen2" style="display: none">
        TEST TEXT
        Add Party
    </div>

    
    <header>
        <div id="wb-bnr" class="container">
            <div class="row">
                <section id="wb-lng" class="col-xs-3 col-sm-12 pull-right text-right">
                    <span class="wb-inv">Language selection</span>
                    <ul class="list-inline mrgn-bttm-0">
                        <li><a href="https://www.fca-caf.ca/en/home" title="Federal Court of Appeal" target="_blank">Federal Court of Appeal website</a></li>
                        <li><a href="https://efiling.fca-caf.ca/en/online-access/startover" title="Home">E-Filing home</a></li>
                        <li><a href="https://efiling.fca-caf.ca/en/online-access/guide" title="Guide" target="_blank">User guide</a></li>
                        <li><a href="https://efiling.fca-caf.ca/en/online-access/faq" title="F.A.Q." target="_blank">Frequently-asked questions</a></li>
                        <li>
                            <a lang="fr" hreflang="fr" href="https://efiling.fca-caf.ca/fr/acces-en-ligne/new-e-filing-start">
                                <span class="hidden-xs">Français</span>
                                <abbr title="Français" class="visible-xs h3 mrgn-tp-sm mrgn-bttm-0 text-uppercase">fr</abbr>

                            </a>
                        </li>

                    </ul>
                </section>
                <div class="brand col-xs-9 col-sm-5 col-md-4" property="publisher" resource="#wb-publisher" typeof="Government Organization">
                    
                    <meta property="name" content="Federal Court of Appeal">
                    <meta property="areaServed" typeof="Country" content="Canada">
                    <link property="logo" href="https://efiling.fca-caf.ca/Content/img/base/fca-logo.jpg">
                </div>

                
            </div>
        </div>

        
        <!--<nav class="gcweb-menu" typeof="SiteNavigationElement">
        <div class="container">
            <h2 class="wb-inv">Menu</h2>
                <button type="button" aria-haspopup="true" aria-expanded="false">Menu<span class="wb-inv"> Main</span> <span class="expicon glyphicon glyphicon-chevron-down"></span></button>
-->
        
        <!--</div>
        </nav>-->
        

        

    </header>

    

        <main property="mainContentOfPage" resource="#wb-main" class="container" typeof="WebPageElement">
            


<style>
    .error {
        color: red;
    }

    .form-control {
        color: black;
        width: 100%;
    }

    .tab {
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }

    .tablinks {
        width: 20%;
    }

    .tab button {
        background-color: inherit;
        float: left;
        border: 1px solid #ccc;
        outline: none;
        padding: 14px 16px;
        transition: 0.3s;
        align-items: stretch;
    }

        .tab button.clickable:hover {
            background-color: inherit;
            float: left;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            background-color: #ddd;
        }

        /* Create an active/current tablink class */
        .tab button.active {
            /*background-color: #ccc;*/
            background-color: #26374a;
            color: white;
        }

    /* Style the tab content */
    .tabcontent {
        /* display: none;*/
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
    }

    .visuallyhidden {
        border: 0;
        clip: rect(0 0 0 0);
        height: 1px;
        margin: -1px;
        overflow: hidden;
        padding: 0;
        position: absolute;
        width: 1px;
    }

    legend span.accessibility {
        position: absolute;
        left: -9999px;
        width: 100px;
        height: auto;
        overflow: hidden;
    }
</style>


<div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">

    <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">

        <div class="row">
            <div class="col-lg-12">
                <h1 class="text-center">Federal Court of Appeal Electronic Filing System</h1>
            </div>
        </div>

        <!-- Tab links -->
        <div class="tab" style="display: flex;">
            <button class="tablinks active" id="step-1-tab">Step 1: Proceeding information</button>
            <button class="tablinks clickable" id="step-2-tab">Step 2: Add party</button>
            <button class="tablinks" id="step-3-tab" disabled="">Step 3: Add document</button>
            <button class="tablinks" id="step-4-tab" disabled="">Step  4: Contact information</button>
            <button class="tablinks" id="step-5-tab" disabled="">Step 5: Review</button>
        </div>

        <!-- Tab content -->
        <div id="step-1" class="tabcontent">

            <div class="row">
                <div class="col-lg-12">
                <h2 style="margin-bottom:20px">Step 1: Proceeding information</h2>
                </div>
            </div>
            

            <div class="row">
<form action="a04-add-party.html" id="form1" method="post" novalidate="novalidate"><div style="font-size:19px;">
    <div class="col-md-12">
        <div>
            <div>
                <p>Please select the language, type, subject and nature that apply to this new proceeding.</p>
                <p style="margin-bottom:30px">For your own recordkeeping, you can also add your internal office file number.</p>
            </div>

            <div class="has-error" id="Test">
                <p><span class="field-validation-valid text-danger" data-valmsg-for="proceedingLang" data-valmsg-replace="true"></span></p>
                <p><span class="field-validation-valid text-danger" data-valmsg-for="proceedingType" data-valmsg-replace="true"></span></p>
                <p><span class="field-validation-valid text-danger" data-valmsg-for="proceedingSubject" data-valmsg-replace="true"></span></p>
                <p><span class="field-validation-valid text-danger" data-valmsg-for="proceedingNature" data-valmsg-replace="true"></span></p>
            </div>

            <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
                <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                    <div class="form-group">
                        <input id="cultureInfo" type="hidden" value="en-CA">
                        <label><strong>Proceeding language</strong></label> (required)<br>
                        <select title="Proceeding Language" class="form-control" data-val="true" data-val-required="Proceeding Language is required." id="proceedingLang" name="proceedingLang" required="true"><option value="">---Choose One---</option>
<option>English</option>
<option>French</option>
</select>
                    </div>

                    <div class="form-group">

                        <label><strong>Proceeding type</strong></label> (required)
                        <select title="Proceeding Type" class="form-control" data-val="true" data-val-required="Proceeding Type is required." id="proceedingType" name="proceedingType" required="true"><option value="">---Choose One---</option><option value="null">Appeal</option><option value="null">Application for Judicial Review</option><option value="null">Preliminary</option><option value="null">Reference</option></select>
                    </div>
                    <br>
                    <div id="defsClosed">
                        <button id="definitionsButton1" class="btn btn-primary" type="button">
                            Choosing a proceeding type
                            <i class="fa fa-chevron-down"></i>
                        </button>
                    </div>
                    <div id="defsOpened" style="display: none; visibility: hidden;">
                        <button id="definitionsButton2" class="btn btn-primary" type="button">
                            Choosing a proceeding type
                            <i class="fa fa-chevron-up"></i>
                        </button>
                    </div>
                  
                    <div id="definitions" style="display: none; visibility: hidden;">
                        <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
                            <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                                <div>
                                    <ul>
                                        <li>
                                            <b>Appeal:</b>
                                            <ul class="disc">
                                                <li>When a party goes to the Federal Court of Appeal to challenge a previous lower court or a tribunal’s decision.</li>
                                                <li>Appeals are detailed in <a href="https://www.laws-lois.justice.gc.ca/eng/acts/F-7/section-27.html" target="new"> s. 27 of the Federal Courts Act </a>, or can be a statutory appeal set out in any other act.</li>
                                                <li>A party who initiates an appeal is named "appellant"; the one against which the appeal is formed is named "respondent" (<a href="https://laws-lois.justice.gc.ca/eng/regulations/sor-98-106/page-19.html" target="new">rule 338</a>).</li>  
                                            </ul>
                                            <br>
                                        </li>
                                        <li>
                                            <b>Application for judicial review:</b>
                                            <ul class="disc">
                                                <li>When a party asks the Federal Court of Appeal to review administrative decisions to ensure that the government and its agencies acted reasonably, fairly and within the power granted to them.</li>
                                                <li>Applications for judicial review are detailed in <a href="https://laws-lois.justice.gc.ca/eng/acts/F-7/section-28.html" target="new">s. 28 of the Federal Courts Act</a>.</li>
                                                <li>A party who initiates an application for judicial review is named "applicant" ; the one against which it is formed is named "respondent" (<a href="https://laws-lois.justice.gc.ca/eng/regulations/SOR-98-106/page-15.html" target="new">rule 303</a>).</li>
                                            </ul>
                                            <br>
                                        </li>
                                        <li>
                                            <b>Reference:</b>
                                            <ul class="disc">
                                                <li>When the Attorney General of Canada or an administrative tribunal asks the Federal Court of Appeal for its opinion on an issue that it considers important.</li>
                                                <li>References are detailed in <a href="https://laws-lois.justice.gc.ca/eng/acts/F-7/page-3.html#docCont" target="new">s. 18.3</a> and <a href="https://laws-lois.justice.gc.ca/eng/acts/F-7/page-4.html#docCont" target="new">s. 28(2)</a>.</li>
                                            </ul>
                                            <br>
                                        </li>
                                        <li>
                                            <b>Preliminary:</b>
                                            <ul class="disc">
                                            <li>When a party asks the Federal Court of Appeal to decide on something that must be resolved before a file can be opened (for example: grant a motion for leave to appeal, grant request for extension of time, etc.).</li>
                                            </ul>
                                            <br>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
        

                </div>
            </div>
            <br>
            <br>

            <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
                <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                    <div class="form-group">
                        <label><strong>Proceeding subject</strong></label> (required)
                        <select title="Proceeding Subject" class="form-control" data-val="true" data-val-required="Proceeding Subject is required." id="proceedingSubject" name="proceedingSubject" required="true"><option value="">---Choose One---</option>
</select>
                    </div>

                    <br>
                    <div id="defsClosed">
                        <button id="definitionsButton1" class="btn btn-primary" type="button">
                            Choosing a proceeding subject
                            <i class="fa fa-chevron-down"></i>
                        </button>
                    </div>
                    <div id="defsOpened" style="display: none; visibility: hidden;">
                        <button id="definitionsButton2" class="btn btn-primary" type="button">
                            Choosing a proceeding subject
                            <i class="fa fa-chevron-up"></i>
                        </button>
                    </div>
                  
                    <div id="definitions" style="display: none; visibility: hidden;">
                        <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
                            <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                                <div>
                                   <p>Information about the different proceeding subjects woould go here</p>
                                </div>
                            </div>
                        </div>
                    </div>
        

                </div>
            </div>
            <br>
            <br>




            <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
                <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                    <div class="form-group">
                        <label><strong>Proceeding nature</strong></label> (required)
                        <select title="Proceeding Nature" class="form-control" data-val="true" data-val-required="Proceeding Nature is required." id="proceedingNature" name="proceedingNature" required="true"><option value="">---Choose One---</option>
</select>
<br>
<div id="defsClosed">
    <button id="definitionsButton1" class="btn btn-primary" type="button">
        Choosing a proceeding nature
        <i class="fa fa-chevron-down"></i>
    </button>
</div>
<div id="defsOpened" style="display: none; visibility: hidden;">
    <button id="definitionsButton2" class="btn btn-primary" type="button">
        Choosing a proceeding nature
        <i class="fa fa-chevron-up"></i>
    </button>
</div>

<div id="definitions" style="display: none; visibility: hidden;">
    <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
        <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
            <div>
               <p>Information about the different natures of proceedings would go here</p>
            </div>
        </div>
    </div>
</div>


</div>
</div>

                    </div>
                    <br>
                    <br>
                    <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
                        <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                    <div class="form-group">
                        <label><strong><label for="iOfficeNo">Party's internal file number</label></strong></label> (optional)
                        <input title="Party's Internal File Number" class="form-control" id="iOfficeNo" name="iOfficeNo" type="text" value="">
                    </div>

            </div>

        </div>
    </div>
</div> 



                    <div class="justify-content-between pull-left mrgn-lft-md mrgn-tp-md">
                        <button type="button" class="btn btn-outline-primary" id="Back-Step-1">
                            <i class="fa fa-chevron-left"></i> Back
                        </button>
                    </div>
                    <div class="justify-content-between pull-right mrgn-rght-md mrgn-tp-md">
                        <a href="a06-contact-info.html"><button type="submit" class="btn btn-success" id="Submit-Step-1" href="a04-add-party.html">
                            Next
                            <i class="fa fa-chevron-right"></i>
                        </button></a>
                    </div>
</form>

            </div>

         
        </div> 
<br>
            <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
                <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                    <div class="form-group">
                <h4>Share your feedback</h4>
                <p>Take 5 minutes to let us know about your experience. The survey will open in a new browser tab.</p>
                <a href="https://forms.microsoft.com/r/1YCRBV91uf" target="new" type="button" class="btn btn-primary">Start survey</a>
    </div>
    </div>
    



        <div id="step-2" class="tabcontent" style="display: none; visibility: hidden;">

            <div class="row">
                <div class="col-lg-12">
                    <h3 class="text-center">Step 2: Add / Edit Party</h3>
                </div>
            </div>

            <div class="row">

<form action="/en/online-access/new-e-filing-start" id="form2" method="post" novalidate="novalidate">

<div style="font-size:19px;">
    <div class="col-sm-12">



        <br>

        <div class="form-group">
            <input id="cultureInfo" type="hidden" value="en-CA">
            <div class="table-responsive">
                <table class="table table-striped party-list" id="PartyList">

                    <thead>
                        <tr>
                            <th scope="col" style="width:22.5%;">Party Role<span style="color:red;">*</span></th>
                            <th scope="col" style="width:22.5%;">Party Details<span style="color:red;">*</span></th>
                            <th scope="col" style="width:22.5%;">First Name/Company Name<span style="color:red;">*</span></th>
                            <th scope="col" style="width:22.5%;">Last Name<span style="color:red;">*</span></th>
                            <th scope="col" style="width:10%;">Action</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                    <tfoot>
                        <tr>
                            <td colspan="5" style="text-align: center;">

                                <input type="button" class="btn btn-primary" id="addrow_Party" value="Add Party">

                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>

        <div>
            Please click the "Add Party" button above to enter the names of the parties involved in this proceeding.<br>
            For most proceedings, you must enter the names of a minimum of two opposing parties.<br>
For example:<br>
In an application for judicial review, enter the names of the Applicant(s) and the Respondent(s).<br>
In an appeal, enter the names of the Appellant(s) and the Respondent(s).<br>
In a motion, enter the names of the Moving Party or Parties and the Respondent(s).<br>
In a reference, there may only be one applicant. Please enter the name of this party.<br>
            <strong><span style="color:red;">* = (Required)</span></strong>
        </div>

    </div>
</div>


                    <div class="justify-content-between pull-left mrgn-lft-md mrgn-tp-md">
                        <button type="button" class="btn btn-outline-primary" id="Back-Step-2">
                            <i class="fa fa-chevron-left"></i> Back
                        </button>
                    </div>
                    <div class="justify-content-between pull-right mrgn-rght-md mrgn-tp-md">
                        <button type="submit" class="btn btn-primary" id="Submit-Step-2">
                            Continue
                            <i class="fa fa-chevron-right"></i>
                        </button>
                    </div>
</form>            </div>

        </div> 

        <div id="step-3" class="tabcontent" style="display: none; visibility: hidden;">

            <div class="row">
                <div class="col-lg-12">
                    <h3 class="text-center">Step 3: Add / Edit Document</h3>
                </div>
            </div>
            <br>
            <div class="row">
<form action="/en/online-access/new-e-filing-start" enctype="multipart/form-data" id="form3" method="post" novalidate="novalidate"><input name="__RequestVerificationToken" type="hidden" value="GAcVb3V6wubxxfEuGZhMxh1i2DxcCS_tSIHJDm6kgPv2Mnu6Hsj5TEU2snQxxSgSzjDAStuK_LYAPq3rdvTCWvAHJvI6p5phfWlObJqEQNs1">                    <div id="form-content-step3">
                        <div style="font-size:19px;">
    <div class="col-sm-12">

        <div class="form-group">
            <input id="cultureInfo" type="hidden" value="en-CA">
            <div class="table-responsive">

                <table class="table table-striped doc-list" id="docList">
                    <thead>
                        <tr>
                            <th scope="col" style="width: 25%">Document Type<span style="color:red;">*</span></th>
                            <th scope="col" style="width: 20%">Document Name<span style="color: red;">*</span></th>
                            <th scope="col" style="width: 15%">Document Language<span style="color: red;">*</span></th>
                            <th scope="col" style="width: 20%">Filing Party(ies)<span style="color: red;">*</span></th>
                            <th scope="col" style="width: 15%">Handling Instructions for the Submission (Maximum 255 characters)</th>
                            <th scope="col" style="width: 5%">Action</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                    <tfoot>
                        <tr>
                            

                            

                            <td colspan="12" style="text-align:center;vertical-align:middle;">Large documents may take several minutes to upload. Please be patient while your documents are uploaded.</td>

                        </tr>
                        <tr>
                            <td colspan="12" style="text-align:center;vertical-align:middle;font-weight:bold;color:red">WARNING! Do not upload confidential documents to the e-filing system.</td>
                        </tr>
                        <tr>
                            <td colspan="12" style="text-align:center;vertical-align:middle">
                                <input type="button" class="btn btn-primary" id="addrow" value="Add Document">
                            </td>
                        </tr>
                    </tfoot>
                </table>

                <div>
                    Please click the “Add Document” button above to add any additional document(s) to be filed.<br>
                    <strong><span style="color:red;">* = (Required)</span></strong>
                </div>
            </div>
        </div>
    </div>
</div>




                    </div>
                    <div class="justify-content-between pull-left mrgn-lft-md mrgn-tp-md">
                        <button type="button" class="btn btn-outline-primary" id="Back-Step-3">
                            <i class="fa fa-chevron-left"></i> Back
                        </button>
                    </div>
                    <div class="justify-content-between pull-right mrgn-rght-md mrgn-tp-md">
                        <button type="submit" class="btn btn-primary" id="Submit-Step-3">
                            Continue
                            <i class="fa fa-chevron-right"></i>
                        </button>
                    </div>
</form>
            </div>

        </div> 

        <div id="step-4" class="tabcontent" style="display: none; visibility: hidden;">

            <div class="row">
                <div class="col-lg-12">
                    <h3 class="text-center">Step  4: Contact Information</h3>
                </div>
            </div>
            <div class="row">
<form action="/en/online-access/new-e-filing-start" enctype="multipart/form-data" id="form4" method="post" novalidate="novalidate">
<div style="font-size:19px;">
    <div class="col-md-12">

        <div>
            <h4>Please provide your <a href="#" data-placement="top" title="Contact information of the person who files an electronic document">contact information</a>, select filing location and confirm if the filing is urgent.</h4>
        </div>

        <!--Validiation errors for mandatory-->
        <p><span class="field-validation-valid text-danger" data-valmsg-for="firstName" data-valmsg-replace="true"></span></p>
        <p><span class="field-validation-valid text-danger" data-valmsg-for="lastName" data-valmsg-replace="true"></span></p>

        <p><span class="field-validation-valid text-danger" data-valmsg-for="regOfficeDDL" data-valmsg-replace="true"></span></p>
        
        <p><span class="field-validation-valid text-danger" data-valmsg-for="languageDDL" data-valmsg-replace="true"></span></p>
        <p><span class="field-validation-valid text-danger" data-valmsg-for="phoneNumber" data-valmsg-replace="true"></span></p>
        <p><span class="field-validation-valid text-danger" data-valmsg-for="priEmail" data-valmsg-replace="true"></span></p>
        <!--Validiation errors for self-inflicted errors-->
        
        <p><span class="field-validation-valid text-danger" data-valmsg-for="urgDesc" data-valmsg-replace="true"></span></p>
        <p><span class="field-validation-valid text-danger" data-valmsg-for="secEmail" data-valmsg-replace="true"></span></p>
        <!--Secondary email?  That seems passe-->
        <!--/Validiation errors-->

        <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
            <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">

                <div class="heading">
                    
                    <h4><label for="Contact_Information_for_the_Person_Making_a_Submission_to_the_E-Filing_System">Contact Information for the Person Making a Submission to the E-Filing System</label></h4>
                </div>

                
                
            <div class="form-group">

                <input id="cultureInfo" type="hidden" value="en-CA">
                <label id="contact--firstname">
                    <strong><label for="firstName">First Name</label><span style="color:red;">*</span></strong>
                </label>
                <input title="First Name" class="form-control" data-val="true" data-val-maxlength="The field firstName must be a string or array type with a maximum length of '100'." data-val-maxlength-max="100" data-val-required="Name is required." id="firstName" maxlength="50" name="firstName" required="true" type="text" value="">

            </div>
                <div class="form-group">
                    <label id="contact--lastname">
                        <strong><label for="lastName">Last Name</label><span style="color:red;">*</span></strong>
                    </label>
                    <input title="Last Name" class="form-control" data-val="true" data-val-maxlength="The field lastName must be a string or array type with a maximum length of '100'." data-val-maxlength-max="100" data-val-required="Name is required." id="lastName" maxlength="100" name="lastName" required="true" type="text" value="">
                </div>

                <div class="form-group">
                    <label for="City">City</label>
                    <input title="City" class="form-control" data-val="true" data-val-maxlength="The field City must be a string or array type with a maximum length of '80'." data-val-maxlength-max="80" id="City" maxlength="80" name="City" type="text" value="">
                </div>
                <div class="form-group">
                    <strong>
                        <label for="phoneNumber">Telephone Number</label><span style="color:red;">*
                        </span>
                    </strong>
                    <input title="Telephone Number" class="form-control" data-val="true" data-val-maxlength="The field phoneNumber must be a string or array type with a maximum length of '12'." data-val-maxlength-max="12" data-val-regex="Telephone Number must be of the following format 999-999-9999." data-val-regex-pattern="^\(?\d{3}\)?-? *\d{3}-? *-?\d{4}$" data-val-required="Telephone Number must be of the following format 999-999-9999." id="phoneNumber" maxlength="12" name="phoneNumber" required="true" type="text" value="">
                </div>

                <!--Primary Email-->
                <div class="form-group">
                    <strong>
                        <label for="priEmail">E-mail Address</label><span style="color:red;">*
                        </span>
                    </strong>
                    <input title="E-mail Address" class="form-control" data-val="true" data-val-maxlength="The field priEmail must be a string or array type with a maximum length of '255'." data-val-maxlength-max="255" data-val-regex="A valid E-mail Address is required." data-val-regex-pattern="^(([0-9a-zA-ZÀ-ÿ]).*)@(([0-9a-zA-ZÀ-ÿ].*\.*)[A-Za-zÀ-ÿ0-9]{2,})$" data-val-required="A valid E-mail Address is required." id="priEmail" maxlength="255" name="priEmail" required="true" type="text" value="">
                </div>

                <div class="form-group">
                    <div id="stepfour--email__second">
                        <label for="secEmail">Alternate E-mail Address</label>
                        <input title="Alternate E-mail Address" class="form-control" data-val="true" data-val-maxlength="The field secEmail must be a string or array type with a maximum length of '255'." data-val-maxlength-max="255" id="secEmail" maxlength="255" name="secEmail" type="text" value="">
                    </div>
                </div>

                <div class="form-group">
                    <div id="stepfour--language">
                        <strong>
                            <label for="languageDDL">Language of communication with Registry</label><span style="color:red;">*
                            </span>
                        </strong>
                        <select title="Language of communication with Registry" class="form-control" data-val="true" data-val-required="Language of communication with Registry is required." id="languageDDL" name="languageDDL" required="true"><option value="">---Choose One---</option>
<option value="E">English</option>
<option value="F">French</option>
</select>
                    </div>
                </div>

            </div>

            </div>
        

        <br>

        <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
            <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">

                <div class="form-group">
                    <div class="heading">
                        
                        <h4><label for="Filing_location">Filing location</label></h4>
                    </div>

                    <div>
                        <p>Please select the Registry Office closest to your location.</p>
                    </div>

                    <div class="form-group">
                        <div>
                            <!--DropDown for registry office-->
                            <strong>
                                <label for="registryOffice">Registry Office</label><span style="color:red;">*
                                </span>
                            </strong>
                            <select title="Registry Office" class="form-control" data-val="true" data-val-required="A Registry Office is required." id="regOfficeDDL" name="regOfficeDDL" required="true"><option value="">---Choose One---</option>
<option value=" 7.0">Calgary</option>
<option value=" 120.0">Charlottetown</option>
<option value=" 4.0">Edmonton</option>
<option value=" 35.0">Fredericton</option>
<option value=" 62.0">Halifax</option>
<option value=" 191.0">Iqaluit</option>
<option value=" 138.0">Montréal</option>
<option value=" 71.0">Ottawa</option>
<option value=" 135.0">Québec</option>
<option value=" 157.0">Regina</option>
<option value=" 151.0">Saskatoon</option>
<option value=" 42.0">St. John's</option>
<option value=" 113.0">Toronto</option>
<option value=" 19.0">Vancouver</option>
<option value=" 158.0">Whitehorse</option>
<option value=" 25.0">Winnipeg</option>
<option value=" 64.0">Yellowknife</option>
</select>

                        </div>
                    </div>
                </div>
            </div>
        </div>

        <br>

        <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
            <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                <div class"form-group"="">
                    <div class="heading">
                        

                        <h4><label for="Filing_Urgency">Filing Urgency</label></h4>
                    </div>

                    If the filing is urgent, please click the checkbox below and provide a brief explanation.

                    <fieldset class="gc-chckbxrdio">
                        <legend><span class="accessibility">Welcome screen agreement</span></legend>
                        <ul class="list-unstyled lst-spcd-1">
                            <li class="checkbox">
                                <input type="checkbox" id="isUrgent">
                                <label for="isUrgent">
                                    Is Filing Urgent?
                                </label>
                            </li>
                        </ul>
                    </fieldset>


                    

                    <label for="urgDesc">Urgency Description</label>
                    <br>
                    <textarea title="Urgency Description" class="form-control" cols="40" disabled="True" id="urgDesc" maxlength="255" name="urgDesc" rows="8" style="width:100%;"></textarea>
                    <b>*Limit of 255 characters. </b>
                    <br>
                    <span id="countDownUrg"></span>

                </div>


                <div>
                    <br>
                    <strong><span style="color:red;">* = (Required)</span></strong>
                </div>
            </div>
        </div>
    </div>
</div>


                    <div class="justify-content-between pull-left mrgn-lft-md mrgn-tp-md">
                        <button type="button" class="btn btn-outline-primary" id="Back-Step-4">
                            <i class="fa fa-chevron-left"></i> Back
                        </button>
                    </div>
                    <div class="justify-content-between pull-right mrgn-rght-md mrgn-tp-md">
                        <button type="submit" class="btn btn-primary" id="Submit-Step-4">
                            Continue
                            <i class="fa fa-chevron-right"></i>
                        </button>
                    </div>
</form>            </div>

        </div> 

        <div id="step-5" class="tabcontent" style="display: none; visibility: hidden;">

            <div class="row">
                <div class="col-lg-12">
                    <h3 class="text-center">Step 5: Summary</h3>
                </div>
            </div>
            <div class="row">

                <div class="ajaxMe">
                    
<div class="col-md-12">
    <div>
        <h4>
            Please review the details you have entered. If you wish to edit your information, please press the “Back” button to return to a previous screen.
            Once you are ready to submit your document, click “Submit”.
            <br><br>
            Large documents may take several minutes to upload. Please be patient while your documents are uploaded.
        </h4>
    </div>

<form action="/en/online-access/processData" id="Form5" method="post">        <!--Court Case Info-->
        <input id="cultureInfo" type="hidden" name="cultureInfo" value="en-CA">
        <div style="font-size:19px;">
            <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
                <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                    <div id="stepfive--courtcase">
                        <div class="heading">
                            <h4>Court Case Information</h4>
                        </div>
                        <p>
                            <label><b>Court:</b></label> Federal Court of Appeal<br>

                                 <label><b>Proceeding Type:</b></label> <br>
                                 <label><b>Proceeding Subject:</b></label> <br>
                                 <label><b>Proceeding Nature:</b></label> <br>


                                                    </p>
                    </div>
                </div>
            </div>

            <br>

            <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
                <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                    <!-- Filing Party-->
                    <div id="stepfive--filingparty">
                        <div class="heading">
                            <h4>Contact Information for the Person Submitting a Filing</h4>
                        </div>
                        <p>
                            <label><b>Name:</b></label> <br>
                            <label><b>Telephone Number:</b></label> <br>
                            <label><b>E-mail Address:</b></label> <br>

                            <label><b>Language of communication with Registry:</b></label> <br>
                        </p>
                    </div>
                </div>
            </div>

            <br>

            <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
                <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                    <!--Filing Information-->
                    <div id="stepfive--filinginfo">
                        <div class="heading">
                            <h4>Filing Information</h4>
                        </div>
                        <p>
                            <label><b>Filing Urgency:</b></label>
No                            <br>
                            <label><b>Registry Office:</b></label>  <br>

                        </p>
                    </div>
                </div>
            </div>

            <br>

            <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
                <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                    <!--Filing Documents-->
                    <div id="stepfive--filingdocs">
                        <div class="heading">
                            <h4>Filing Documents</h4>
                        </div>
                        <table id="datatable" class="table table-striped table-hover table-bordered dataTable no-footer dtr-inline" style="width: 100%;" role="grid" aria-describedby="datatable_info">
                            <thead>
                                <tr role="row">
                                    <th tabindex="0" aria-controls="datatable" rowspan="1" colspan="1">Documents Submitted</th>
                                    <th>Filing Party</th>
                                    <th>Handling Instructions for the Submission</th>
                                </tr>
                            </thead>
                            
                            <tbody>
                            </tbody>

                        </table>
                    </div>
                    <br>
                </div>
            </div>

            <br>
        </div>
</form></div>



                </div>
                <div class="justify-content-between pull-left mrgn-lft-md mrgn-tp-md">
                    <button type="submit" class="btn btn-outline-primary" id="Back-Step-5">
                        <i class="fa fa-chevron-left"></i> Back
                    </button>
                </div>
                <div class="justify-content-between pull-right mrgn-rght-md mrgn-tp-md">
                    <p>
                        <input value="Submit" type="button" id="Submit-Step-5" class="btn btn-primary btn-rounded btn-md ml-4">
                    </p>
                </div>
            </div>

        </div> 
    </div>

</div>




            <div class="mrgn-tp-lg mrgn-bttm-lg">
                <dl id="wb-dtmd">
                    <dt>Date modified:</dt>
                    <dd><time property="dateModified">2023-04-03</time></dd>
                </dl>
            </div>
        </main>

    <footer id="wb-info">
        

<div class="landscape">
    <nav class="container wb-navcurr">

            <div class="row">
                <div class="col-md-3 text-white">
                    <h3 class="mb-2">Federal Court of Appeal</h3>
                    <ul class="list-unstyled">
                        <li><span class="fas fa-university"></span> <a href="https://www.cas-satj.gc.ca/en/operations/locations.shtml">Registry Locations</a></li>                       
                        <li><span class="fa fa-phone"></span> <a href="https://www.cas-satj.gc.ca/en/operations/numbers.shtml">Registry Phone Numbers</a></li>
                        <li><span class="fa fa-envelope"></span> <a href="mailto:information@fca-caf.gc.ca">information@fca-caf.ca</a></li>
                    </ul>
                </div>
                <div class="col-md-3 text-white">  </div>              
                <div class="col-md-2 text-white"></div>                
                
                <div class="col-md-2 text-white">
                    <h3 class="mb-2">Stay Informed</h3>
                    <ul class="list-unstyled">
                        <li><span class="fa fa-envelope"></span> <a href="https://www.fca-caf.ca/en/pages/web-based-litigation-tools/electronic-mailing-lists">Mailing List</a></li>
                        <li><i class="fa-brands fa-square-x-twitter"></i> <a href="https://twitter.com/FedCourtApp_en">X/Twitter</a></li>
                    </ul>
                </div>
            </div>
    </nav>


</div>
<div class="brand">
    <div class="container">
        <div class="row">
            <nav class="col-md-9 col-lg-8 ftr-urlt-lnk">
                    <ul>
                        <li><a href="https://www.fca-caf.ca/en/pages/important-notices">Important Notices</a></li>
                      
                    </ul>
            </nav>

            
            
        </div>

    </div>
</div>



    </footer>
    
    
    <script src="https://efiling.fca-caf.ca/Content/vendors/jquery-validation/jquery.validate.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/vendors/jquery/jquery.unobtrusive-ajax.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/vendors/jquery-ui/jquery-ui.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/vendors/jquery-ui/jquery-ui.min.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/vendors/jquery-ui-bootstrap/js/jquery-ui-1.9.2.custom.min.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/vendors/wet-boew/js/wet-boew.min.js"></script><span id="wb-rsz" class="wb-init">&nbsp;</span>
    <script src="https://efiling.fca-caf.ca/Content/vendors/GCWeb/js/theme.min.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/vendors/js-cookie/js.cookie.js"></script>
    



    <script src="https://efiling.fca-caf.ca/Content/js/base/js.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/js/base/utils.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/js/base/data.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/js/base/popup.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/js/base/utils.js"></script>

    

    <script>

        $(function () { //master function start

            //$(document).ajaxSend(function () {
            //    $("#loadingscreen").show();
            //});
            //$(document).ajaxComplete(function () {
            //    $("#loadingscreen").hide();
            //});

            //$(document)
            //    .ajaxStart(function () {
            //        $("#loadingscreen").show();
            //    })
            //    .ajaxStop(function () {
            //        $("#loadingscreen").hide();
            //    });

            //$("#loadingscreen").ajaxStart(function () {
            //    $(this).show();
            //});
            //$("#loadingscreen").ajaxStop(function () {
            //    $(this).hide();
            //});

            //facilitates tab navigation
            var activePage = 1;

            ////to control definitions on step 1
            //var showDefs = false;


            setTimeout('window.location.replace("/en/online-access/sessionExpiration")', 3600000);
            var hidden = false;
            var proceedingNatureDataBase = [];
            var proceedingTypeDataBase = [];
            var ProceedingSubjectDataBase = [];
            var DocumentTypeDataBase = [];
            PopulateProceedingTypeDropDown();
            $('.ajaxSignatures').hide();
            dropDownHelpText();
            $("#ProcType").tooltip({
                title: "<h4><img src='/examples/images/smiley.png' style='width:26px;' alt='Smiley'> Hello, <b>I'm</b> <i>Smiley!</i></h4>",
                html: true,
            });

            $(document).ready(function () {
                $("#step-2").hide().css("visibility", "hidden");
                $("#step-3").hide().css("visibility", "hidden");
                $("#step-4").hide().css("visibility", "hidden");
                $("#step-5").hide().css("visibility", "hidden");
                $("#definitions").hide().css("visibility", "hidden");
                $("#defsOpened").hide().css("visibility", "hidden");

                setTabs(activePage);

            });


            function backStep1() {
                location.href = '/en/online-access/e-filing-intro';
            }

            function backStep2() {

                if (GenerateTextBox()) {
                    userDefinedParty = []; //reset our lists
                    counter = 0;
                    isValidSoc = false;
                    //clean up tables; remove all numbered rows
                    $("#PartyList  tbody").empty();

                    $("#step-2").hide().css("visibility", "hidden");
                    $("#step-1").show().css("visibility", "visible");

                    activePage--;

                    setTabs(activePage);

                }
            }

            function backStep3() {

                if (GenerateTextBox()) {
                    fileList = [];
                    isValidSoc = false;
                    otherCounter = 0;
                    //clean up tables; remove all numbered rows
                    $("#docList tbody").empty();
                    deleteFiles();

                    $("#step-3").hide().css("visibility", "hidden");
                    $("#step-2").show().css("visibility", "visible");

                    activePage--;

                    setTabs(activePage);
                }
            }

            function backStep4() {

                if (GenerateTextBox()) {
                    deleteFiles();

                    $("#step-4").hide().css("visibility", "hidden");
                    $("#step-3").show().css("visibility", "visible");

                    activePage--;

                    setTabs(activePage);
                }
            }

            function backStep5() {

                if (GenerateTextBox()) {
                    //$('#tablist a[href="#step-4"]').tab('show');
                    $("#step-5").hide().css("visibility", "hidden");
                    $("#step-4").show().css("visibility", "visible");

                    activePage--;

                    setTabs(activePage);

                    if (hidden) {
                        // $(".stepFiveA").appendTo("<div class='stepFive'><button type='button' class='btn btn-primary' id='Submit-Step-5'>Continue<i class='fa fa-chevron-right'></i></button><div>");
                        $('.stepFive').show();
                        hidden = false;
                    }
                }
            }

            function submitStep1() {
               // $("#loadingscreen").show();

                if ($("#form1").valid()) {
                    console.log('valid');
                    $("#step-1").hide().css("visibility", "hidden");
                    $("#step-2").show().css("visibility", "visible");
                    $("#loadingscreen").hide();

                    activePage++;
                    setTabs(activePage);

                } else {
                    console.log('not valid');
                    $("#loadingscreen").hide();
                }


            }

            function submitStep2() {

                //$("#loadingscreen").show();

                var firstnames = document.getElementsByName("firstName[]");
                var lastnames = document.getElementsByName("lastName[]");

                for (var i = 0; i < firstnames.length; i++) {
                    if (firstnames[i].value.trim().length == 0) {
                        firstnames[i].value = "";
                    }
                }
                for (var i = 0; i < lastnames.length; i++) {
                    if (lastnames[i].value.trim().length == 0 && lastnames[i].readOnly == false) {
                        lastnames[i].value = "";
                    }
                }
                $('.new').each(function () {
                    $(this).rules("add", {
                        required: true
                    });
                });
                if ($("#form2").valid()) {
                    if (counter >= 1) { //need at least one party
                        generateStyleOfCause();

                        //valid style of cause
                        if (isValidSoc) {
                            console.log('valid');

                            $("#step-2").hide().css("visibility", "hidden");
                            $("#step-3").show().css("visibility", "visible");
                            $("#loadingscreen").hide();

                            activePage++;

                            setTabs(activePage);
                        }
                        else {
                            console.log('not valid a Style Of Cause');
                            var x = "Please click the Add Party button above to enter the names of the parties involved in this proceeding.\nFor most proceedings, you must enter a minimum of two opposing parties. For example:\nIn an application for judicial review, enter the names of the Applicant(s) and the Respondent(s).\nIn an appeal, enter the names of the Appellant(s) and the Respondent(s).\nIn a motion, enter the names of the Moving Party or Parties and the Respondent(s).\nIn a reference, there may only be one applicant. Please enter the name of this party.";
                            alert(x);
                        }
                    }
                    else {
                        console.log('not valid missing at least one party');
                        var x = "Please click the Add Party button above to enter the names of the parties involved in this proceeding.\nFor most proceedings, you must enter a minimum of two opposing parties. For example:\nIn an application for judicial review, enter the names of the Applicant(s) and the Respondent(s).\nIn an appeal, enter the names of the Appellant(s) and the Respondent(s).\nIn a motion, enter the names of the Moving Party or Parties and the Respondent(s).\nIn a reference, there may only be one applicant. Please enter the name of this party.";
                        alert(x);
                    }

                } else {
                    console.log('not valid');
                }
            }

            function submitStep3() {

                

                //update the rules!
                $('.newer').each(function () {
                    $(this).rules("add", {
                        required: true
                    });

                });

                if ($("#form3").valid()) {
                    if (otherCounter > 0) { //need at least one document
                        if (areFilingPartiesAssigned()) {

                            
                            $("#loadingscreen").show();
                            SubmitFiles();
                            $("#loadingscreen").hide();
                            
                            activePage++;
                            setTabs(activePage);

                        }
                        else {
                            console.log('not valid a document is not assigned a filing party');
                            var x = "Please select the party.";
                            $("#loadingscreen").hide();
                            alert(x);
                        }
                    }
                    else {
                        console.log('not valid missing at least one document');
                        var x = "The filing must include at least one document.";
                        $("#loadingscreen").hide();
                        alert(x);
                    }
                }
                else {
                    console.log('not valid');
                    $("#loadingscreen").hide();

                }
            }

            function submitStep4() {

               // $("#loadingscreen").show();

                //var nodes = document.querySelectorAll("input[type=text]");
                var nodes = $("#form4 :input[type='text']");

                for (var i = 0; i < nodes.length; i++) {
                    if (nodes[i].value.trim().length == 0) {
                        nodes[i].value = "";
                    }
                }
                //check urgency
                isUrgencyChecked();
                if ($("#form4").valid()) {

                    console.log('valid');

                    $("#step-4").hide().css("visibility", "hidden");
                    $("#step-5").show().css("visibility", "visible");

                    Submit();

                    $("#loadingscreen").hide();

                    activePage++;

                    setTabs(activePage);

                }
                else {
                    console.log('not valid');
                    $("#loadingscreen").hide();
                }
            }

            function submitStep5() {

                $('#loadingscreen').show();
                document.getElementById("Form5").submit();
                $(".stepFive").hide();
                hidden = true;
            }

            function SetupEvents() {
                $('#Back-Step-1').on("click", function (e) {
                    backStep1();
                });

                $('#Back-Step-2').on("click", function (e) {
                    e.preventDefault();
                    backStep2();
                });

                $('#Back-Step-3').on("click", function (e) {
                    e.preventDefault();
                    backStep3();
                });

                $('#Back-Step-4').on("click", function (e) {
                    e.preventDefault();
                    backStep4();
                });

                $('#Back-Step-5').on("click", function (e) {
                    e.preventDefault();
                    backStep5();
                });

            }


            //Style of cause = SOC
            function generateStyleOfCause() {
                //ajax post the party names, and party roles
                //if the return is null or false we are not valid
                userDefinedParty = [];
                createPartyLists();

                $.ajax({
                    type: "POST",
                    url: '/onlineaccess/ValiStyleOfCauseConfirmationdSoc',
                    dataType: "json",
                    async: false,
                    data: JSON.stringify({ lop: userDefinedParty, proceedingType: $('#proceedingType').find(":selected").text(), lang: "False" }),
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        isValidSoc = result;
                        userDefinedParty = []; //reset the array
                    },
                    fail: function (result) {
                        isValidSoc = result;
                        userDefinedParty = []; //reset the array
                    }

                });
            }

            SetupEvents();


            function isUrgencyChecked() {
                if ($('#isUrgent').prop('checked')) {

                    $('#urgDesc').rules("add",
                        {
                            required: true,
                            messages: { required: "<span style=\"color: red;\">Urgency description is required.</span>" }
                        });
                    return true;
                }
                else {
                    $('#urgDesc').rules("remove");

                    return false;
                }
            }








            function areFilingPartiesAssigned() {
                var retVal = false;
                //var _partychkbox = $("[id^='filer_']");

                //var _listlength = _partychkbox.length;
                var _partylist = $("#PartyList  tbody tr");
                var _listlength = _partylist.length;

                //for (var i = 0; i < _listlength; i++) {
                //    var id = _partychkbox[i].id;
                //    if ($('#' + id).prop('checked') == true) {
                //        retVal = true;
                //    }

                //}


                var i = 0;
                var j = 0;
                //need at least one checked per row
                var retVal = false;
                for (i = 0; i < otherCounter; i++) {
                    for (j = 0; j < _listlength; j++) {
                        if ($('#filer_' + i + '_' + j).prop('checked') == true) {
                            retVal = true;
                        }
                    }
                    if (retVal != true)
                        return false;
                    //reset for next roww
                    retVal = false;
                }
                return true;
            }

            var userDefinedParty = []; //elements from party form
            var fileList = [];  //elements from documents form
            var isValidSoc = false;

            var filesAreValid = false;

            $(document).ready(function () {
                $('#proceedingType').on('change', function () {
                    PopulateProceedingSubjectDropDown();
                });
            });

            $('.error').each(function () {

                $(this).css('color', 'red');
            });

            $(document).keypress(function (e) {
                var code = (e.keyCode || e.which);
                if (code == 60 || code == 62 || code == 59) {   //           console.log("We got it");
                    e.preventDefault();
                }
            });




            $(document).on('change', '.dropdowntarget', function () {
                var element = this;
                var id = element.name.match(/\d+/);
                RestrictDropDown(id[0]);
            });

           
                },
                messages: {
                    proceedingLang: "<span style=\"color: red;\">Proceeding Language is required.</span>",
                    proceedingType: "<span style=\"color: red;\">Proceeding Type is required.</span>",
                    proceedingSubject: "<span style=\"color: red;\">Proceeding Subject is required.</span>",
                    proceedingNature: "<span style=\"color: red;\">Proceeding Nature is required.</span>",
                }
            });

            $.validator.addMethod(
                "regex",
                function (value, element, regexp) {
                    var re = new RegExp(regexp);
                    return this.optional(element) || re.test(value);
                },
                ""
            );
            $("#form4").validate({
                onfocusout: false,
                invalidHandler: function (form, validator) {
                    var errors = validator.numberOfInvalids();
                    if (errors) {
                        validator.errorList[0].element.focus();
                    }
                },
                rules: {
                    firstName: {
                        required: true,
                    },
                    lastName: {
                        required: true,
                    },
                    phoneNumber: {
                        required: true,
                        regex: /^\(?([0-9]{3})\)?([ .-]?)([0-9]{3})\2([0-9]{4})$/,/* /^\\(?\d{3}\\)?-? *\\d{3}-? *-?\\d{4}$/*/
                    },
                    priEmail: {
                        required: true,
                        regex: /^(([0-9a-zA-ZÀ-ÿ]).*)@((([0-9a-zA-ZÀ-ÿ\-]){1,})((\.[A-Za-zÀ-ÿ0-9]{2,}){1,}))$/,
                    },
                    secEmail: {
                        required: false,
                        regex: /^(([0-9a-zA-ZÀ-ÿ]).*)@((([0-9a-zA-ZÀ-ÿ\-]){1,})((\.[A-Za-zÀ-ÿ0-9]{2,}){1,}))$/,
                    },
                    regOfficeDDL: {
                        required: true,
                    },
                    languageDDL: {
                        required: true,
                    },
                    //provinceDDL: {
                    //    required: false,
                    //},
                    //postalCode: {
                    //    required: false,
                    //    regex: /^[aA-zZ]{1}[0-9]{1}[aA-zZ]{1}\s?[0-9]{1}[aA-zZ]{1}[0-9]{1}$/,
                    //},


                },
                messages: {
                    firstName: "<span style=\"color: red;\">Name is required.</span>",
                    lastName: "<span style=\"color: red;\">Name is required.</span>",
                    phoneNumber: {
                        regex: "<span style=\"color: red;\">Telephone Number must be of the following format 999-999-9999.</span>",
                        required: "<span style=\"color: red;\">Telephone Number is required.</span>",
                    },
                    priEmail: "<span style=\"color: red;\">A valid E-mail Address is required.</span>",
                    secEmail: "<span style=\"color: red;\">A valid E-mail Address is required.</span>",
                    regOfficeDDL: "<span style=\"color: red;\">A Registry Office is required.</span>",
                    languageDDL: "<span style=\"color: red;\">Language of communication with Registry is required.</span>",
                    
                    //postalCode: "<span style=\"color: red;\">Postal Code must be of the following format A9A 9A9</span>"
                }
            });

            $("#form2").validate(
                {
                    rules: {
                        firstName: {
                            required: true
                        },
                        lastName: {
                            required: true
                        },
                        partyType: {
                            required: true
                        },
                        partyRole: {
                            required: true
                        }

                    },
                    messages: {
                        firstName: "<span style=\"color: red;\">Name is required.</span>",
                        lastName: "<span style=\"color: red;\">Name is required.</span>",
                        partyType: "<span style=\"color: red;\">Party Details are required.</span>",
                        partyRole: "<span style=\"color: red;\">Party Role is required.</span>",
                    }
                });
            $("#form3").validate();



            $("#Submit-Step-1").on("click", function (e) { //Proceeding Info
                e.preventDefault();
                submitStep1();
            });
            $("#Submit-Step-2").on("click", function (e) { //Party info
                e.preventDefault();
                submitStep2();
            });

            $("#Submit-Step-3").on("click", function (e) { //document info
                e.preventDefault();
                 $('#loadingscreen').show();
                
                //do not remove timeout, or loading wheel will not load and it will look like the app has stopped!
                setTimeout(function () { submitStep3(); }, 250);
            });

            $("#Submit-Step-4").on("click", function (e) { //file info
                e.preventDefault();
                submitStep4();
            });
            $("#Submit-Step-5").on("click", function (e) { //document info
                e.preventDefault();
                submitStep5();
            });

            function SubmitFiles() {
               // alert(" in submit files..");
               // $('#loadingscreen').show();
                               
               // alert(" after sleep files..");
                var valid = false;
                var x = 0;

                var fileData = new FormData();

                for (x = 0; x < otherCounter; x++) {
                    for (var i = 0; i < $("#file_" + x).get(0).files.length; i++)
                        fileData.append('userfiles[]', $("#file_" + x).get(0).files[i]);
                }


                $.ajax({
                    type: "POST",
                    url: "/onlineaccess/uploadFiles",
                    data: fileData,
                    async: false,
                    dataType: "json",
                    contentType: false,
                    processData: false,
                    //beforeSend: function () {
                    //    $('#loadingscreen').show();
                    //},
                    //complete: function () {
                    //    $('#loadingscreen').hide();
                    //},

                    error: function (result) {
                        
                        var response = (result.responseText);
                        if (response != "") {
                            alert(response);
                            valid = false;
                        }
                        else { valid = true; }
                        if (valid) {
                            console.log('valid');
                            documentsValid = true;
                        }
                        else {
                            console.log('Document validation reported errors to user');
                        }
                    },

                    //success: function (jqXHR, result) {
                    success: function (result) {
                        $('#loadingscreen').hide();
                        
                        //alert(result);
                        //console.log(jqXHR.status + " - " + result );
                        /*var ricky = result;*/

                        if (result == "sessionexpired") {
                            //$('#loadingscreen').hide();
                            window.location.replace("/en/online-access/sessionExpiration");

                        }
                        else if (result != true) {
                            //$('#loadingscreen').hide();
                          //  alert(result);
                            valid = false;
                        }
                        else { valid = true; }
                        if (valid) {
                            console.log('valid');
                            //$('#loadingscreen').hide();

                            $("#step-3").hide().css("visibility", "hidden");
                            $("#step-4").show().css("visibility", "visible");
                        }
                        else {
                            console.log('Document upload reported errors to user');
                            //$('#loadingscreen').hide();
                        }
                    },
                });

            }

            function findEnglishTranslation(array, word, isFrench) {
                for (var i = 0; i < array.length; i++) {
                    if (array[i].includes(word)) {
                        if (!isFrench) {
                            return array[i].split("##")[0];
                        }
                        return array[i].split("##")[1];
                    }

                }

            }

            function Submit() {
                //userdefineded Party was defined here
                
                $('#loadingscreen').show();;

                createFileLists();
                userDefinedParty = [];
                createPartyLists();

                var model = {
                    //form0
                    proceedingLang: $('#proceedingLang').val(),
                    proceedingType: findEnglishTranslation(proceedingTypeDataBase, $('#proceedingType option:selected').text(), false),
                    proceedingTypeFR: findEnglishTranslation(proceedingTypeDataBase, $('#proceedingType option:selected').text(), true),
                    proceedingSubject: findEnglishTranslation(ProceedingSubjectDataBase, $('#proceedingSubject option:selected').text(), false),
                    proceedingSubjectFR: findEnglishTranslation(ProceedingSubjectDataBase, $('#proceedingSubject option:selected').text(), true),
                    proceedingNature: findEnglishTranslation(proceedingNatureDataBase, $('#proceedingNature option:selected').text(), false),
                    proceedingNatureFR: findEnglishTranslation(proceedingNatureDataBase, $('#proceedingNature option:selected').text(), true),
                    proceedingNatureCode: $('#proceedingNature').val(),
                    iOfficeNo: $('#iOfficeNo').val(),
                };

                var model2 = {

                    //form4
                    firstName: $('#firstName').val(),
                    lastName: $('#lastName').val(),
                    phoneNumber: $('#phoneNumber').val(),
                    priEmail: $('#priEmail').val(),
                    secEmail: $('#secEmail').val(),
                    languageDDL: $('#languageDDL  option:selected').text(),
                    languageDDLCode: $('#languageDDL').val(),
                    regOfficeDDL: $('#regOfficeDDL').val(),
                    isUrgent: $('#isUrgent').is(':checked'),
                    urgDesc: $('#urgDesc').val(),
                    city: $('#City').val(),

                };


                var postData = {
                    s1: model,
                    s2: userDefinedParty,
                    s3: fileList,
                    ued: model2,
                };

                $.ajax({
                    url: "/onlineaccess/allSubmit",
                    type: "post",
                    async: false,
                    data: JSON.stringify(postData),
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        $('#loadingscreen').hide();
                        $('.ajaxMe').load("/onlineaccess/updateSummary", { lang: "False" });
                    }
                });

            } //end submit




            function createPartyLists() {
                

                var _partylist = $("[name^='PartyRole_']");

                var _listlength = _partylist.length;

                var i = 0;

                for (i = 0; i < _listlength; i++) {

                    //for (i = 0; i < counter; i++) {

                    var name = _partylist[i].name;

                    //if (name != "PartyRole_Main") {

                    var Party = {};

                    //Party.role = $('#PartyRole_' + i).val();
                    //Party.type = $('#PartyType_' + i).val();

                    Party.role = $('#' + name).val();
                    Party.type = $('#' + name).val();

                    //Encoded to prevent injection

                    var Party_ID = name.substr(name.length - 1);
                    var encodedfirstName = $('<div />').text($('#firstName_' + Party_ID).val()).html();
                    var encodedlastName = $('<div />').text($('#lastName_' + Party_ID).val()).html();

                    //var encodedfirstName = $('<div />').text($('#firstName_' + i).val()).html();
                    //var encodedlastName = $('<div />').text($('#lastName_' + i).val()).html();

                    Party.firstName = encodedfirstName;
                    Party.lastName = encodedlastName;

                    //Party.firstName = $('#firstName_' + i).val();
                    //Party.lastName = $('#lastName_' + i).val();

                    userDefinedParty.push(Party);
                }
            }

            function createFileLists() {
               // alert("create File list called, line 1062")
                var i = 0;
                var j = 0;
                fileList = []; //clean start [back forward page movement was creating ghost entries]
                for (i = 0; i < otherCounter; i++) {
                    var docs = {};
                    var filingParties = [];
                    docs.documentType = findEnglishTranslation(DocumentTypeDataBase, $('#DocumentType_' + i + ' option:selected').text(), false); // $('#DocumentType_' + i).val();
                    docs.documentTypeFR = findEnglishTranslation(DocumentTypeDataBase, $('#DocumentType_' + i + ' option:selected').text(), true);
                    docs.documentLang = $('#DocumentLanguage_' + i).val();
                    docs.documentFileNameFromUpload = $('#file_' + i).val();

                    docs.documentHandling = $('#DocumentHandling_' + i).val();

                    //need to loop through list and find those check marks that are true
                    //for (j = 0; j < counter; j++) {
                    //    if ($('#filer_' + i + '_' + j).prop('checked')) {
                    //        var party = j;//userDefinedParty[j].firstName + ' ' + userDefinedParty[j].lastName;
                    //        filingParties.push(party);

                    //    }
                    //}

                    var _partylist = $("#PartyList  tbody tr");
                    var _listlength = _partylist.length;

                    //need to loop through list and find those check marks that are true

                    for (j = 0; j < _listlength; j++)
                    //for (j = 0; j < counter; j++)

                    {
                        if ($('#filer_' + i + '_' + j).prop('checked')) {
                            var party = j;//userDefinedParty[j].firstName + ' ' + userDefinedParty[j].lastName;
                            filingParties.push(party);
                        }

                    }

                    docs.party = filingParties;
                    fileList.push(docs);
                    //do we care about the documents?
                }
            }

            //function updateIndexes(table) {
            //    // get every tr element except the header
            //    table.find("tr:gt(0)").each(function (j, row) {
            //        // get every input and select elements
            //        $(row).find('input, select,textarea,span').each(function (k, input) {
            //            // check whether the id-attribute is of type _[index]__
            //            var id = input.id.match(/\d+/);
            //            // if it is an element necessary for the ModelBinder => update the name attribute
            //            if (id != null && id.length && id.length == 1) {
            //                var attr = $(input).attr("id");
            //                // replace the old index of the name attribute with the calculated index
            //                var newName = attr.replace(attr.match(/\d+/), j);
            //                $(input).attr("id", newName);
            //                $(input).attr("name", newName);
            //            }
            //        });
            //    });
            //}

            function updateIndexes(table) {
                // get every tr element except the header
                table.find("tr:gt(0)").each(function (j, row) {

                    // get every input and select elements
                    $(row).find('input, select,textarea,span,label').each(function (k, input) {

                        //$(row).find('label').each(function () {
                        //    for (i = 1; i <= counter; i++){

                        //}
                        //});

                        // check whether the id-attribute is of type _[index]__
                        var id = input.id.match(/\d+/);
                        // if it is an element necessary for the ModelBinder => update the name attribute
                        if (id != null && id.length && id.length == 1) {
                            var attr = $(input).attr("id");

                            // replace the old index of the name attribute with the calculated index
                            var newName = attr.replace(attr.match(/\d+/), j);
                            $(input).attr("id", newName);
                            $(input).attr("name", newName);
                            /*$(input).attr("label", newName);*/
                            $(input).attr("for", newName);

                            //$(row).find('label').each(function (k, input) {
                            //    var test = input.id.match(/\d+/);
                            //    var newName = attr.replace(attr.match(/\d+/), j);
                            //    $(input).attr("for", newName);
                            //});

                            //labels = document.getElementsByTagName('label');
                            //for (var i = 0; i < labels.length; i++) {
                            //    labels[i].attr("for", newName);
                        }
                    });

                });


                //var trElems = table.querySelectorAll('tr');
                //for (var i = 1, len = trElems.length; i < len; i++) {
                //    trElems[i].querySelector('label').textContent = i;
                //    trElems[i].querySelector('[name="DocumentType"]').setAttribute('id', 'facility' + i);
                //    trElems[i].querySelector('[name="currency"]').setAttribute('id', 'currency' + i);
                //}
            }




            function updatePartyIndexes(table) {
                // get every tr element except the header
                table.find("tr:gt(0)").each(function (j, row) {
                    // get every input and select elements
                    $(row).find('input, select,textarea,span').each(function (k, input) {
                        // check whether the id-attribute is of type _[index]__
                        var id = input.id.match(/\d+/);
                        // if it is an element necessary for the ModelBinder => update the name attribute
                        if (id != null && id.length && id.length == 1) {
                            var attr = $(input).attr("id");
                            // replace the old index of the name attribute with the calculated index
                            var newName = attr.replace(attr.match(/\d+/), j);
                            //var x = j - rowCount;
                            $(input).attr("id", newName);
                            $(input).attr("name", newName);
                        }
                    });
                });
            }

            function RestrictDropDown(counter) {
                //we know what row;
                //find out what if other, selected remove rule off lastname or give it a whitespace value and lock it.
                var x = $("#PartyType_" + counter).find('option:selected').text();
                if (x == "Other") {
                    /*$("#lastName_" + counter).removeAttr('required');*/
                    $("#lastName_" + counter).val(" ");
                    $("#lastName_" + counter).attr('readonly', true);
                    $("#firstName_" + counter).attr('maxlength', '39');
                }
                else {
                    $("#lastName_" + counter).val("");
                    $("#lastName_" + counter).attr('readonly', false);
                    $("#firstName_" + counter).attr('maxlength', '39');
                }
            }

            //Ajaxing in Parties
            var counter = 0;
            var otherCounter = 0;

            //version with large, accessible checkboxes for WET theme
            function FilingPartyList(otherCounter) {
                userDefinedParty = [];
                createPartyLists();   //style of cause unsets this.
                var x = 0;
                /*                var retVal = '<div style="margin-top: -8px" class="checkbox gc-chckbxrdio"><ul class="">';*/
                var retVal = '<div style="margin-top: -8px"><fieldset style="margin-top: -8px" class="checkbox gc-chckbxrdio"><legend><span class="accessibility">Filing Party</span><ul class="list-unstyled lst-spcd-1">';
                for (x = 0; x < userDefinedParty.length; x++) {

                /*for (x = 0; x < counter; x++) {*/
                    retVal = retVal + '<li class="checkbox"><input type="checkbox" id="filer_' + otherCounter + '_' + x + '"> '/* + userDefinedParty[x].firstName + ' ' + userDefinedParty[x].lastName*//* + '</li>'*/ +
                        '<label for="filer_' + otherCounter + '_' + x + '" id="filer_' + otherCounter + '_' + x + '">' + userDefinedParty[x].firstName + ' ' + userDefinedParty[x].lastName + '</label></li>';
                }
                retVal = retVal + '</ul></div>';
                return retVal;
            }


            $(document).ready(function () {
                $("#addrow").bind("click", function () {

                    $("#loadingscreen").show();

                    var table = document.getElementById("docList").getElementsByTagName('tbody')[0];

                    var row = table.insertRow(table.rows.length);
                    var cell1 = row.insertCell(0);
                    var cell2 = row.insertCell(1);
                    var cell3 = row.insertCell(2);
                    var cell4 = row.insertCell(3);
                    var cell5 = row.insertCell(4);
                    var cell6 = row.insertCell(5);

                    cell1.innerHTML = '<select id="DocumentType_' + otherCounter + '" name="DocumentType_' + otherCounter + '" class="form-control form-control-sm newer" data-msg="Document Type is required." ></select><label id="DocumentType_' + otherCounter + '" for="DocumentType_' + otherCounter + '" class="visuallyhidden">Document Type</label>';

                    cell2.innerHTML = '<input type = "file"  id="file_' + otherCounter + '"name ="file_' + otherCounter + '" accept = "application/pdf" class="form-control form-control-sm newer" data-msg="Document Name is required."/><label id="file_' + otherCounter + '" for="file_' + otherCounter + '" class="visuallyhidden">Document Name</label>';


                    cell3.innerHTML = '<select id="DocumentLanguage_' + otherCounter + '" name="DocumentLanguage_' + otherCounter + '" class="form-control form-control-sm newer" data-msg="Document Language is required."></select><label id="DocumentLanguage_' + otherCounter + '" for="DocumentLanguage_' + otherCounter + '" class="visuallyhidden">Document Language</label>';

                    cell4.innerHTML = FilingPartyList(otherCounter);

                    cell5.innerHTML = '<textarea id="DocumentHandling_' + otherCounter + '" name="DocumentHandling_' + otherCounter + '" class="form-control form-control-sm" maxlength="255"></textarea><span class="countDown_' + otherCounter + '" id="countDown_' + otherCounter + '"></span><label id="DocumentHandling_' + otherCounter + '" for="DocumentHandling_' + otherCounter + '" class="visuallyhidden">Handling Instructions for the Submission</label>';

                    cell6.innerHTML = '<button id="' + otherCounter + '" class="btn btn-primary btn-sm delete" name="delete" type="button">Remove</button>';

                    $("#docList").append(row);
                    PopulateDocumentDropdowns(otherCounter);

                    $("#loadingscreen").hide();

                    $("#file_" + otherCounter).on('change', function () {
                        var oFile = document.getElementById(this.id).files[0];
                        var x = $(this).attr('id').split("_");
                        var objtid = this.id;
                        var filelblobj = "filelbl_" + x[1];
                        var filename = this.value.replace(/C:\\fakepath\\/i, '');


                        if (oFile.size > 104857600) {
                            alert('Document must be less than 100Mb.');
                            $("#" + filelblobj).text("");
                            $("#" + objtid).val('');
                        }
                        else {
                            if (oFile.type != "application/pdf") {
                                alert('Document Type must be PDF');
                                $("#" + filelblobj).text("");
                                $("#" + objtid).val('');
                            }
                            else {

                                $('#loadingscreen').show();
                                var xhr = new XMLHttpRequest();
                                xhr.open('POST', '/onlineaccess/CheckPdfProtection');
                                xhr.setRequestHeader('Content-type', 'multipart/form-data');
                                //Appending file information in Http headers
                                xhr.setRequestHeader('X-File-Name', oFile.name);
                                xhr.setRequestHeader('X-File-Type', oFile.type);
                                xhr.setRequestHeader('X-File-Size', oFile.size);
                                //Sending file in XMLHttpRequest
                                xhr.send(oFile);
                                xhr.onreadystatechange = function () {
                                    if (xhr.readyState == 4 && xhr.status == 200) {
                                        //alert(xhr.responseText);
                                        if (xhr.responseText == "false") {
                                            $('#loadingscreen').hide();
                                            $("#" + filelblobj).text(filename);

                                        }
                                        else {
                                            $('#loadingscreen').hide();
                                            $("#" + filelblobj).text("");
                                            $("#" + objtid).val('');
                                            var x = "This PDF is protected, please add an unprotected PDF.";
                                            alert(x);

                                        }
                                    }
                                }
                            }
                        }
                    });

                    $('#DocumentHandling_' + otherCounter).keyup(function () {
                        var x = $(this).attr('id').split("_");
                        $('#countDown_' + x[1]).html("Characters remaining: " + (255 - $(this).val().length));
                    });

                    otherCounter++;
                });

                //$("#docList").on("click", ".delete", function (event) {
                //    $(this).closest("tr").remove();
                //    updateIndexes($("#docList"));
                //    otherCounter -= 1;
                //});
            });

            $("#docList").on("click", ".delete", function (event) {
                $(this).closest("tr").remove();
                //otherCounter -= 1;
                updateIndexes($("#docList"));
                otherCounter -= 1;
            });




            function PopulateDocumentDropdowns(otherCounter) {

                DocumentType(otherCounter);
                DocumentLanguage(otherCounter);


                function DocumentLanguage(otherCounter) {
                    var DDL_Model = { lang: "False" };
                    var jsonToPost = JSON.stringify(DDL_Model);
                    $.ajax({
                        url: '/onlineaccess/buildLanguageDDL',
                        type: "POST",
                        data: jsonToPost,
                        async: false,
                        contentType: "application/json; charset=utf-8",
                        success: function (result) {
                            var s = '<option value="">---Choose One---</option>';
                            for (var i = 0; i < result.length; i++) {
                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                            }
                            $("#DocumentLanguage_" + otherCounter).html(s);
                        }
                    })
                }

                function DocumentType(otherCounter) {
                    if (otherCounter > 0) {
                        var DDL_Model = {
                            lang: "False",
                            proceedingType: $('#proceedingType').find(":selected").text()
                        };

                        var jsonToPost = JSON.stringify(DDL_Model);

                        $.ajax({
                            url: '/onlineaccess/buildFCAFirstDocumentDDL',
                            type: "POST",
                            data: jsonToPost,
                            async: false,
                            contentType: "application/json; charset=utf-8",
                            success: function (result) {
                                var sENG = '<option value="">---Choose One---</option>';
                                var sFRN = '<option value="">---Choose One---</option>';
                                for (var i = 0; i < result.length; i++) {
                                    sENG += '<option value="' + result[i].englishCode + '">' + result[i].englishLanguageText + '</option>';
                                    sFRN += '<option value="' + result[i].englishCode + '">' + result[i].frenchLanguageText + '</option>';
                                }
                                if (DDL_Model.lang.toLowerCase().includes("f")) {
                                    $("#DocumentType_" + otherCounter).html(sENG);

                                }

                                else {
                                    $("#DocumentType_" + otherCounter).html(sFRN);
                                }
                            }
                        })
                    }
                    else {
                        var DDL_Model = {
                            lang: "False",
                            proceedingType: $('#proceedingType').find(":selected").text()
                        };

                        var jsonToPost = JSON.stringify(DDL_Model);

                        $.ajax({
                            url: '/onlineaccess/buildFCAFirstDocumentDDL',
                            type: "POST",
                            data: jsonToPost,
                            contentType: "application/json; charset=utf-8",
                            success: function (result) {
                                DocumentTypeDataBase = getDataBilingualDictionary(result);
                                var sENG = '<option value="">---Choose One---</option>';
                                var sFRN = '<option value="">---Choose One---</option>';
                                for (var i = 0; i < result.length; i++) {
                                    sENG += '<option value="' + result[i].englishCode + '">' + result[i].englishLanguageText + '</option>';
                                    sFRN += '<option value="' + result[i].englishCode + '">' + result[i].frenchLanguageText + '</option>';
                                }
                                if (DDL_Model.lang.toLowerCase().includes("f")) {
                                    $("#DocumentType_" + otherCounter).html(sENG);

                                }
                                else {
                                    $("#DocumentType_" + otherCounter).html(sFRN);
                                }
                            }
                        })
                    }
                }


            }

            $(document).ready(function () {

                //var counter = 0;

                $("#addrow_Party").bind("click", function () {

                  //  $("#loadingscreen").show();

                    var table = document.getElementById("PartyList").getElementsByTagName('tbody')[0];

                    var row = table.insertRow(table.rows.length);
                    var cell1 = row.insertCell(0);
                    var cell2 = row.insertCell(1);
                    var cell3 = row.insertCell(2);
                    var cell4 = row.insertCell(3);
                    var cell5 = row.insertCell(4);

                    cell1.innerHTML = '<label for="PartyRole_' + counter + '" class="visuallyhidden">Party Role</label><select id="PartyRole_' + counter + '" name="PartyRole_' + counter + '" class="form-control form-control-sm new" data-msg="Party Role is required."></select>';

                    cell2.innerHTML = '<label for="PartyType_' + counter + '" class="visuallyhidden">Party Details</label><select id="PartyType_' + counter + '" name="PartyType_' + counter + '" class="form-control form-control-sm new dropdowntarget" data-msg="Party Details are required."></select>';


                    cell3.innerHTML = '<label for="firstName_' + counter + '" class="visuallyhidden">First Name/Company Name</label><input type="text" class="form-control form-control-sm new" id="firstName_' + counter + '" name="firstName[]" data-msg="Name is required." maxlength="39"/>';

                    cell4.innerHTML = '<label for="lastName_' + counter + '" class="visuallyhidden">Last Name</label><input type="text" class="form-control form-control-sm new" id="lastName_' + counter + '" name="lastName[]" data-msg="Name is required." maxlength="39"/>';

                    cell5.innerHTML = '<input type="button" class="btn btn-primary btn-sm ibtnDel" value="Remove"/>';



                    $("#PartyList").append(row);
                    PopulateDropdowns(counter);

                    $("#loadingscreen").hide();

                    counter++;
                });

            });

            $("#PartyList").on("click", ".ibtnDel", function (event) {
                $(this).closest("tr").remove();
                updateIndexes($("table.party-list"));
                /*counter--;*/
                counter -= 1;
            });

            function PopulateDropdowns(counter) {

                PartyRoles(counter);
                PartyTypes(counter);

                function PartyRoles(counter) {
                    var DDL_Model = {

                        lang: "False",
                        proceedingType: $('#proceedingType').find(":selected").text(),
                    };

                    var jsonToPost = JSON.stringify(DDL_Model);

                    $.ajax({
                        url: '/onlineaccess/buildFCAPartyRole',
                        type: "POST",
                        data: jsonToPost,
                        async: false,
                        contentType: "application/json; charset=utf-8",
                        success: function (result) {
                            var s = '<option value="">---Choose One---</option>';
                            for (var i = 0; i < result.length; i++) {
                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                            }
                            $("#PartyRole_" + counter).html(s);
                        }
                    })
                }



                function PartyTypes(counter) {
                    var DDL_Model = { lang: "False" };

                    var jsonToPost = JSON.stringify(DDL_Model);
                    $.ajax({
                        url: '/onlineaccess/buildPartyTypeDDL',
                        type: "POST",
                        data: jsonToPost,
                        async: false,
                        contentType: "application/json; charset=utf-8",
                        success: function (result) {
                            ProceedingTypeDataBase = getDataBilingualDictionary(result);
                            var s = '<option value="">---Choose One---</option>';
                            for (var i = 0; i < result.length; i++) {
                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                            }
                            $("#PartyType_" + counter).html(s);

                        }
                    })
                }
            }

            function PopulateProceedingSubjectDropDown() {

                var DDL_Model = {
                    lang: "False",
                    proceedingType: $('#proceedingType').find(":selected").text(),
                };

                var jsonToPost = JSON.stringify(DDL_Model);

                $.ajax({
                    url: '/onlineaccess/FetchProceedingSubjectsDDL',
                    type: "POST",
                    data: jsonToPost,
                    contentType: "application/json; charset=utf-8",

                    success: function (result) {
                        ProceedingSubjectDataBase = getDataBilingualDictionary(result);
                        console.log(ProceedingSubjectDataBase);
                        var sENG = '<option value="">---Choose One---</option>';
                        var sFRN = '<option value="">---Choose One---</option>';
                        for (var i = 0; i < result.length; i++) {
                            sENG += '<option value="' + result[i].englishCode + '">' + result[i].englishLanguageText + '</option>';
                            sFRN += '<option value="' + result[i].englishCode + '">' + result[i].frenchLanguageText + '</option>';
                        }
                        if (DDL_Model.lang.toLowerCase().includes("f")) {
                            $("#proceedingSubject").html(sENG);
                        }
                        else {
                            $("#proceedingSubject").html(sFRN);
                        }
                        if ($("#proceedingSubject")[0].length == 2) {
                            $("#proceedingSubject")[0].selectedIndex = 1;
                            PopulateProceedingNatureDropDown();
                        }
                        $('#proceedingSubject').on('change', function () { PopulateProceedingNatureDropDown() });
                    }
                });
            }




            function PopulateProceedingNatureDropDown() {


                var x = {
                    proceedingSubject: $('#proceedingSubject').find('option:selected').text(),
                    lang: "False"
                };

                $.ajax({
                    url: '/onlineaccess/FetchProceedingNaturesDDL',
                    type: "post",
                    data: JSON.stringify(x),
                    dataType: "json",
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        proceedingNatureDataBase = getDataBilingualDictionary(result);
                        var sENG = '<option value="">---Choose One---</option>';
                        var sFRN = '<option value="">---Choose One---</option>';
                        for (var i = 0; i < result.length; i++) {
                            sENG += '<option value="' + result[i].englishCode + '">' + result[i].englishLanguageText + '</option>';
                            sFRN += '<option value="' + result[i].englishCode + '">' + result[i].frenchLanguageText + '</option>';
                            //s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                        }
                        var s = sENG + '#' + sFRN;
                        if (x.lang.toLowerCase().includes("f")) {
                            $("#proceedingNature").html(sENG);
                        }
                        else {
                            $("#proceedingNature").html(sFRN);
                        }
                        //$("#proceedingNature").html(s);


                    }
                })
            }


            function PopulateProceedingTypeDropDown() {


                var x = {
                    lang: "False"
                };

                $.ajax({
                    url: '/onlineaccess/FetchProceedingTypesDDL',
                    type: "post",
                    data: JSON.stringify(x),
                    dataType: "json",
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        proceedingTypeDataBase = getDataBilingualDictionary(result);
                        var sENG = '<option value="">---Choose One---</option>';
                        var sFRN = '<option value="">---Choose One---</option>';
                        for (var i = 0; i < result.length; i++) {
                            sENG += '<option value="' + result[i].englishCode + '">' + result[i].englishLanguageText + '</option>';
                            sFRN += '<option value="' + result[i].englishCode + '">' + result[i].frenchLanguageText + '</option>';
                            //s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                        }
                        var s = sENG + '#' + sFRN;
                        if (x.lang.toLowerCase().includes("f")) {
                            $("#proceedingType").html(sENG);
                        }
                        else {
                            $("#proceedingType").html(sFRN);
                        }
                        //$("#proceedingNature").html(s);


                    }
                })
            }



            function getDataBilingualDictionary(database) {
                var dict = [];
                for (var i = 0; i < database.length; i++) {
                    dict[i] = database[i].englishLanguageText + "##" + database[i].frenchLanguageText;
                }


                return dict;

            }

            function GenerateTextBox() {
                var x = "Clicking \"Back\" Button resets page data.";
                return confirm(x);
            }

            function deleteFiles() {
                $.ajax({
                    url: '/onlineaccess/deleteAllFiles',
                    type: "post",
                    contentType: "application/json; charset=utf-8",
                });

            }

            function dropDownHelpText() {
                $("#proceedingType").mouseover(function () {
                    $(this).attr("this.title=this.options[this.selectedIndex].title")
                });
            }


            function setTabs(activePage) {
                switch (activePage) {
                    case 1:
                        $("#step-1-tab").addClass("active");
                        $("#step-2-tab").removeClass("active");
                        $("#step-3-tab").removeClass("active");
                        $("#step-4-tab").removeClass("active");
                        $("#step-5-tab").removeClass("active");

                        $('.tablinks').prop('disabled', true);
                        $('.active').prop('disabled', false);
                        $("#step-2-tab").prop('disabled', false);

                        //helps control tab colouring via style tag
                        $("#step-1-tab").removeClass("clickable");
                        $("#step-2-tab").addClass("clickable");
                        $("#step-3-tab").removeClass("clickable");
                        $("#step-4-tab").removeClass("clickable");
                        $("#step-5-tab").removeClass("clickable");


                        break;

                    case 2:
                        $("#step-1-tab").removeClass("active");
                        $("#step-2-tab").addClass("active");
                        $("#step-3-tab").removeClass("active");
                        $("#step-4-tab").removeClass("active");
                        $("#step-5-tab").removeClass("active");

                        $('.tablinks').prop('disabled', true);
                        $('.active').prop('disabled', false);
                        $("#step-1-tab").prop('disabled', false);
                        $("#step-3-tab").prop('disabled', false);

                        $("#step-1-tab").addClass("clickable");
                        $("#step-2-tab").removeClass("clickable");
                        $("#step-3-tab").addClass("clickable");
                        $("#step-4-tab").removeClass("clickable");
                        $("#step-5-tab").removeClass("clickable");

                        break;

                    case 3:
                        $("#step-1-tab").removeClass("active");
                        $("#step-2-tab").removeClass("active");
                        $("#step-3-tab").addClass("active");
                        $("#step-4-tab").removeClass("active");
                        $("#step-5-tab").removeClass("active");

                        $('.tablinks').prop('disabled', true);
                        $('.active').prop('disabled', false);
                        $("#step-2-tab").prop('disabled', false);
                        $("#step-4-tab").prop('disabled', false);

                        $("#step-1-tab").removeClass("clickable");
                        $("#step-2-tab").addClass("clickable");
                        $("#step-3-tab").removeClass("clickable");
                        $("#step-4-tab").addClass("clickable");
                        $("#step-5-tab").removeClass("clickable");

                        break;

                    case 4:
                        $("#step-1-tab").removeClass("active");
                        $("#step-2-tab").removeClass("active");
                        $("#step-3-tab").removeClass("active");
                        $("#step-4-tab").addClass("active");
                        $("#step-5-tab").removeClass("active");

                        $('.tablinks').prop('disabled', true);
                        $('.active').prop('disabled', false);
                        $("#step-3-tab").prop('disabled', false);
                        $("#step-5-tab").prop('disabled', false);

                        $("#step-1-tab").removeClass("clickable");
                        $("#step-2-tab").removeClass("clickable");
                        $("#step-3-tab").addClass("clickable");
                        $("#step-4-tab").removeClass("clickable");
                        $("#step-5-tab").addClass("clickable");

                        break;

                    case 5:
                        $("#step-1-tab").removeClass("active");
                        $("#step-2-tab").removeClass("active");
                        $("#step-3-tab").removeClass("active");
                        $("#step-4-tab").removeClass("active");
                        $("#step-5-tab").addClass("active");

                        $('.tablinks').prop('disabled', true);
                        $('.active').prop('disabled', false);
                        $("#step-4-tab").prop('disabled', false);

                        $("#step-1-tab").removeClass("clickable");
                        $("#step-2-tab").removeClass("clickable");
                        $("#step-3-tab").removeClass("clickable");
                        $("#step-4-tab").addClass("clickable");
                        $("#step-5-tab").removeClass("clickable");

                        break;
                    //default:
                }

            }//end of setTabs()

            $(document).ready(function () {
                $("#step-1-tab").click(function () {

                    if (activePage == 2) {
                        backStep2();
                    }

                })

                $("#step-2-tab").click(function () {

                    if (activePage == 1) {
                        submitStep1();
                    }

                    else if (activePage == 3) {
                        backStep3();
                    }

                })

                $("#step-3-tab").click(function () {
                    if (activePage == 2) {
                        submitStep2();
                    }

                    else if (activePage == 4) {
                        backStep4();
                    }
                })

                $("#step-4-tab").click(function () {
                    if (activePage == 3) {
                        submitStep3();
                    }

                    else if (activePage == 5) {
                        backStep5();
                    }
                })

                $("#step-5-tab").click(function () {
                    if (activePage == 4) {
                        submitStep4();
                    }

                })
            });

            //Display characters remaining under urgency decription text area in step 4
            $('#urgDesc').keyup(function () {
                    $('#countDownUrg').html("Characters remaining: " + (255 - $(this).val().length));
            });

            ////show or hide definitions display on step 1 of new proceeding.
            //$('#definitionsButton1').on("click", function (e) {
            //    showDefs == false ? $("#definitions").show().css("visibility", "visible") : $("#definitions").hide().css("visibility", "hidden");

            //    //set showDefs to opposite
            //    showDefs = !showDefs;
            //});

            //show definitions box, show button to hide them
            $('#definitionsButton1').on("click", function (e) {

                $("#definitions").show().css("visibility", "visible");
                $("#defsClosed").hide().css("visibility", "hidden");
                $("#defsOpened").show().css("visibility", "visible");
            });

            //hide definitions box, show button to open them
            $('#definitionsButton2').on("click", function (e) {
                $("#definitions").hide().css("visibility", "hidden");
                $("#defsClosed").show().css("visibility", "visible");
                $("#defsOpened").hide().css("visibility", "hidden");
            });

            //Disable urgency description when checkbox is not clicked
            $('#isUrgent').change(function () {
                var urgency = $('#isUrgent').prop('checked');
                if (urgency) {
                    $('#urgDesc').removeAttr('disabled');
                } else {
                    $('#urgDesc').attr('disabled', 'disabled');
                }
            });

        }); //master function


    </script>


    <script>
        $(document).ready(function () {
            
        //    $('#loadingscreen').hide();
        });
    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('[data-toggle="tooltip"]').tooltip();

            $(".tooltip-top").tooltip({
                placement: 'top'
            });
            $(".tooltip-right").tooltip({
                placement: 'right'
            });
            $(".tooltip-bottom").tooltip({
                placement: 'bottom'
            });
            $(".tooltip-left").tooltip({
                placement: 'left'
            });

            
        });
    </script>

<script>
         //show definitions box, show button to hide them
         $('#definitionsButton1').on("click", function (e) {

$("#definitions").show().css("visibility", "visible");
$("#defsClosed").hide().css("visibility", "hidden");
$("#defsOpened").show().css("visibility", "visible");
});

//hide definitions box, show button to open them
$('#definitionsButton2').on("click", function (e) {
$("#definitions").hide().css("visibility", "hidden");
$("#defsClosed").show().css("visibility", "visible");
$("#defsOpened").hide().css("visibility", "hidden");
});

    </script>
</script>

</body>