<head>

<!-- Google tag (gtag.js) -->

<script src="https://efiling.fca-caf.ca/Content/vendors/wet-boew/js/i18n/en.min.js"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-Q1HWL3M994"></script>

<script>

window.dataLayer = window.dataLayer || [];

function gtag(){dataLayer.push(arguments);}

gtag('js', new Date());

gtag('config', 'G-Q1HWL3M994');

</script>

<!-- Google tag (gtag.js) -->

    <meta charset="utf-8">
    <!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
            wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
    <title>File Document(s) on Existing Proceeding</title>
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <meta name="description" content="Web Experience Toolkit (WET) includes reusable components for building and maintaining innovative Web sites that are accessible, usable, and interoperable. These reusable components are open source software and free for use by departments and external Web communities">
    <link rel="alternate" hreflang="fr" href="https://efiling.fca-caf.ca/fr/acces-en-ligne/existing-e-filing-start">
    <link rel="apple-touch-icon" sizes="57x57 72x72 114x114 144x144 150x150" class="wb-favicon" href="https://efiling.fca-caf.ca/Content/vendors/GCWeb/assets/favicon-mobile.png"><link href="https://efiling.fca-caf.ca/Content/vendors/GCWeb/assets/favicon.ico" rel="icon" type="image/x-icon" class="wb-init wb-favicon-inited">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link rel="stylesheet" href="https://efiling.fca-caf.ca/Content/vendors/GCWeb/css/theme.min.css">
    <noscript><link rel="stylesheet" href="https://efiling.fca-caf.ca/Content/vendors/wet-boew/css/noscript.min.css" /></noscript>
    

    <script src="https://efiling.fca-caf.ca/Content/vendors/Jquery/jquery.js"></script>
    <link rel="stylesheet" href="https://efiling.fca-caf.ca/content/css/base/loading.css">

</head>
<body vocab="http://schema.org/" resource="#wb-webpage" typeof="WebPage" class="">
    <div id="loadingscreen" class="loading" style="display: none">
    </div>
    <div id="loadingscreen2" style="display: none">
        TEST TEXT
        Add Party
    </div>

    
    <header>
        <div id="wb-bnr" class="container">
            <div class="row">
                <section id="wb-lng" class="col-xs-3 col-sm-12 pull-right text-right">
                    <span class="wb-inv">Language selection</span>
                    <ul class="list-inline mrgn-bttm-0">
                        <li><a href="https://www.fca-caf.ca/en/home" title="Federal Court of Appeal" target="_blank">Federal Court of Appeal Website</a></li>
                    <li><a href="https://efiling.fca-caf.ca/en/online-access/startover" title="Home">E-Filing Home</a></li>
                    <li><a href="https://efiling.fca-caf.ca/en/online-access/guide" title="Guide" target="_blank">User Guide</a></li>
                    <li><a href="https://efiling.fca-caf.ca/en/online-access/faq" title="F.A.Q." target="_blank">Frequently Asked Questions</a></li>
                    <li>
                        <a lang="fr"
                           hreflang="fr"
                           href="https://efiling.fca-caf.ca/fr/acces-en-ligne/e-filing-intro">
                            <span class="hidden-xs">Fran&#231;ais</span>
                            <abbr title="Fran&#231;ais" class="visible-xs h3 mrgn-tp-sm mrgn-bttm-0 text-uppercase">fr</abbr>

                        </a>
                    </li>

                </ul>
                </section>
                <div class="brand col-xs-9 col-sm-5 col-md-4" property="publisher" resource="#wb-publisher" typeof="Government Organization">
                    
                    <meta property="name" content="Federal Court of Appeal">
                    <meta property="areaServed" typeof="Country" content="Canada">
                    <link property="logo" href="https://efiling.fca-caf.ca/Content/img/base/fca-logo.jpg">
                </div>

                
            </div>
        </div>

        
        <!--<nav class="gcweb-menu" typeof="SiteNavigationElement">
        <div class="container">
            <h2 class="wb-inv">Menu</h2>
                <button type="button" aria-haspopup="true" aria-expanded="false">Menu<span class="wb-inv"> Main</span> <span class="expicon glyphicon glyphicon-chevron-down"></span></button>
-->
        
        <!--</div>
        </nav>-->
        

        

    </header>

    

        <main property="mainContentOfPage" resource="#wb-main" class="container" typeof="WebPageElement">
            



<style>
    .error {
        color: red;
    }

    .form-control {
        color: black;
        width: 100%;
    }

    .tab {
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }

    .tablinks {
        width: 20%;
    }

    .tab button {
        background-color: inherit;
        float: left;
        border: 1px solid #ccc;
        outline: none;
        padding: 14px 16px;
        transition: 0.3s;
        align-items: stretch;
    }

        .tab button.clickable:hover {
            background-color: inherit;
            float: left;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            background-color: #ddd;
        }

        /* Create an active/current tablink class */
        .tab button.active {
            /*background-color: #ccc;*/
            background-color: #26374a;
            color: white;
        }

    /* Style the tab content */
    .tabcontent {
        /* display: none;*/
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
    }

    .visuallyhidden {
        border: 0;
        clip: rect(0 0 0 0);
        height: 1px;
        margin: -1px;
        overflow: hidden;
        padding: 0;
        position: absolute;
        width: 1px;
    }

    legend span.accessibility {
        position: absolute;
        left: -9999px;
        width: 100px;
        height: auto;
        overflow: hidden;
    }
</style>

<div id="cultureInfo" hidden="">en-CA</div>
<div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
    <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">

        <div class="row">
            <div class="col-lg-12">
                <h1 class="text-center">Federal Court of Appeal Electronic Filing System</h1>
            </div>
        </div>

        <!-- Tab links -->
        <div class="tab" style="display: flex;">
            <button class="tablinks active" id="step-1-tab">Step 1: Access Court File</button>
            <button class="tablinks clickable" id="step-2-tab">Step 2: View Court File</button>
            <button class="tablinks clickable" id="step-3-tab">Step 3: View Parties</button>
            <button class="tablinks" id="step-4-tab" disabled="">Step 4: Add Document</button>
            <button class="tablinks" id="step-5-tab" disabled="">Step 5: Contact Information</button>
            <button class="tablinks" id="step-6-tab" disabled="">Step 6: Review</button>
        </div>

        <div id="step-1" class="tabcontent">

            <div class="row">
                <div class="col-lg-12">
                    <h2 style="margin-bottom:20px">Step 1: Access Court File</h2>
                </div>
            </div>

            <div class="row">


<form action="/en/online-access/existing-e-filing-start" id="form1" method="post" novalidate="novalidate" data-gtm-form-interact-id="0">                    <div class="ajaxNewCourtData">
                        <style>
    .form-control {
        color: black;
        width: 100%;
    }
</style>


<div style="font-size:19px;">
    <div class="col-sm-12">

        <div>
            
            <p>Please enter the Court File Number for the proceeding that you wish to add documents to.</p>
            <p>If you do not know the Court File Number attached to your proceeding, you can search for it <a title="Opens in a new window" href="https://apps.fca-caf.gc.ca/pq/IndexingQueries/infp_queries_e.php#cont" target="_blank">here </a>.</p>
        </div>
        <BR>

        <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
            <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                <label for="userEnteredCourtNo"><strong>Court File Number</strong></label> (required)<br>
                
    
            
                <br>

                <div>
                    
                </div>
            </div>
        </div>
    </div>
</div>


                    </div>
                    <div class="justify-content-between pull-left mrgn-lft-md mrgn-tp-md">
                        <button type="button" class="btn btn-outline-primary">
                            <i class="fa fa-chevron-left"></i> Back
                        </button>
                    </div>
                    <div class="justify-content-between pull-right mrgn-rght-md mrgn-tp-md">
                        <a href="b02-existing-viewfile.html"><button type="submit" class="btn btn-success" href="b02-existing-viewfile.html">
                            Next
                            <i class="fa fa-chevron-right"></i>
                        </button>
                        </a>
                    </div>
</form>            </div>

        </div> 

        <br>
            <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
                <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                    <div class="form-group">
                <h4>Share your feedback</h4>
                <p>Take 5 minutes to let us know about your experience. The survey will open in a new browser tab.</p>
                <a href="https://forms.microsoft.com/r/1YCRBV91uf" target="new" type="button" class="btn btn-primary">Start survey</a>
    </div>
    
        <div id="step-2" class="tabcontent" style="display: none; visibility: hidden;">
            <div class="row">

                <div class="row">
                    <div class="col-lg-12">
                        <h3 class="text-center">Step 2: Add / Edit Party</h3>
                    </div>
                </div>

<form action="b02-existing-viewfile.html" id="form2" method="post" novalidate="novalidate">                    <div class="ajaxHeading">
                        
                        
<div class="col-md-12">
    <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
        <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
            <div style="font-size:19px;">
                <div>
                    <b><label for="Court_File_Number:">Court File Number:</label></b> <br>
                    <b><label for="Style_Of_Cause:">Style Of Cause:</label></b> <br>
                </div>
            </div>
        </div>
    </div>
</div>
                        
                    </div>
                    <div class="ajaxNewPartyData">
                        
<div style="font-size:19px;">
    <div class="row">
        <div class="col-sm-12">

            <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">

                <div class="form-group">
                    <div class="table-responsive">

                        <table class="table table-striped party-list" id="PartyList">

                            <thead>
                                <tr>
                                    <th scope="col" style="width:22.5%;">Party Role<span style="color:red;">*</span></th>
                                    <th scope="col" style="width:22.5%;">Party Details<span style="color:red;">*</span></th>
                                    <th scope="col" style="width:22.5%;">First Name/Company Name<span style="color:red;">*</span></th>
                                    <th scope="col" style="width:22.5%;">Last Name<span style="color:red;">*</span></th>
                                    <th scope="col" style="width:10%;">Action</th>
                                </tr>
                            </thead>
                            <tbody>


                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="5" style="text-align: center;">

                                        <input type="button" class="btn btn-primary" id="addrow_Party" value="Add Party">

                                    </td>
                                </tr>
                            </tfoot>
                        </table>

                        <div>
                            Please click the "Add Party" button above to enter the names of the parties involved in this proceeding.<br>
                            For most proceedings, you must enter the names of a minimum of two opposing parties.<br>
For example:<br>
In an application for judicial review, enter the names of the Applicant(s) and the Respondent(s).<br>
In an appeal, enter the names of the Appellant(s) and the Respondent(s).<br>
In a motion, enter the names of the Moving Party or Parties and the Respondent(s).<br>
In a reference, there may only be one applicant. Please enter the name of this party.<br>
                            <strong><span style="color:red;">* = (Required)</span></strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    


                        <br>
                    </div>
                    <div class="justify-content-between pull-left mrgn-lft-md mrgn-tp-md">
                        <button type="button" class="btn btn-outline-primary" id="Back-Step-2">
                            <i class="fa fa-chevron-left"></i> Back
                        </button>
                    </div>
                    <div class="justify-content-between pull-right mrgn-rght-md mrgn-tp-md">
                        <button type="submit" class="btn btn-primary" id="Submit-Step-2">
                            Continue
                            <i class="fa fa-chevron-right"></i>
                        </button>
                    </div>
</form>            </div>
        </div>

        <div id="step-3" class="tabcontent" style="display: none; visibility: hidden;">
            <div class="row">

                <div class="row">
                    <div class="col-lg-12">
                        <h3 class="text-center">Step 3: Add / Edit Document</h3>
                    </div>
                </div>

<form action="/en/online-access/existing-e-filing-start" enctype="multipart/form-data" id="form3" method="post" novalidate="novalidate"><input name="__RequestVerificationToken" type="hidden" value="WykdNggXD6kT4FxsDn042Y2AAXZD0GgfxMiG3FR5M9DYk8GTd66irJmzBnSdxlzmLkKNB17Vm1ZY8dyHr0aN6DDOJSuL2i9NdSvd9ynx-iQ1">                    <div class="ajaxHeading">
                        
<div class="col-md-12">
    <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
        <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
            <div style="font-size:19px;">
                <div>
                    <b><label for="Court_File_Number:">Court File Number:</label></b> <br>
                    <b><label for="Style_Of_Cause:">Style Of Cause:</label></b> <br>
                </div>
            </div>
        </div>
    </div>
</div>
                    </div>
                    <div id="form-content-step3">
                        <div style="font-size:19px;">
    <div class="col-sm-12">

        <div class="form-group">
            <input id="cultureInfo" type="hidden" value="en-CA">
            <div class="table-responsive">

                <table class="table table-striped doc-list" id="docList">
                    <thead>
                        <tr>
                            <th scope="col" style="width: 25%">Document Type<span style="color:red;">*</span></th>
                            <th scope="col" style="width: 20%">Document Name<span style="color: red;">*</span></th>
                            <th scope="col" style="width: 15%">Document Language<span style="color: red;">*</span></th>
                            <th scope="col" style="width: 20%">Filing Party(ies)<span style="color: red;">*</span></th>
                            <th scope="col" style="width: 15%">Handling Instructions for the Submission (Maximum 255 characters)</th>
                            <th scope="col" style="width: 5%">Action</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                    <tfoot>
                        <tr>
                            

                            

                            <td colspan="12" style="text-align:center;vertical-align:middle;">Large documents may take several minutes to upload. Please be patient while your documents are uploaded.</td>

                        </tr>
                        <tr>
                            <td colspan="12" style="text-align:center;vertical-align:middle;font-weight:bold;color:red">WARNING! Do not upload confidential documents to the e-filing system.</td>
                        </tr>
                        <tr>
                            <td colspan="12" style="text-align:center;vertical-align:middle">
                                <input type="button" class="btn btn-primary" id="addrow" value="Add Document">
                            </td>
                        </tr>
                    </tfoot>
                </table>

                <div>
                    Please click the “Add Document” button above to add any additional document(s) to be filed.<br>
                    <strong><span style="color:red;">* = (Required)</span></strong>
                </div>
            </div>
        </div>
    </div>
</div>




                    </div>
                    <div class="justify-content-between pull-left mrgn-lft-md mrgn-tp-md">
                        <button type="button" class="btn btn-outline-primary" id="Back-Step-3">
                            <i class="fa fa-chevron-left"></i> Back
                        </button>
                    </div>
                    <div class="justify-content-between pull-right mrgn-rght-md mrgn-tp-md">
                        <button type="submit" class="btn btn-primary" id="Submit-Step-3">
                            Continue
                            <i class="fa fa-chevron-right"></i>
                        </button>
                    </div>
</form>
            </div>
        </div>


        <div id="step-4" class="tabcontent" style="display: none; visibility: hidden;">

            <div class="row">
                <div class="col-lg-12">
                    <h3 class="text-center">Step  4: Contact Information</h3>
                </div>
            </div>
            <div class="row">
<form action="/en/online-access/existing-e-filing-start" enctype="multipart/form-data" id="form4" method="post" novalidate="novalidate">                    <div class="ajaxHeading">
                        
<div class="col-md-12">
    <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
        <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
            <div style="font-size:19px;">
                <div>
                    <b><label for="Court_File_Number:">Court File Number:</label></b> <br>
                    <b><label for="Style_Of_Cause:">Style Of Cause:</label></b> <br>
                </div>
            </div>
        </div>
    </div>
</div>
                    </div>
                    <div>
                        
<div style="font-size:19px;">
    <div class="col-md-12">

        <div>
            <h4>Please provide your <a href="#" data-placement="top" title="Contact information of the person who files an electronic document">contact information</a>, select filing location and confirm if the filing is urgent.</h4>
        </div>

      

        <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
            <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">

                <div class="heading">
                    
                    <h4><label for="Contact_Information_for_the_Person_Making_a_Submission_to_the_E-Filing_System">Contact Information for the Person Making a Submission to the E-Filing System</label></h4>
                </div>

                
                
            <div class="form-group">

                <input id="cultureInfo" type="hidden" value="en-CA">
                <label id="contact--firstname">
                    <strong><label for="firstName">First Name</label><span style="color:red;">*</span></strong>
                </label>
                <input title="First Name" class="form-control" data-val="true" data-val-maxlength="The field firstName must be a string or array type with a maximum length of '100'." data-val-maxlength-max="100" data-val-required="Name is required." id="firstName" maxlength="50" name="firstName" required="true" type="text" value="">

            </div>
                <div class="form-group">
                    <label id="contact--lastname">
                        <strong><label for="lastName">Last Name</label><span style="color:red;">*</span></strong>
                    </label>
                    <input title="Last Name" class="form-control" data-val="true" data-val-maxlength="The field lastName must be a string or array type with a maximum length of '100'." data-val-maxlength-max="100" data-val-required="Name is required." id="lastName" maxlength="100" name="lastName" required="true" type="text" value="">
                </div>

                <div class="form-group">
                    <label for="City">City</label>
                    <input title="City" class="form-control" data-val="true" data-val-maxlength="The field City must be a string or array type with a maximum length of '80'." data-val-maxlength-max="80" id="City" maxlength="80" name="City" type="text" value="">
                </div>
                <div class="form-group">
                    <strong>
                        <label for="phoneNumber">Telephone Number</label><span style="color:red;">*
                        </span>
                    </strong>
                    <input title="Telephone Number" class="form-control" data-val="true" data-val-maxlength="The field phoneNumber must be a string or array type with a maximum length of '12'." data-val-maxlength-max="12" data-val-regex="Telephone Number must be of the following format 999-999-9999." data-val-regex-pattern="^\(?\d{3}\)?-? *\d{3}-? *-?\d{4}$" data-val-required="Telephone Number must be of the following format 999-999-9999." id="phoneNumber" maxlength="12" name="phoneNumber" required="true" type="text" value="">
                </div>

                <!--Primary Email-->
                <div class="form-group">
                    <strong>
                        <label for="priEmail">E-mail Address</label><span style="color:red;">*
                        </span>
                    </strong>
                    <input title="E-mail Address" class="form-control" data-val="true" data-val-maxlength="The field priEmail must be a string or array type with a maximum length of '255'." data-val-maxlength-max="255" data-val-regex="A valid E-mail Address is required." data-val-regex-pattern="^(([0-9a-zA-ZÀ-ÿ]).*)@(([0-9a-zA-ZÀ-ÿ].*\.*)[A-Za-zÀ-ÿ0-9]{2,})$" data-val-required="A valid E-mail Address is required." id="priEmail" maxlength="255" name="priEmail" required="true" type="text" value="">
                </div>

                <div class="form-group">
                    <div id="stepfour--email__second">
                        <label for="secEmail">Alternate E-mail Address</label>
                        <input title="Alternate E-mail Address" class="form-control" data-val="true" data-val-maxlength="The field secEmail must be a string or array type with a maximum length of '255'." data-val-maxlength-max="255" id="secEmail" maxlength="255" name="secEmail" type="text" value="">
                    </div>
                </div>

                <div class="form-group">
                    <div id="stepfour--language">
                        <strong>
                            <label for="languageDDL">Language of communication with Registry</label><span style="color:red;">*
                            </span>
                        </strong>
                        <select title="Language of communication with Registry" class="form-control" data-val="true" data-val-required="Language of communication with Registry is required." id="languageDDL" name="languageDDL" required="true"><option value="">---Choose One---</option>
<option value="E">English</option>
<option value="F">French</option>
</select>
                    </div>
                </div>

            </div>

            </div>
        

        <br>

        <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
            <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">

                <div class="form-group">
                    <div class="heading">
                        
                        <h4><label for="Filing_location">Filing location</label></h4>
                    </div>

                    <div>
                        <p>Please select the Registry Office closest to your location.</p>
                    </div>

                    <div class="form-group">
                        <div>
                            <!--DropDown for registry office-->
                            <strong>
                                <label for="registryOffice">Registry Office</label><span style="color:red;">*
                                </span>
                            </strong>
                            <select title="Registry Office" class="form-control" data-val="true" data-val-required="A Registry Office is required." id="regOfficeDDL" name="regOfficeDDL" required="true"><option value="">---Choose One---</option>
<option value=" 7.0">Calgary</option>
<option value=" 120.0">Charlottetown</option>
<option value=" 4.0">Edmonton</option>
<option value=" 35.0">Fredericton</option>
<option value=" 62.0">Halifax</option>
<option value=" 191.0">Iqaluit</option>
<option value=" 138.0">Montréal</option>
<option value=" 71.0">Ottawa</option>
<option value=" 135.0">Québec</option>
<option value=" 157.0">Regina</option>
<option value=" 151.0">Saskatoon</option>
<option value=" 42.0">St. John's</option>
<option value=" 113.0">Toronto</option>
<option value=" 19.0">Vancouver</option>
<option value=" 158.0">Whitehorse</option>
<option value=" 25.0">Winnipeg</option>
<option value=" 64.0">Yellowknife</option>
</select>

                        </div>
                    </div>
                </div>
            </div>
        </div>

        <br>

        <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
            <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                <div class"form-group"="">
                    <div class="heading">
                        

                        <h4><label for="Filing_Urgency">Filing Urgency</label></h4>
                    </div>

                    If the filing is urgent, please click the checkbox below and provide a brief explanation.

                    <fieldset class="gc-chckbxrdio">
                        <legend><span class="accessibility">Welcome screen agreement</span></legend>
                        <ul class="list-unstyled lst-spcd-1">
                            <li class="checkbox">
                                <input type="checkbox" id="isUrgent">
                                <label for="isUrgent">
                                    Is Filing Urgent?
                                </label>
                            </li>
                        </ul>
                    </fieldset>


                    

                    <label for="urgDesc">Urgency Description</label>
                    <br>
                    <textarea title="Urgency Description" class="form-control" cols="40" disabled="True" id="urgDesc" maxlength="255" name="urgDesc" rows="8" style="width:100%;"></textarea>
                    <b>*Limit of 255 characters. </b>
                    <br>
                    <span id="countDownUrg"></span>

                </div>


                <div>
                    <br>
                    <strong><span style="color:red;">* = (Required)</span></strong>
                </div>
            </div>
        </div>
    </div>
</div>



                    </div>
                    <div class="justify-content-between pull-left mrgn-lft-md mrgn-tp-md">
                        <button type="button" class="btn btn-outline-primary" id="Back-Step-4">
                            <i class="fa fa-chevron-left"></i> Back
                        </button>
                    </div>
                    <div class="justify-content-between pull-right mrgn-rght-md mrgn-tp-md">
                        <button type="submit" class="btn btn-primary" id="Submit-Step-4">
                            Continue
                            <i class="fa fa-chevron-right"></i>
                        </button>
                    </div>
</form>            </div>
        </div>

        <div id="step-5" class="tabcontent" style="display: none; visibility: hidden;">

            <div class="row">
                <div class="col-lg-12">
                    <h3 class="text-center">Step 5: Summary</h3>
                </div>
            </div>
            <div class="row">
                <div style="font-size: 16px;">
                    <div class="ajaxHeading">
                        
<div class="col-md-12">
    <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
        <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
            <div style="font-size:19px;">
                <div>
                    <b><label for="Court_File_Number:">Court File Number:</label></b> <br>
                    <b><label for="Style_Of_Cause:">Style Of Cause:</label></b> <br>
                </div>
            </div>
        </div>
    </div>
</div>
                    </div>
                </div>
                <div class="ajaxMe">
                    
<div class="col-md-12">
    <div>
        <h4>
            Please review the details you have entered. If you wish to edit your information, please press the “Back” button to return to a previous screen.
            Once you are ready to submit your document, click “Submit”.
            <br><br>
            Large documents may take several minutes to upload. Please be patient while your documents are uploaded.
        </h4>
    </div>

<form action="/en/online-access/processData" id="Form5" method="post">        <!--Court Case Info-->
        <input id="cultureInfo" type="hidden" name="cultureInfo" value="en-CA">
        <div style="font-size:19px;">
            <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
                <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                    <div id="stepfive--courtcase">
                        <div class="heading">
                            <h4>Court Case Information</h4>
                        </div>
                        <p>
                            <label><b>Court:</b></label> Federal Court of Appeal<br>

                                 <label><b>Proceeding Type:</b></label> <br>
                                 <label><b>Proceeding Subject:</b></label> <br>
                                 <label><b>Proceeding Nature:</b></label> <br>


                                                    </p>
                    </div>
                </div>
            </div>

            <br>

            <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
                <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                    <!-- Filing Party-->
                    <div id="stepfive--filingparty">
                        <div class="heading">
                            <h4>Contact Information for the Person Submitting a Filing</h4>
                        </div>
                        <p>
                            <label><b>Name:</b></label> <br>
                            <label><b>Telephone Number:</b></label> <br>
                            <label><b>E-mail Address:</b></label> <br>

                            <label><b>Language of communication with Registry:</b></label> <br>
                        </p>
                    </div>
                </div>
            </div>

            <br>

            <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
                <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                    <!--Filing Information-->
                    <div id="stepfive--filinginfo">
                        <div class="heading">
                            <h4>Filing Information</h4>
                        </div>
                        <p>
                            <label><b>Filing Urgency:</b></label>
No                            <br>
                            <label><b>Registry Office:</b></label>  <br>

                        </p>
                    </div>
                </div>
            </div>

            <br>

            <div class="brdr-tp brdr-rght brdr-bttm brdr-lft hght-inhrt">
                <div class="mrgn-rght-md mrgn-bttm-md mrgn-lft-md mrgn-tp-md">
                    <!--Filing Documents-->
                    <div id="stepfive--filingdocs">
                        <div class="heading">
                            <h4>Filing Documents</h4>
                        </div>
                        <table id="datatable" class="table table-striped table-hover table-bordered dataTable no-footer dtr-inline" style="width: 100%;" role="grid" aria-describedby="datatable_info">
                            <thead>
                                <tr role="row">
                                    <th tabindex="0" aria-controls="datatable" rowspan="1" colspan="1">Documents Submitted</th>
                                    <th>Filing Party</th>
                                    <th>Handling Instructions for the Submission</th>
                                </tr>
                            </thead>
                            
                            <tbody>
                            </tbody>

                        </table>
                    </div>
                    <br>
                </div>
            </div>

            <br>
        </div>
</form></div>



                </div>

                <div class="justify-content-between pull-left mrgn-lft-md mrgn-tp-md">
                    <button type="submit" class="btn btn-outline-primary" id="Back-Step-5">
                        <i class="fa fa-chevron-left"></i> Back
                    </button>
                </div>
                <div class="justify-content-between pull-right mrgn-rght-md mrgn-tp-md">
                    <p>
                        <input value="Submit" type="button" id="Submit-Step-5" class="btn btn-primary btn-rounded btn-md ml-4">
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>





            <div class="mrgn-tp-lg mrgn-bttm-lg">
                <dl id="wb-dtmd">
                    <dt>Date modified:</dt>
                    <dd><time property="dateModified">2023-04-03</time></dd>
                </dl>
            </div>
        </main>

    <footer id="wb-info">
        

<div class="landscape">
    <nav class="container wb-navcurr">

            <div class="row">
                <div class="col-md-3 text-white">
                    <h3 class="mb-2">Federal Court of Appeal</h3>
                    <ul class="list-unstyled">
                        <li><span class="fas fa-university"></span> <a href="https://www.cas-satj.gc.ca/en/operations/locations.shtml">Registry Locations</a></li>                       
                        <li><span class="fa fa-phone"></span> <a href="https://www.cas-satj.gc.ca/en/operations/numbers.shtml">Registry Phone Numbers</a></li>
                        <li><span class="fa fa-envelope"></span> <a href="mailto:information@fca-caf.gc.ca">information@fca-caf.ca</a></li>
                    </ul>
                </div>
                <div class="col-md-3 text-white">  </div>              
                <div class="col-md-2 text-white"></div>                
                
                <div class="col-md-2 text-white">
                    <h3 class="mb-2">Stay Informed</h3>
                    <ul class="list-unstyled">
                        <li><span class="fa fa-envelope"></span> <a href="https://www.fca-caf.ca/en/pages/web-based-litigation-tools/electronic-mailing-lists">Mailing List</a></li>
                        <li><i class="fab fa-twitter-square fa-lg fa-inverse"></i> <a href="https://twitter.com/FedCourtApp_en">Twitter</a></li>
                    </ul>
                </div>
            </div>
    </nav>


</div>
<div class="brand">
    <div class="container">
        <div class="row">
            <nav class="col-md-9 col-lg-8 ftr-urlt-lnk">
                    <ul>
                        <li><a href="https://www.fca-caf.ca/en/pages/important-notices">Important Notices</a></li>
                      
                    </ul>
            </nav>

            
            
        </div>

    </div>
</div>



    </footer>
    
    
    <script src="https://efiling.fca-caf.ca/Content/vendors/jquery-validation/jquery.validate.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/vendors/jquery/jquery.unobtrusive-ajax.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/vendors/jquery-ui/jquery-ui.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/vendors/jquery-ui/jquery-ui.min.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/vendors/jquery-ui-bootstrap/js/jquery-ui-1.9.2.custom.min.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/vendors/wet-boew/js/wet-boew.min.js"></script><span id="wb-rsz" class="wb-init">&nbsp;</span>
    <script src="https://efiling.fca-caf.ca/Content/vendors/GCWeb/js/theme.min.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/vendors/js-cookie/js.cookie.js"></script>
    



    <script src="https://efiling.fca-caf.ca/Content/js/base/js.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/js/base/utils.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/js/base/data.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/js/base/popup.js"></script>
    <script src="https://efiling.fca-caf.ca/Content/js/base/utils.js"></script>

    

    <script>
        $(function () {
            var activePage = 1;

            $('.ajaxSignatures').hide();
            $("#Signatures").prop('checked', false);
            var hidden = false;
            var sigsNeeded = false;
            var isValidCourt = false;
            var shownCourt = false;
            var rowCount = 0;
            var userDefinedParty = []; //elements from party form
            var fileList = [];  //elements from documents form
            var DocumentTypeDataBase = [];

            var databaseDefinedParty = []; //elements from party form
            $('[data-toggle="tooltip"]').tooltip();

            //hides all but step one when the page loads
            $(document).ready(function () {
                $("#step-2").hide().css("visibility", "hidden");
                $("#step-3").hide().css("visibility", "hidden");
                $("#step-4").hide().css("visibility", "hidden");
                $("#step-5").hide().css("visibility", "hidden");

                setTabs(activePage);
            });

            $('.error').each(function () {

                $(this).css('color', 'red');
            });

            $(document).on('change', '.dropdowntarget', function () {
                var element = this;
                var id = element.name.match(/\d+/);
                RestrictDropDown(id[0]);
            });

            $(document).keypress(function (e) {
                var code = (e.keyCode || e.which);
                //if (code == 60 || code == 62 || code == 59 || code === 13) {
                if (code == 60 || code == 62 || code == 59) {   //           console.log("We got it");
                    e.preventDefault();
                }
            });
            userEnteredCourtNo.addEventListener("keypress", function (event) {
                // Number 13 is the "Enter" key on the keyboard
                if (event.keyCode === 13) {
                    event.preventDefault();
                    // Cancel the default action, if needed
                    //event.preventDefault();
                    // Trigger the button element with a click
                    //document.getElementById("Submit-Step-1").click();
                    document.getElementById("Submit-Step-1").click();
                    //this.form.submit();
                }
                //if (event.keyCode == 32) {
                //    return false;
                //    //this.value = this.value.replace(/[\W]/g, '_');
                //}
            });

            $(document).on("keydown", "#userEnteredCourtNo", function (evt) {
                if (evt.keyCode == 32) {
                    return false;
                }
            });
            $('#userEnteredCourtNo').on('click', function () {
                $('#courtNumberNotFound').html("");
            });


            function processDataBaseTable() {
                $('#PartyList tr').each(function () {
                    var Party = {};
                    Party.role = $(this).find("td:eq(0)").text();
                    Party.type = $(this).find("td:eq(1)").text();
                    Party.firstName = $(this).find("td:eq(2)").text();
                    Party.lastName = $(this).find("td:eq(3)").text();
                    //add to existing
                    databaseDefinedParty.push(Party);
                });
            }

            function CourtNumberExist() {

                var model = {
                    //form1
                    userEnteredCourtNo: $('#userEnteredCourtNo').val().toUpperCase(),
                    lang: "False"
                };

                var jsonToPost = JSON.stringify(model);

                $.ajax({
                    type: "POST",
                    url: '/onlineaccess/CourtLookUp',
                    data: jsonToPost,
                    dataType: "json",
                    async: false,
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        isValidCourt = result;
                    },
                    failure: function (result) {
                        console.log(result);
                    }
                })
            }

            //back functions
            function backStep1() {
                location.href = '/en/online-access/e-filing-intro';
            }

            function backStep2() {
                if (GenerateTextBox()) {

                    userDefinedParty = []; //reset our lists
                    databaseDefinedParty = [];
                    counter = 0;
                    shownCourt = false;
                    isValidCourt = false;
                    $('iOfficeNumber').val("");
                    //clear table
                    $('.ajaxNewCourtData').load("/onlineaccess/enterCourtData", { lang: "False" });
                    $("#PartyList  tbody").empty();
                    $("#step-2").hide().css("visibility", "hidden");
                    $("#step-1").show().css("visibility", "visible");

                    activePage--;

                    setTabs(activePage);
                }
            }

            function backStep3() {
                if (GenerateTextBox()) {

                    $("#step-3").hide().css("visibility", "hidden");
                    $("#step-2").show().css("visibility", "visible");

                    activePage--;

                    setTabs(activePage);

                    fileList = [];
                    otherCounter = 0;

                    userDefinedParty = [];//prevent double scrape
                    //clear table
                    $("#docList tbody").empty();
                    deleteFiles();
                    if (sigsNeeded) {
                        $('.ajaxSignatures').hide();
                        $("#Signatures").prop('checked', false);
                    }
                    sigsNeeded = false;
                }
            }

            function backStep4() {
                if (GenerateTextBox()) {
                    deleteFiles();

                    $("#step-4").hide().css("visibility", "hidden");
                    $("#step-3").show().css("visibility", "visible");

                    activePage--;

                    setTabs(activePage);
                }
            }

            function backStep5() {
                if (GenerateTextBox()) {
                    $("#step-5").hide().css("visibility", "hidden");
                    $("#step-4").show().css("visibility", "visible");

                    activePage--;

                    setTabs(activePage);

                    if (hidden) {
                        $(".stepFive").show();
                        hidden = false;
                    }
                }
            }

            //Submit functions
            function submitStep1() {
               
                $("#loadingscreen").show();

                if ($("#form1").valid()) {
                        setTimeout('window.location.replace("/en/online-access/sessionExpiration")', 3600000);
                        //need to look up the court number
                        if (shownCourt) {
                            //ajax the heading for all headings
                            $('.ajaxHeading').load("/onlineaccess/updateHeader", { lang: "False" });
                            //ajax the partyTable in
                            $('.ajaxNewPartyData').load("/onlineaccess/updatePartyData", { lang: "False" }, function () {
                                //rebind the onclick events
                                $("#addrow_Party").on("click", addParty);
                                $("#PartyList").on("click", ".ibtnDel", removePartyRow);

                                rowCount = $('#PartyList tr').length;
                                rowCount = rowCount - 2; //button and labels
                                processDataBaseTable();
                            });

                            $("#step-1").hide().css("visibility", "hidden");
                            $("#step-2").show().css("visibility", "visible");
                            $("#loadingscreen").hide();


                            activePage++;

                            setTabs(activePage);


                        }
                        else {
                            CourtNumberExist();
                            console.log('...looking up court case');
                            if (isValidCourt) {
                                //ajax in the new Court Data
                                $("#loadingscreen").hide();
                                $('.ajaxNewCourtData').load("/onlineaccess/updateCourtData", { pageLang: "False" });
                                shownCourt = true;
                            }
                            else {
                                console.log('Court Number not found');
                                $("#loadingscreen").hide();
                                $('#courtNumberNotFound').html("<font color = 'red'>The Court File Number you are searching for was not found. Please enter another Court File Number.</font>");

                            }
                        }
                    }
                    else {
                    console.log('not valid');
                    $("#loadingscreen").hide();
                    }
            }

            function submitStep2() {
                //$("#loadingscreen").show();
                var firstnames = document.getElementsByName("firstName[]");
                var lastnames = document.getElementsByName("lastName[]");

                for (var i = 0; i < firstnames.length; i++) {
                    if (firstnames[i].value.trim().length == 0) {
                        firstnames[i].value = "";
                    }
                }
                for (var i = 0; i < lastnames.length; i++) {
                    if (lastnames[i].value.trim().length == 0 && lastnames[i].readOnly == false) {
                        lastnames[i].value = "";
                    }
                }
                $('.new').each(function () {
                    $(this).rules("add", {
                        required: true
                    });
                });
                if ($("#form2").valid()) {


                    console.log('valid');

                    $("#step-2").hide().css("visibility", "hidden");
                    $("#step-3").show().css("visibility", "visible");
                    //$("#loadingscreen").hide();


                    activePage++;

                    setTabs(activePage);
                }
                //$("#loadingscreen").hide();
            }

            function submitStep3() {
               // alert(" in submitStep3");
                //$("#loadingscreen").show();
                //update the rules!
                $('.newer').each(function () {
                    $(this).rules("add", {
                        required: true
                    });
                });

                if ($("#form3").valid()) {
                    if (otherCounter > 0) { //need at least one document
                        if (areFilingPartiesAssigned()) {
                            if (sigsNeeded) {
                                if ($('#Signatures').prop('checked') == true) {  //check for signed if true then submit files
                                   
                                   // $("#loadingscreen").show();
                                    SubmitFiles();
                                   // $("#loadingscreen").hide();

                                    activePage++;

                                    setTabs(activePage);
                                }
                                else {
                                    console.log('need to check that box!');
                                    var x = "Please confirm that you agreed to keep signed copies";
                                    $("#loadingscreen").hide();
                                    alert(x);
                                }
                            }
                            else {
                               
                                $("#loadingscreen").show();
                                SubmitFiles();
                                $("#loadingscreen").hide();
                                activePage++;

                                setTabs(activePage);
                            }


                        }
                        else {
                            console.log('not valid a document is not assigned a filing party');
                            var x = "Please select the party.";
                            $("#loadingscreen").hide();
                            alert(x);
                        }
                    }
                    else {
                        console.log('not valid missing at least one document');
                        var x = "The filing must include at least one document.";
                        $("#loadingscreen").hide();
                        alert(x);
                    }
                }
                else {
                    console.log('not valid');
                    $("#loadingscreen").hide();

                }
            }

            function submitStep4() {
               // alert("submitStep 4");
                //$("#loadingscreen").show();

                var nodes = document.querySelectorAll("input[type=text]");

                for (var i = 0; i < nodes.length; i++) {
                    if (nodes[i].value.trim().length == 0) {
                        nodes[i].value = "";
                    }
                }
                //check urgency
                isUrgencyChecked();
                if ($("#form4").valid()) {

                    console.log('valid');

                    $("#step-4").hide().css("visibility", "hidden");
                    $("#step-5").show().css("visibility", "visible");

                    //$("#loadingscreen").hide();

                    activePage++;

                    setTabs(activePage);

                    Submit();
                }
                else {
                    console.log('not valid');
                    //$("#loadingscreen").hide();
                }
            }

            function submitStep5() {
                $('#loadingscreen').show();
                document.getElementById("Form5").submit();
                $(".stepFive").hide();
                hidden = true;
            }


            function SetupEvents() {

                $('#Back-Step-1').on("click", function (e) {
                    backStep1();
                });

                $('#Back-Step-2').on("click", function (e) {
                    e.preventDefault();
                    backStep2();
                });

                $('#Back-Step-3').on("click", function (e) {
                    e.preventDefault();
                    backStep3();
                });

                $('#Back-Step-4').on("click", function (e) {
                    e.preventDefault();
                    backStep4();
                });

                $('#Back-Step-5').on("click", function (e) {
                    e.preventDefault();
                    backStep5();
                });


                $("#form1").validate({
                    rules: {
                        userEnteredCourtNo: {
                            required: true
                        }
                    },
                    messages: {
                        userEnteredCourtNo: "<span style=\"color: red;\">&nbsp Court File Number is required.</span>",
                    }
                });
            }

            SetupEvents();

            function isUrgencyChecked() {
                if ($('#isUrgent').prop('checked')) {
                    $('#urgDesc').rules("add",
                        {
                            required: true,
                            messages: { required: "<span style=\"color: red;\">Urgency description is required.</span>" }
                        });
                    return true;
                }
                else {
                    $('#urgDesc').rules("remove");
                    return false;
                }
            }

            function areFilingPartiesAssigned() {
                var i = 0;
                var j = 0;
                //need at least one checked per row
                var retVal = false;
            var numParties = userDefinedParty.length;
                for (i = 0; i < otherCounter; i++) {
                    //check database
                    for (j = 0; j <= numParties; j++) {
                        if ($('#filer_' + i + '_' + j).prop('checked') == true) {
                            retVal = true;
                        }
                    }

                    ////check normal entries
                    //for (j = 0; j < numParties; j++) {
                    //    var y = (j + numParties + 1);
                    //    if ($('#filer_' + i + '_' + y).prop('checked') == true) {
                    //        retVal = true;
                    //    }
                    //}

                    if (retVal != true)
                        return false;
                    //reset for next roww
                    retVal = false;
                }
                return true;
            }


            $.validator.addMethod(
                "regex",
                function (value, element, regexp) {
                    var re = new RegExp(regexp);
                    return this.optional(element) || re.test(value);
                },
                ""
            );


            $("#form4").validate({
                onfocusout: false,
                invalidHandler: function (form, validator) {
                    var errors = validator.numberOfInvalids();
                    if (errors) {
                        validator.errorList[0].element.focus();
                    }
                },
                rules: {
                    firstName: {
                        required: true,
                    },
                    lastName: {
                        required: true,
                    },
                    phoneNumber: {
                        required: true,
                        regex: /^\(?([0-9]{3})\)?([ .-]?)([0-9]{3})\2([0-9]{4})$/,/* /^\\(?\d{3}\\)?-? *\\d{3}-? *-?\\d{4}$/*/
                    },
                    priEmail: {
                        required: true,
                        regex: /^(([0-9a-zA-ZÀ-ÿ]).*)@((([0-9a-zA-ZÀ-ÿ\-]){1,})((\.[A-Za-zÀ-ÿ0-9]{2,}){1,}))$/,
                    },
                    secEmail: {
                        required: false,
                        regex: /^(([0-9a-zA-ZÀ-ÿ]).*)@((([0-9a-zA-ZÀ-ÿ\-]){1,})((\.[A-Za-zÀ-ÿ0-9]{2,}){1,}))$/,
                    },
                    regOfficeDDL: {
                        required: true,
                    },
                    languageDDL: {
                        required: true,
                    },

                },
                messages: {
                    firstName: "<span style=\"color: red;\">Name is required.</span>",
                    lastName: "<span style=\"color: red;\">Name is required.</span>",
                    phoneNumber: {
                        regex: "<span style=\"color: red;\">Telephone Number must be of the following format 999-999-9999.</span>",
                        required: "<span style=\"color: red;\">Telephone Number is required.</span>",
                    },
                    priEmail: "<span style=\"color: red;\">A valid E-mail Address is required.</span>",
                    secEmail: "<span style=\"color: red;\">A valid E-mail Address is required.</span>",
                    regOfficeDDL: "<span style=\"color: red;\">A Registry Office is required.</span>",
                    languageDDL: "<span style=\"color: red;\">Language of communication with Registry is required.</span>",
                    
                    //postalCode: "<span style=\"color: red;\">Postal Code must be of the following format A9A 9A9</span>"
                }
            });

            $("#form2").validate(
                {
                    rules: {
                        firstName: {
                            required: true
                        },
                        lastName: {
                            required: true
                        },
                        partyType: {
                            required: true
                        },
                        partyRole: {
                            required: true
                        }

                    },
                    messages: {
                        firstName: "<span style=\"color: red;\">Name is required.</span>",
                        lastName: "<span style=\"color: red;\">Name is required.</span>",
                        partyType: "<span style=\"color: red;\">Party Details are required.</span>",
                        partyRole: "<span style=\"color: red;\">Party Role is required.</span>",
                    }
                });
            $("#form3").validate();
            $("#form4").validate();








            $("#Submit-Step-1").on("click", function (e) { //Proceeding Info
                e.preventDefault();
                submitStep1();
            });


            $("#Submit-Step-2").on("click", function (e) { //Party info
                e.preventDefault();
                submitStep2();
            });

            $("#Submit-Step-3").on("click", function (e) { //document info
                e.preventDefault();
                $('#loadingscreen').show();

                //do not remove timeout, or loading wheel will not load and it will look like the app has stopped!
                setTimeout(function () { submitStep3(); }, 250);
            });

            $("#Submit-Step-4").on("click", function (e) { //file info
                e.preventDefault();
                submitStep4();
            });

            $("#Submit-Step-5").on("click", function (e) { //document info
                e.preventDefault();
                submitStep5();
            });

            function SubmitFiles() {
               
                var valid = false;
                var x = 0;

                var fileData = new FormData();

                for (x = 0; x < otherCounter; x++) {
                    for (var i = 0; i < $("#file_" + x).get(0).files.length; i++)
                        fileData.append('userfiles[]', $("#file_" + x).get(0).files[i]);
                }

                $.ajax({
                    type: "POST",
                    url: "/onlineaccess/uploadFiles",
                    data: fileData,
                    async: false,
                    dataType: "json",
                    contentType: false,
                    processData: false,
                    error: function (result) {
                        $('#loadingscreen').hide();
                        var response = (result.responseText);
                        if (response != "") {
                            alert(response);
                            valid = false;
                        }
                        else { valid = true; }
                        if (valid) {
                            console.log('valid');
                            documentsValid = true;
                        }
                        else {
                            console.log('Document validation reported errors to user');
                        }
                    },
                    success: function (result) {
                        $('#loadingscreen').hide();
                        if (result == "sessionexpired") {
                            window.location.replace("/en/online-access/sessionExpiration");
                        }
                        else if (result != true) {
                            alert(result);
                            valid = false;
                        }
                        else { valid = true; }
                        if (valid) {
                            console.log('valid');
                            $("#step-3").hide().css("visibility", "hidden");
                            $("#step-4").show().css("visibility", "visible");
                        }
                        else {
                            console.log('Document upload reported errors to user');
                        }
                    }
                });

            }


            function getDataBilingualDictionary(database) {
                var dict = [];
                for (var i = 0; i < database.length; i++) {
                    dict[i] = database[i].englishLanguageText + "##" + database[i].frenchLanguageText;
                }


                return dict;

            }

            function findEnglishTranslation(array, word, isFrench) {
                for (var i = 0; i < array.length; i++) {
                    if (array[i].includes(word)) {
                        if (!isFrench) {
                            return array[i].split("##")[0];
                        }
                        return array[i].split("##")[1];
                    }

                }

            }

            function Submit() {
                //userdefineded Party was defined here
                $('#loadingscreen').show();

                createFileLists();
                userDefinedParty = [];
                createPartyLists();

                //allParties = [];
                //allParties.push(databaseDefinedParty, userDefinedParty);

                /*databaseDefinedParty.concat(userDefinedParty);*/


                var model2 = {

                    //form4
                    firstName: $('#firstName').val(),
                    lastName: $('#lastName').val(),
                    phoneNumber: $('#phoneNumber').val(),
                    priEmail: $('#priEmail').val(),
                    secEmail: $('#secEmail').val(),
                    languageDDL: $('#languageDDL  option:selected').text(),
                    languageDDLCode: $('#languageDDL').val(),
                    regOfficeDDL: $('#regOfficeDDL').val(),
                    isUrgent: $('#isUrgent').is(':checked'),
                    urgDesc: $('#urgDesc').val(),
                    city: $('#City').val(),

                };

                $.ajax({
                    url: "/onlineaccess/submitInternalOffice",
                    type: "POST",
                    dataType: "json",
                    async: false,
                    data: JSON.stringify({ iOfficeNo: $('#iOfficeNumber').val() }),
                    contentType: "application/json; charset=utf-8",
                });

                var postData = {
/*                    s2: allParties,*/
                    s2: userDefinedParty,
                    s3: fileList,
                    ued: model2,
                };

                $.ajax({
                    url: "/onlineaccess/ExistingSubmit",
                    type: "post",
                    data: JSON.stringify(postData),
                    async: false,
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        $('#loadingscreen').hide();
                        $('.ajaxMe').load("/onlineaccess/updateSummary", { lang: "False" });
                    }
                });

            } //end submit

            function createPartyLists() {
                //var i = 0;
                //for (i = 0; i < counter; i++) {
                //    var Party = {};
                //    Party.role = $('#PartyRole_' + i).val();
                //    Party.type = $('#PartyType_' + i).val();
                //    Party.firstName = $('#firstName_' + i).val();
                //    Party.lastName = $('#lastName_' + i).val();

                //    userDefinedParty.push(Party);
                //}
                var table = document.getElementById("PartyList").getElementsByTagName('tbody')[0];

                var size = table.rows.length;
                var i = 0;
                for (i = 0; i < size; i++) {
                    var Party = {};
                    Party.role = $('#PartyRole_' + i).val();
                    Party.type = $('#PartyType_' + i).val();

                    if ($('#PartyType_' + i).val() == "Other"){
                        Party.lastName = "";
                }
                else { Party.lastName = $('#lastName_' + i).val(); }

                    Party.firstName = $('#firstName_' + i).val();

                    userDefinedParty.push(Party);
                }
            }

            function createFileLists() {
                
                var i = 0;
                var j = 0;
                fileList = []; //clean start [back forward page movement was creating ghost entries]
                for (i = 0; i < otherCounter; i++) {
                    var docs = {};
                    var filingParties = [];
                    docs.documentType = findEnglishTranslation(DocumentTypeDataBase, $('#DocumentType_' + i + ' option:selected').text(), false); // $('#DocumentType_' + i).val();
                    docs.documentTypeFR = findEnglishTranslation(DocumentTypeDataBase, $('#DocumentType_' + i + ' option:selected').text(), true);
                    docs.documentLang = $('#DocumentLanguage_' + i).val();
                    docs.documentFileNameFromUpload = $('#file_' + i).val();

                    docs.documentHandling = $('#DocumentHandling_' + i).val();

                    //need to loop through list and find those check marks that are true

                    var numParties = userDefinedParty.length;
                    for (j = 0; j < numParties; j++) {
                        if ($('#filer_' + i + '_' + j).prop('checked')) {
                            var party = j;//userDefinedParty[j].firstName + ' ' + userDefinedParty[j].lastName;
                            filingParties.push(party);
                        }
                    }
                    docs.party = filingParties;
                    fileList.push(docs);
                }
            }

            function updateIndexes(table) {
                // get every tr element except the header
                table.find("tr:gt(0)").each(function (j, row) {
                    // get every input and select elements
                    $(row).find('input, select,textarea,span,label').each(function (k, input) {
                        // check whether the id-attribute is of type _[index]__
                        var id = input.id.match(/\d+/);
                        // if it is an element necessary for the ModelBinder => update the name attribute
                        if (id != null && id.length && id.length == 1) {
                            var attr = $(input).attr("id");

                            // replace the old index of the name attribute with the calculated index
                            var newName = attr.replace(attr.match(/\d+/), j);
                            $(input).attr("id", newName);
                            $(input).attr("name", newName);
                            $(input).attr("for", newName);
                        }
                    });
                });
            }

            function updatePartyIndexes(table) {
                // get every tr element except the header
                table.find("tr:gt(0)").each(function (j, row) {
                    // get every input and select elements
                    $(row).find('input, select,textarea,span').each(function (k, input) {
                        // check whether the id-attribute is of type _[index]__
                        var id = input.id.match(/\d+/);
                        // if it is an element necessary for the ModelBinder => update the name attribute
                        if (id != null && id.length && id.length == 1) {
                            var attr = $(input).attr("id");
                            // replace the old index of the name attribute with the calculated index
                            var newName = attr.replace(attr.match(/\d+/), j);
                            //var x = j - rowCount;
                            $(input).attr("id", newName);
                            $(input).attr("name", newName);
                        }
                    });
                });
            }

            //Ajaxing in Parties
            var counter = 0;
            var otherCounter = 0;

            //version with large, accessible checkboxes for WET theme
            function FilingPartyList(otherCounter) {
                userDefinedParty = [];
                createPartyLists();
                var x = 0;
                var retVal = '<div style="margin-top: -8px"><fieldset style="margin-top: -8px" class="checkbox gc-chckbxrdio"><legend><span class="accessibility">Filing Party</span><ul class="list-unstyled lst-spcd-1">';

                userDefinedParty.forEach(function (party, index, arr) {
                    retVal = retVal + '<li class="checkbox"><input type="checkbox" id="filer_' + otherCounter + "_" + index + '"> ' +
                        '<label id="filer_' + otherCounter + "_" + index + '" for="filer_' + otherCounter + "_" + index + '"> ' + party.firstName + ' ' + party.lastName + '</label></li>';
                });
                retVal = retVal + '</ul></fieldset></div>';
                return retVal;
            }

            $(document).ready(function () {
                $("#addrow").bind("click", function () {

                    //$("#loadingscreen").show();

                    var table = document.getElementById("docList").getElementsByTagName('tbody')[0];

                    var row = table.insertRow(table.rows.length);
                    var cell1 = row.insertCell(0);
                    var cell2 = row.insertCell(1);
                    var cell3 = row.insertCell(2);
                    var cell4 = row.insertCell(3);
                    var cell5 = row.insertCell(4);
                    var cell6 = row.insertCell(5);

                    cell1.innerHTML = '<select id="DocumentType_' + otherCounter + '" name="DocumentType_' + otherCounter + '" class="form-control form-control-sm newer" data-msg="Document Type is required." ></select><label id="DocumentType_' + otherCounter + '" for="DocumentType_' + otherCounter + '" class="visuallyhidden">Document Type</label>';

                    cell2.innerHTML = '<input type = "file"  id="file_' + otherCounter + '"name ="file_' + otherCounter + '" accept = "application/pdf" class="form-control form-control-sm newer" data-msg="Document Name is required."/><label id="file_' + otherCounter + '" for="file_' + otherCounter + '" class="visuallyhidden">Document Name</label>';


                    cell3.innerHTML = '<select id="DocumentLanguage_' + otherCounter + '" name="DocumentLanguage_' + otherCounter + '" class="form-control form-control-sm newer" data-msg="Document Language is required."></select><label id="DocumentLanguage_' + otherCounter + '" for="DocumentLanguage_' + otherCounter + '" class="visuallyhidden">Document Language</label>';

                    cell4.innerHTML = FilingPartyList(otherCounter);

                    cell5.innerHTML = '<textarea id="DocumentHandling_' + otherCounter + '" name="DocumentHandling_' + otherCounter + '" class="form-control form-control-sm" maxlength="255"></textarea><span class="countDown_' + otherCounter + '" id="countDown_' + otherCounter + '"></span><label id="DocumentHandling_' + otherCounter + '" for="DocumentHandling_' + otherCounter + '" class="visuallyhidden">Handling Instructions for the Submission</label>';

                    cell6.innerHTML = '<button id="' + otherCounter + '" class="btn btn-primary btn-sm delete" name="delete" type="button">Remove</button>';

                    $("#docList").append(row);
                    PopulateDocumentDropdowns(otherCounter);

                    //$("#loadingscreen").hide();

                    $("#file_" + otherCounter).on('change', function () {
                        var oFile = document.getElementById(this.id).files[0];
                        var x = $(this).attr('id').split("_");
                        var objtid = this.id;
                        var filelblobj = "filelbl_" + x[1];
                        var filename = this.value.replace(/C:\\fakepath\\/i, '');


                        if (oFile.size > 104857600) {
                            alert('Document must be less than 100Mb.');
                            $("#" + filelblobj).text("");
                            $("#" + objtid).val('');
                        }
                        else {
                            if (oFile.type != "application/pdf") {
                                alert('Document Type must be PDF');
                                $("#" + filelblobj).text("");
                                $("#" + objtid).val('');
                            }
                            else {

                                $('#loadingscreen').show();
                                var xhr = new XMLHttpRequest();
                                xhr.open('POST', '/onlineaccess/CheckPdfProtection');
                                xhr.setRequestHeader('Content-type', 'multipart/form-data');
                                //Appending file information in Http headers
                                xhr.setRequestHeader('X-File-Name', oFile.name);
                                xhr.setRequestHeader('X-File-Type', oFile.type);
                                xhr.setRequestHeader('X-File-Size', oFile.size);
                                //Sending file in XMLHttpRequest
                                xhr.send(oFile);
                                xhr.onreadystatechange = function () {
                                    if (xhr.readyState == 4 && xhr.status == 200) {
                                        //alert(xhr.responseText);
                                        if (xhr.responseText == "false") {
                                            $('#loadingscreen').hide();
                                            $("#" + filelblobj).text(filename);

                                        }
                                        else {
                                            $('#loadingscreen').hide();
                                            $("#" + filelblobj).text("");
                                            $("#" + objtid).val('');
                                            var x = "This PDF is protected, please add an unprotected PDF.";
                                            alert(x);

                                        }
                                    }
                                }
                            }
                        }
                    });

                    $('#DocumentHandling_' + otherCounter).keyup(function () {
                        var x = $(this).attr('id').split("_");
                        $('#countDown_' + x[1]).html("Characters remaining: " + (255 - $(this).val().length));
                    });

                    otherCounter++;
                });

                $("#docList").on("click", ".delete", function (event) {
                    $(this).closest("tr").remove();
                    updateIndexes($("#docList"));
                    otherCounter -= 1;
                });
            });


            function PopulateDocumentDropdowns(otherCounter) {

                DocumentType(otherCounter);
                DocumentLanguage(otherCounter);


                function DocumentLanguage(otherCounter) {
                    var DDL_Model = { lang: "False" };
                    var jsonToPost = JSON.stringify(DDL_Model);
                    $.ajax({
                        url: '/onlineaccess/buildLanguageDDL',
                        type: "POST",
                        data: jsonToPost,
                        contentType: "application/json; charset=utf-8",
                        success: function (result) {
                            var s = '<option value="">---Choose One---</option>';
                            for (var i = 0; i < result.length; i++) {
                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                            }
                            $("#DocumentLanguage_" + otherCounter).html(s);
                        }
                    })
                }

                function DocumentType(otherCounter) {
                    var DDL_Model = { lang: "False", proceedingType: $('#proceedingType').find(":selected").text() };
                    var jsonToPost = JSON.stringify(DDL_Model);
                    $.ajax({
                        url: '/onlineaccess/buildFCAExistingDocumentDDL',
                        type: "POST",
                        data: jsonToPost,
                        contentType: "application/json; charset=utf-8",
                        success: function (result) {

                            DocumentTypeDataBase = getDataBilingualDictionary(result);
                            var sENG = '<option value="">---Choose One---</option>';
                            var sFRN = '<option value="">---Choose One---</option>';
                            for (var i = 0; i < result.length; i++) {
                                sENG += '<option value="' + result[i].englishCode + '">' + result[i].englishLanguageText + '</option>';
                                sFRN += '<option value="' + result[i].englishCode + '">' + result[i].frenchLanguageText + '</option>';
                            }

                            if (DDL_Model.lang.toLowerCase().includes("f")) {
                                $("#DocumentType_" + otherCounter).html(sENG);

                            }
                            else {
                                $("#DocumentType_" + otherCounter).html(sFRN);
                            }
                            $("#DocumentType_" + otherCounter).on('change', function () {

                            });
                        }
                    })
                }

            }


            function addParty() {

                //$("#loadingscreen").show();

                var table = document.getElementById("PartyList").getElementsByTagName('tbody')[0];

                counter = table.rows.length;

                var row = table.insertRow(table.rows.length);
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);
                var cell4 = row.insertCell(3);
                var cell5 = row.insertCell(4);

                cell1.innerHTML = '<label for="PartyRole_' + counter + '" class="visuallyhidden">Party Role</label><select id="PartyRole_' + counter + '" name="PartyRole_' + counter + '" class="form-control form-control-sm new" data-msg="Party Role is required."></select>';

                cell2.innerHTML = '<label for="PartyType_' + counter + '" class="visuallyhidden">Party Details</label><select id="PartyType_' + counter + '" name="PartyType_' + counter + '" class="form-control form-control-sm new dropdowntarget" data-msg="Party Details are required."></select>';


                cell3.innerHTML = '<label for="firstName_' + counter + '" class="visuallyhidden">First Name/Company Name</label><input type="text" class="form-control form-control-sm new" id="firstName_' + counter + '" name="firstName[]" data-msg="Name is required." maxlength="39"/>';

                cell4.innerHTML = '<label for="lastName_' + counter + '" class="visuallyhidden">Last Name</label><input type="text" class="form-control form-control-sm new" id="lastName_' + counter + '" name="lastName[]" data-msg="Name is required." maxlength="39"/>';

                cell5.innerHTML = '<input type="button" class="btn btn-primary btn-sm ibtnDel" value="Remove"/>';



                $("#PartyList").append(row);
                PopulateDropdowns(counter);

                //$("#loadingscreen").hide();

                counter++;
            }

            //function removePartyRow(event) {
            //    $(this).closest("tr").remove();
            //    counter = counter - 1;
            //    updatePartyIndexes($("table.party-list"));
            //}
            function removePartyRow(event) {
                $(this).closest("tr").remove();
                updatePartyIndexes($("table.party-list"));
                counter--;
            }

            function RestrictDropDown(counter) {
                    //we know what row;
                    //find out what if other, selected remove rule off lastname or give it a whitespace value and lock it.
                    var x = $("#PartyType_" + counter).find('option:selected').text();
                if (x == "Other") {
                        /*$("#lastName_" + counter).removeAttr('required');*/
                        $("#lastName_" + counter).val(" ");
                        $("#lastName_" + counter).attr('readonly', true);
                        $("#firstName_" + counter).attr('maxlength', '39');
                    }
                    else
                    {
                        $("#lastName_" + counter).val("");
                        $("#lastName_" + counter).attr('readonly', false);
                        $("#firstName_" + counter).attr('maxlength', '39');
                    }

            }


            function PopulateDropdowns(counter) {

                PartyRoles(counter);
                PartyTypes(counter);

                function PartyRoles(counter) {
                     var DDL_Model = {

                        lang: "False"
                    };

                    var jsonToPost = JSON.stringify(DDL_Model);
                    $.ajax({
                        url: '/onlineaccess/buildFCAPartyRoleDDL',
                        type: "POST",
                        data: jsonToPost,
                        contentType: "application/json; charset=utf-8",
                        success: function (result) {
                            var s = '<option value="">---Choose One---</option>';
                            for (var i = 0; i < result.length; i++) {
                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                            }
                            $("#PartyRole_" + counter).html(s);
                        }
                    })
                }

                function PartyTypes(counter) {
                    var DDL_Model = { lang: "False"    };

                    var jsonToPost = JSON.stringify(DDL_Model);
                    $.ajax({
                        url: '/onlineaccess/buildPartyTypeDDL',
                        type: "POST",
                        data: jsonToPost,
                        contentType: "application/json; charset=utf-8",
                        success: function (result) {
                            var s = '<option value="">---Choose One---</option>';
                            for (var i = 0; i < result.length; i++) {
                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                            }
                            $("#PartyType_" + counter).html(s);
                            //$("#PartyType_" + counter).on('change', function () { RestrictDropDown(counter) });
                        }
                    })
                }



            }

            function GenerateTextBox()
            {
                var x = "Clicking \"Back\" Button resets page data.";
               return confirm(x);
            }

            function deleteFiles() {
                $.ajax({
                    url: '/onlineaccess/deleteAllFiles',
                    type: "post",
                    contentType: "application/json; charset=utf-8",
                });

            }

            function setTabs(activePage) {
                switch (activePage) {
                    case 1:
                        $("#step-1-tab").addClass("active");
                        $("#step-2-tab").removeClass("active");
                        $("#step-3-tab").removeClass("active");
                        $("#step-4-tab").removeClass("active");
                        $("#step-5-tab").removeClass("active");

                        $('.tablinks').prop('disabled', true);
                        $('.active').prop('disabled', false);
                        $("#step-2-tab").prop('disabled', false);

                        //helps control tab colouring via style tag
                        $("#step-1-tab").removeClass("clickable");
                        $("#step-2-tab").addClass("clickable");
                        $("#step-3-tab").removeClass("clickable");
                        $("#step-4-tab").removeClass("clickable");
                        $("#step-5-tab").removeClass("clickable");


                        break;

                    case 2:
                        $("#step-1-tab").removeClass("active");
                        $("#step-2-tab").addClass("active");
                        $("#step-3-tab").removeClass("active");
                        $("#step-4-tab").removeClass("active");
                        $("#step-5-tab").removeClass("active");

                        $('.tablinks').prop('disabled', true);
                        $('.active').prop('disabled', false);
                        $("#step-1-tab").prop('disabled', false);
                        $("#step-3-tab").prop('disabled', false);

                        $("#step-1-tab").addClass("clickable");
                        $("#step-2-tab").removeClass("clickable");
                        $("#step-3-tab").addClass("clickable");
                        $("#step-4-tab").removeClass("clickable");
                        $("#step-5-tab").removeClass("clickable");

                        break;

                    case 3:
                        $("#step-1-tab").removeClass("active");
                        $("#step-2-tab").removeClass("active");
                        $("#step-3-tab").addClass("active");
                        $("#step-4-tab").removeClass("active");
                        $("#step-5-tab").removeClass("active");

                        $('.tablinks').prop('disabled', true);
                        $('.active').prop('disabled', false);
                        $("#step-2-tab").prop('disabled', false);
                        $("#step-4-tab").prop('disabled', false);

                        $("#step-1-tab").removeClass("clickable");
                        $("#step-2-tab").addClass("clickable");
                        $("#step-3-tab").removeClass("clickable");
                        $("#step-4-tab").addClass("clickable");
                        $("#step-5-tab").removeClass("clickable");

                        break;

                    case 4:
                        $("#step-1-tab").removeClass("active");
                        $("#step-2-tab").removeClass("active");
                        $("#step-3-tab").removeClass("active");
                        $("#step-4-tab").addClass("active");
                        $("#step-5-tab").removeClass("active");

                        $('.tablinks').prop('disabled', true);
                        $('.active').prop('disabled', false);
                        $("#step-3-tab").prop('disabled', false);
                        $("#step-5-tab").prop('disabled', false);

                        $("#step-1-tab").removeClass("clickable");
                        $("#step-2-tab").removeClass("clickable");
                        $("#step-3-tab").addClass("clickable");
                        $("#step-4-tab").removeClass("clickable");
                        $("#step-5-tab").addClass("clickable");

                        break;

                    case 5:
                        $("#step-1-tab").removeClass("active");
                        $("#step-2-tab").removeClass("active");
                        $("#step-3-tab").removeClass("active");
                        $("#step-4-tab").removeClass("active");
                        $("#step-5-tab").addClass("active");

                        $('.tablinks').prop('disabled', true);
                        $('.active').prop('disabled', false);
                        $("#step-4-tab").prop('disabled', false);

                        $("#step-1-tab").removeClass("clickable");
                        $("#step-2-tab").removeClass("clickable");
                        $("#step-3-tab").removeClass("clickable");
                        $("#step-4-tab").addClass("clickable");
                        $("#step-5-tab").removeClass("clickable");

                        break;
                    //default:
                }

            }//end of setTabs()

            $(document).ready(function () {
                $("#step-1-tab").click(function () {

                    if (activePage == 2) {
                        backStep2();
                    }

                })

                $("#step-2-tab").click(function () {

                    if (activePage == 1) {
                        submitStep1();
                    }

                    else if (activePage == 3) {
                        backStep3();
                    }

                })

                $("#step-3-tab").click(function () {
                    if (activePage == 2) {
                        submitStep2();
                    }

                    else if (activePage == 4) {
                        backStep4();
                    }
                })

                $("#step-4-tab").click(function () {
                    if (activePage == 3) {
                        submitStep3();
                    }

                    else if (activePage == 5) {
                        backStep5();
                    }
                })

                $("#step-5-tab").click(function () {
                    if (activePage == 4) {
                        submitStep4();
                    }

                })
            });

            //Display characters remaining under urgency decription text area in step 4
            $('#urgDesc').keyup(function () {
                    $('#countDownUrg').html("Characters remaining: " + (255 - $(this).val().length));
            });

            //Disable urgency description when checkbox is not clicked
            $('#isUrgent').change(function () {
                var urgency = $('#isUrgent').prop('checked');
                if (urgency) {
                    $('#urgDesc').removeAttr('disabled');
                } else {
                    $('#urgDesc').attr('disabled', 'disabled');
                }
            });

        }); //end of Master function



    </script>


    <script>
        $(document).ready(function () {
            
        //    $('#loadingscreen').hide();
        });
    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('[data-toggle="tooltip"]').tooltip();

            $(".tooltip-top").tooltip({
                placement: 'top'
            });
            $(".tooltip-right").tooltip({
                placement: 'right'
            });
            $(".tooltip-bottom").tooltip({
                placement: 'bottom'
            });
            $(".tooltip-left").tooltip({
                placement: 'left'
            });

            
        });
    </script>

</body>