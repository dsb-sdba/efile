
<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">
    
    <meta name="viewport" content="initial-scale = 1.0,maximum-scale = 1.0" />
    <meta name="google-site-verification" content="CQVS3uzTnc6cdOiq2rWykU2bSVkYKhpV2PwCBtiLzz0" />
    <meta http-equiv="cache-control" content="max-age=0">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="-1">
    <meta http-equiv="pragma" content="no-cache">

    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Federal Court - Initiate New Proceeding</title>
    <meta name="description" content="" />
    <meta name="robots" content="all,follow" />

    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="https://efiling.fct-cf.gc.ca/content/vendors/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <!-- Google fonts - Roboto -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,500,700,300,100">
    <!-- owl carousel-->
    <link rel="stylesheet" href="https://efiling.fct-cf.gc.ca/content/vendors/owl.carousel/assets/owl.carousel.css">
    <link rel="stylesheet" href="https://efiling.fct-cf.gc.ca/content/vendors/owl.carousel/assets/owl.theme.default.css">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="https://efiling.fct-cf.gc.ca/content/css/base/style.gold.css" id="theme-stylesheet">
    <link href="https://efiling.fct-cf.gc.ca/Content/vendors/DataTables/DataTables-1.10.18/css/dataTables.bootstrap4.min.css" rel="stylesheet" />
    <link href="https://efiling.fct-cf.gc.ca/Content/vendors/DataTables/Buttons-1.5.4/css/buttons.bootstrap4.min.css" rel="stylesheet" />
    <link href="https://efiling.fct-cf.gc.ca/Content/vendors/DataTables/Buttons-1.5.4/css/buttons.dataTables.min.css" rel="stylesheet" />
    <link href="https://efiling.fct-cf.gc.ca/Content/vendors/DataTables/Responsive-2.2.2/css/responsive.bootstrap4.min.css" rel="stylesheet" />
    <link href="https://efiling.fct-cf.gc.ca/Content/vendors/bootstrap-datepicker/css/bootstrap-datepicker3.min.css" rel="stylesheet" />
    <link href="https://efiling.fct-cf.gc.ca/Content/vendors/DataTables/ColReorder-1.5.0/css/colReorder.bootstrap4.min.css" rel="stylesheet" />
    <!-- Favicon-->
    
    <link href="https://efiling.fct-cf.gc.ca/Content/css/timepicker/jquery.timeselector.css" rel="stylesheet" />

    <link rel="stylesheet" href="https://efiling.fct-cf.gc.ca/content/css/base/loading.css">

    <link rel="shortcut icon" href="https://efiling.fct-cf.gc.ca/content/img/base/favicon.ico">

    <link rel="stylesheet" type="text/css" href="https://efiling.fct-cf.gc.ca/content/css/base/ie.css" />

    

    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="https://efiling.fct-cf.gc.ca/content/css/base/custom.css">

    <!-- Tweaks for older IEs-->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="https://efiling.fct-cf.gc.ca/content/vendors/jquery/jquery.min.js"></script>

    <!--CSS stylesheets added as part of content edits-->
    <!--Custom styling for form hints, links, font size increase, etc.-->
    <link rel="stylesheet" href="customcss.css">
    <!-- New Font Awesome CSS (6) - for 'X' icon-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!--Script for cascading menu options-->
    <script>
        var subjectObject = {
            "Certificate (Excise Tax Act)": {
            "Excise Tax Act": ["Certificate - Excise Tax Act"]  
          },

          "Certificate (Income Tax Act/ITA)": {
            "ITA - Certificates": ["Certificate - Canada Pension Plan / Old Age Security Act", "Certificate - Employment Insurance Act", "Certificate - ITA"]  
          },

          "Federal Court": {
            "Aboriginal Law": ["Aboriginal Law (Crown v.)", "Aboriginal Law (v. Crown)", "Aboriginal Law (v. Crown) [Applications]", "S. 18.1 Application for Judicial Review (Aboriginal Law)", "Statutory Appeal (Aboriginal Law)", "Others - not provided for anywhere else (Aboriginal Law)"]
            "Access to information / privacy": ["Access to information", "Privacy / personal information protection and electronic documents"],
            "Admiralty": ["Aircraft (Admiralty)", "Bottomry bond (Admiralty)", "Cargo damage (Admiralty)", "Collision (Admiralty)", "...etc.", "Other actions (Admiralty)", "Other applications (Admiralty)"],   
            "...": ["The others would take the same pattern", "etc. etc."],
            "All others": ["This one goes at the bottom"]
          },
         
            "Federal Court Preliminary": {
            "Preliminary motion": ["Application for Leave (Preliminary)", "Extension of Time (Preliminary)"]
          },
          "Immigration": {
            "Non-refugee": ["Application for Leave and Judicial Review - Arising outside Canada (Immigration)", "Application for Leave and Judicial Review - IRB - Immigration Appeal Division (Immigration)", "Application for Leave and Judicial Review - IRB - Immigration Division (Immigration)", "Application for Leave and Judicial Review - Other arising inCanada (Immigration)"],
            "Refugee": ["Application for Leave and Judicial Review - IRB - Refugee Appeal Division (Immigration)", "Application for Leave and Judicial Review - IRB - Refugee Protection Division (Immigration)", "Application for Leave and Judicial Review - Pre-Removal Risk Assessment"],
            "Other": ["Certificate (Immigration)", "Reference - Section 18.3 (Immigration)", "Other non-leave proceedings (Immigration)"]
          }
        }
        window.onload = function() {
          var subjectSel = document.getElementById("subject");
          var topicSel = document.getElementById("topic");
          var chapterSel = document.getElementById("chapter");
          for (var x in subjectObject) {
            subjectSel.options[subjectSel.options.length] = new Option(x, x);
          }
          subjectSel.onchange = function() {
            //empty Chapters- and Topics- dropdowns
            chapterSel.length = 1;
            topicSel.length = 1;
            //display correct values
            for (var y in subjectObject[this.value]) {
              topicSel.options[topicSel.options.length] = new Option(y, y);
            }
          }
          topicSel.onchange = function() {
            //empty Chapters dropdown
            chapterSel.length = 1;
            //display correct values
            var z = subjectObject[subjectSel.value][this.value];
            for (var i = 0; i < z.length; i++) {
              chapterSel.options[chapterSel.options.length] = new Option(z[i], z[i]);
            }
          }
        }
        </script>

</head>
<body>
    <ul id="wb-tphp">
        <li class="wb-slc"><a class="wb-sl" href="#cont">Skip to main content</a></li>
        <li class="wb-slc visible-sm visible-md visible-lg"><a class="wb-sl" href="#info">Skip to "About this site"</a></li>
    </ul>

    

    <!-- navbar-->
    <header class="header mb-05">

        <div id="top">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-1 text-left d-none d-sm-block">
                        <ul class="menu list-inline mb-0">
                            <li class="list-inline-item">
                                <!-- Conditional browser compatibility message-->
                                <span style="color:whitesmoke;">
                                <nobr>
                                <script>
                                    if (window.navigator.userAgent.includes("Edg", "IE")) {
                                document.write("This site is best viewed with Google Chrome or Mozilla Firefox.");
                            }
                                </script>
                                </nobr>
                                </span>
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-11 text-right d-sm-block">
                        <ul class="menu list-inline mb-0">

                                <li class="list-inline-item">

                                    <a lang="fr"
                                       href="https://efiling.fct-cf.gc.ca/fr/acces-en-ligne/new-e-filing-start" id="lnkLanguageToggle">
                                        <button class="badge badge-light CharcoalText">
                                            Fran&#231;ais
                                        </button>
                                    </a>

                                </li>

                        </ul>
                    </div>
                </div>
            </div>
        </div>

        

    </header>


    <div id="all">
        <div id="content">
            <div class="container-fluid">

    </div>
</div>                <div class="row justify-content-center"><p id="demo"></p></div>
            </div>




<style>
    .error {
        color: red;
    }
    .custom-file-label::after {
        content: 'Browse' !important;
    }
</style>

<div class="container-fluid">
    <div class="row">
        
<div class="col-lg-12">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            
                    <li aria-current="page" class="breadcrumb-item">

                            <a href="https://efiling.fct-cf.gc.ca/en/online-access/e-filing-intro">E-Filing home</a>

                    </li>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
    <a href="https://www.fct-cf.gc.ca/Content/assets/pdf/base/2022-09-07-ENG-User-Guide-Online-Access.pdf" target="new"> User guide</a>
        </ol>
    </nav>
</div>

    </div>
</div>
<div class="container-fluid">
    <div class="row">

        <div class="col-lg-12">
            <div class="box">


                <ul class="nav nav-tabs flex-column flex-md-row nav-pills text-center" id="tablist" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link flex-sm-fill text-sm-center active" id="step-1-tab" href="#step-1"
                           role="tab" aria-controls="step-1" aria-selected="true">
                            <i class="fa-solid fa-gavel" aria-hidden="true"></i> 1. Case information
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link flex-sm-fill text-sm-center disabled" id="step-2-tab" href="#step-2" role="tab"
                           aria-controls="step-2" aria-selected="false">
                            <i class="fa fa-user-plus" aria-hidden="true"></i> 2. Add parties
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link flex-sm-fill text-sm-center disabled" id="step-3-tab" href="#step-3" role="tab"
                           aria-controls="step-3" aria-selected="false">
                            <i class="fa fa-file-text" aria-hidden="true"></i> 3: Add document(s)
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link flex-sm-fill text-sm-center disabled" id="step-3b-tab" href="#step-3b" role="tab"
                           aria-controls="step-3b" aria-selected="false">
                            <i class="fa fa-file-text" aria-hidden="true"></i> 3: Add document(s)
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link flex-sm-fill text-sm-center disabled" id="step-3c-tab" href="#step-3c" role="tab"
                           aria-controls="step-3c" aria-selected="false">
                            <i class="fa fa-file-text" aria-hidden="true"></i> 3: Add document(s)
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link flex-sm-fill text-sm-center disabled" id="step-4-tab" href="#step-4" role="tab"
                           aria-controls="step-4" aria-selected="false">
                            <i class="fa fa fa-envelope" aria-hidden="true"></i> 4: Contact information
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link flex-sm-fill text-sm-center disabled" id="step-5-tab" href="#step-5" role="tab"
                           aria-controls="step5" aria-selected="false">
                            <i class="fa-solid fa-square-check" aria-hidden="true"></i> 5: Review
                        </a>
                    </li>
                </ul>
                <div class="tab-content" id="TabContent">
                    <div class="tab-pane fade show active" id="step-1" role="tabpanel" aria-labelledby="step-1-tab">

                        <div class="row">
<form action="/en/online-access/new-e-filing-start" id="form1" method="post">
    <div class="col-lg-12">

        <div class="heading">
            <BR>
            <h3>1. Case information</h3><br />
            <p>Please complete the required information.</p>
            <p <color:red></color:red><p></p>
        </div>

        <div class="has-error" id="Test">
            <p><span class="field-validation-valid text-danger" data-valmsg-for="proceedingLang" data-valmsg-replace="true"></span></p>
            <p><span class="field-validation-valid text-danger" data-valmsg-for="proceedingType" data-valmsg-replace="true"></span></p>
            <p><span class="field-validation-valid text-danger" data-valmsg-for="proceedingSubject" data-valmsg-replace="true"></span></p>
            <p><span class="field-validation-valid text-danger" data-valmsg-for="proceedingNature" data-valmsg-replace="true"></span></p>
            <p><span class="field-validation-valid text-danger" data-valmsg-for="actionType" data-valmsg-replace="true"></span></p>
            <p><span class="field-validation-valid text-danger" data-valmsg-for="classAction" data-valmsg-replace="true"></span></p>
        </div>

            <div class="form-group">
                <label><strong>Proceeding language</strong> (required)</label><br />
             
                <select class="form-control" data-val="true" data-val-required="Please select the language" id="proceedingLang" name="proceedingLang" required="true"><option value="">---Choose One---</option>
<option>English</option>
<option>French</option>
</select>
</div>
            <div class="form-group" id="typeDropDown">
                <label><strong>Proceeding type</strong> (required)</label> <i class="fa fa-question-circle" type="button" style="color:#B79E6F;" alt="More information" data-toggle="modal" data-target="#hint-type"></i></a>
                <select class="form-control" data-val="true" data-val-required="Proceeding Type is required" id="proceedingType" name="proceedingType" required="true"><option value="">---Choose One---</option>
<option>Certificate (Excise Tax Act)</option>
<option>Certificate (ITA)</option>
<option>Federal Court</option>
<option>Federal Court Preliminary</option>
<option>Immigration</option>
</select>
            </div>

            <div class="form-group">
                <label><strong>Proceeding subject</strong> (required)</label> <i class="fa fa-question-circle" type="button" style="color:#B79E6F;" alt="More information" data-toggle="modal" data-target="#hint-subject"></i></a>
    
                <select class="form-control" data-val="true" data-val-required="Proceeding Subject is required" id="proceedingSubject" name="proceedingSubject" required="true"><option value="">---Choose One---</option>
</select>
            </div>
            <div class="form-group">
                <label><strong>Proceeding nature</strong> (required)</label> <i class="fa fa-question-circle" type="button" style="color:#B79E6F;" alt="More information" data-toggle="modal" data-target="#hint-nature"></i></a>
                <div class="hint"><p></p>
            
                <select class="form-control" data-val="true" data-val-required="Proceeding Nature is required" id="proceedingNature" name="proceedingNature" required="true"><option value="">---Choose One---</option>
</select>

 <!-- Hint modals -->
 <div class="modal fade" id="hint-type" tabindex="-1" role="dialog" aria-labelledby="Proceeding type" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="label-partyrole">Proceeding type</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>[Guidance for selecting the proceeding type goes here]
            </p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="hint-subject" tabindex="-1" role="dialog" aria-labelledby="Proceeding subject" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="label-partyrole">Proceeding subject</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>[Guidance for selecting the proceeding subject goes here]
            </p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="hint-nature" tabindex="-1" role="dialog" aria-labelledby="Proceeding nature" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="label-partyrole">Proceeding nature</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>[Guidance for selecting the proceeding nature goes here]
            </p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
            </div>
            <div class="ajaxMeRadioButtons">
                <div class="form-group">
                    <label><strong>Action Type</strong> (required)</label>
                    <select class="form-control" data-val="true" data-val-required="Action Type is required" id="actionType" name="actionType" required="true"><option value="">---Choose One---</option>
<option>Simplified</option>
<option>Ordinary</option>
</select>
                </div>
                
                
                <div class="form-group" id="classActionDropDown">
                    <label><strong>Proposed Class Action</strong> (required)</label>
                    <select class="form-control" data-val="true" data-val-required="Proposed Class Action is required" id="classAction" name="classAction" required="true"><option value="">---Choose One---</option>
<option value="Y">Yes</option>
<option value="N">No</option>
</select>
                </div>

                
            </div>
            <hr>

            <div class="heading">
                <p>If applicable, enter your internal office file number and/or identify the decision maker (lower court or tribunal) from which this appeal or application arises.</p>
            </div>
            <div class="row">
            <div class="col-4">
                <div class="form-group">
                    <label><strong><label for="Internal_Office_File_Number">Internal Office File Number</label></strong> (optional)</label>
                    <br />
                    <input class="form-control" id="iOfficeNo" name="iOfficeNo" type="text" value="" />
                </div>
            </div>
            <div class="col-4">
                <div class="form-group">
                    <label><strong><label for="Decision_Maker">Decision Maker</label></strong> (optional)</label>
                    <br />
                    <select class="form-control" id="DecisionMaker" name="DecisionMaker"><option value="">---Choose One---</option>
<option>Canada Border Services Agency</option>
<option>Canada Industrial Relations Board</option>
<option>Canada Pension Plan Investment Board</option>
<option>Canada Revenue Agency</option>
<option>Canadian Air Transport Security Authority</option>
<option>Canadian Artists and Producers Professional Relations Tribunal</option>
<option>Canadian Dairy Commission</option>
<option>Canadian Environmental Assessment Agency</option>
<option>Canadian Food Inspection Agency</option>
<option>Canadian Forces Grievance Board</option>
<option>Canadian Grain Commission</option>
<option>Canadian Human Rights Commission</option>
<option>Canadian Human Rights Tribunal</option>
<option>Canadian Intellectual Property Office</option>
<option>Canadian International Trade Tribunal</option>
<option>Canadian Nuclear Safety Commission</option>
<option>Canadian Radio-television and Telecommunications Commission</option>
<option>Canadian Security Intelligence Service</option>
<option>Canadian Transportation Agency</option>
<option>Canadian Wheat Board</option>
<option>Citizenship and Immigration Canada</option>
<option>Commissioner of Official Languages, Office of the</option>
<option>Commissioner of Review Tribunals (CPP/OAS), Office of the</option>
<option>Competition Bureau</option>
<option>Competition Tribunal</option>
<option>Copyright Board Canada</option>
<option>Correctional Service Canada</option>
<option>Immigration and Refugee Board</option>
<option>Immigration Visa Officer</option>
<option>Indian Claims Commission</option>
<option>National Energy Board</option>
<option>National Parole Board</option>
<option>Office of the Information Commissioner of Canada</option>
<option>Patented Medicine Prices Review Board</option>
<option>Pension Appeals Board</option>
<option>Privacy Commissioner of Canada</option>
<option>Public Sector Pension Investment Board</option>
<option>Public Service Commission Appeal Board</option>
<option>Public Service Commission of Canada</option>
<option>Public Service Staff Relations Board</option>
<option>RCMP External Review Committee</option>
<option>Transportation Appeal Tribunal of Canada</option>
<option>Transportation Safety Board of Canada</option>
<option>Veterans Review and Appeal Board Canada</option>
</select>
                </div>
             </div>
            <div class="col-5"></div>
         </div>
     </div>
 </div>
</div>
</div>
</div>
</div>

                                <div class="box-footer d-flex justify-content-end pull-right">

                                    <a type="button" class="btn btn-secondary" href="4-new-e-filing-start-addparty.html">
                                        Next
                                        <i class="fa fa-chevron-right"></i>
                                    </a>
                                </div>
                                <br>
                                <div class="box-footer">
                                    <div class="box">
                                <h4>Share your feedback</h4>
                                <p>Take 5 minutes to let us know about your experience. The survey will open in a new browser tab.</p>
                                <a href="https://forms.microsoft.com/r/1YCRBV91uf" target="new" type="button" class="btn btn-secondary">Start survey</a>
                            </div>
                            </div>
</form>
</div>
</div>
<!--
<form name="testform" id="testform" action="/en/online-access/new-e-filing-start">
    Proceeding type: <select name="subject" id="subject">
        <option value="" selected="selected">---Choose one---</option>
      </select>
      <br><br>
    Proceeding subject: <select name="topic" id="topic">
        <option value="" selected="selected">---Choose proceeding type first---</option>
      </select>
      <br><br>
    Proceeding nature: <select name="chapter" id="chapter">
        <option value="" selected="selected">---Choose proceeding subject first---</option>
      </select>  
    </form>
-->
                        </div>
                  <!--End pane-->
                
<!--Bottom footer-->
<div id="footer">
    <div class="container-fluid">
        <div class="row" id="info">
            <div class="col-md-4">
                <div class="row">
                    <div class="col-md-4"></div> <!-- this column empty -->
                    <div class="col-md-4">
                        <h4 class="mb-2">About the Court</h4>
                        <ul class="list-unstyled">
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/about-the-court/jurisdiction#cont">
                                    Jurisdiction
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/about-the-court/Careers#cont">
                                    Careers
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/about-the-court/liaison-committees#cont">
                                    Liaison Committees
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/about-the-court/reports-and-statistics#cont">
                                    Reports and Statistics
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-4">
                        <h4 class="mb-2">Law and Practice</h4>
                        <ul class="list-unstyled">
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/law-and-practice/acts-and-rules#cont">
                                    Acts and Rules
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/representing-yourself/practice-guides#cont">
                                    Practice Guides
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/representing-yourself/procedural-charts#cont">
                                    Procedural Charts
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/representing-yourself/procedural-roadmaps#cont">
                                    Procedural Roadmaps
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/law-and-practice/court-costs#cont">
                                    Court Costs
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/representing-yourself/deadlines-calculator#cont">
                                    Deadlines Calculator
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/representing-yourself/checklists#cont">
                                    Checklists
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="col-md-8">
                <div class="row">
                    <div class="col-md-2">
                        <h4 class="mb-2">Online Access</h4>
                        <ul class="list-unstyled">
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/online-access/forms">
                                    Forms
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/online-access/e-filing-intro">
                                    E-Filing
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://fct-u/en/online-access/e-motion">
                                    E-Motion
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://fct-u/en/online-access/e-order">
                                    E-Order
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-2">
                        <h4 class="mb-2">Representing Yourself</h4>
                        <ul class="list-unstyled">
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/representing-yourself/finding-legal-help#cont">
                                    Finding Legal Help 
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/representing-yourself/practice-guides#cont">
                                    Practice Guides
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/representing-yourself/procedural-charts#cont">
                                    Procedural Charts
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/representing-yourself/procedural-roadmaps#cont">
                                    Procedural Roadmaps
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/representing-yourself/checklists#cont">
                                    Checklists
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/law-and-practice/court-costs#cont">
                                    Court Costs
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/representing-yourself/deadlines-calculator#cont">
                                    Deadlines Calculator
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/representing-yourself/resolving-your-case#cont">
                                    Resolving Your Case
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/representing-yourself/registry#cont">
                                    Registry
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-2">
                        <h4 class="mb-2">Court Files and Decisions</h4>
                        <ul class="list-unstyled">

                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/court-files-and-decisions/court-files#cont">
                                    Court Files
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://decisions.fct-cf.gc.ca/fc-cf/en/d/s/index.do?col=54">
                                    Decisions
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/court-files-and-decisions/hearing-lists#cont">
                                    Hearing Lists
                                </a>   
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/court-files-and-decisions/hearings/general-sittings#cont">
                                    General Sittings
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/court-files-and-decisions/hearings/summer-recess#cont">
                                    Summer Recess
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/court-files-and-decisions/hearings-calendar#cont">
                                    Calendar of Hearings
                                </a>
                            </li>

                        </ul>
                    </div>
                    <div class="col-md-2">
                        <h4 class="mb-2">Media</h4>
                        <ul class="list-unstyled">
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/media/administration-of-the-court#cont">
                                    Administration of the Court
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/court-files-and-decisions/court-files#cont">
                                    Court Files
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="footerlink" href="https://decisions.fct-cf.gc.ca/fc-cf/en/d/s/index.do?col=54">
                                    Decisions
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/court-files-and-decisions/hearings-calendar#cont">
                                    Calendar of Hearings
                                </a>
                            </li>
                        </li>
                        <li class="nav-item">
                            <a class="footerlink" href="https://twitter.com/FedCourt_CAN_en">
                            X/Twitter
                                <i class="fa-brands fa-square-x-twitter"></i>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="footerlink" href="https://www.youtube.com/channel/UCQ24-5tXhkQXTg9sMCEkuWg" title="YouTube" rel="external" target="_blank">
                                YouTube
                                <i class="fab fa-youtube"></i>
                        </a>
                    </li>
                        </ul>
                    </div>
                    <div class="col-md-2">
                        <h4 class="mb-2">
                            Resources
                        </h4>
                        <ul class="list-unstyled">
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/representing-yourself/registry#cont">
                                    Registry
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages//law-and-practice/court-costs#cont">
                                    Court Costs
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/representing-yourself/procedural-charts#cont">
                                    Procedural Charts
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/representing-yourself/procedural-roadmaps#cont">
                                    Procedural Roadmaps
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/representing-yourself/resolving-your-case#cont">
                                    Resolving Your Case
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/representing-yourself/finding-legal-help#cont">
                                    Finding Legal Help 
                                </a>
                            </li>
                            <li>
                                <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/representing-yourself/checklists#cont">
                                    Checklists
                                </a>
                            </li>

                        </ul>
                    </div>
                    <div class="col-md-2"></div> <!-- this column empty -->
                </div>
            </div>
        </div>
    </div>
</div>

    
<div id="copyright">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <p class="text-center">
                    <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/important-notices">
                        Important Notices
                    </a>
                    |
                    <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/disclaimer">
                        Disclaimer
                    </a>
                    |
                    <a class="footerlink" href="https://www.fct-cf.gc.ca/en/pages/representing-yourself/contact-us">
                        Contact Us
                    </a>
                    |
                    <a class="footerlink" href="https://www.fct-cf.gc.ca/en/home/feedback">
                        Feedback
                    </a>
                </p>
            </div>
        </div>
    </div>
</div>


    <!-- JavaScript files-->

    <script src="https://efiling.fct-cf.gc.ca/content/vendors/popper.js/umd/popper.min.js"></script>
    <script src="https://efiling.fct-cf.gc.ca/content/vendors/bootstrap/js/bootstrap.min.js"></script>
    
    <script src="https://efiling.fct-cf.gc.ca/Content/vendors/js-cookie/js.cookie.js"></script>
    <script src="https://efiling.fct-cf.gc.ca/content/vendors/owl.carousel/owl.carousel.min.js"></script>
    <script src="https://efiling.fct-cf.gc.ca/content/vendors/owl.carousel2.thumbs/owl.carousel2.thumbs.js"></script>
    
<script src="https://efiling.fct-cf.gc.ca/Scripts/jquery.validate.js"></script>
    
    <script src="https://efiling.fct-cf.gc.ca/Content/vendors/jquery/jquery.unobtrusive-ajax.js"></script>

    <script src="https://efiling.fct-cf.gc.ca/Content/vendors/moment/min/moment-with-locales.min.js"></script>

    <script src="https://efiling.fct-cf.gc.ca/Content/js/base/js.js"></script>
    <script src="https://efiling.fct-cf.gc.ca/Content/js/base/utils.js"></script>
    <script src="https://efiling.fct-cf.gc.ca/Content/js/base/data.js"></script>

    
    
    <script src="https://efiling.fct-cf.gc.ca/Content/js/timepicker/jquery.timeselector.js"></script>

    
    <script src="https://efiling.fct-cf.gc.ca/Content/vendors/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="https://efiling.fct-cf.gc.ca/Content/vendors/bootstrap/js/bootstrap.bundle.js"></script>


    <script>
        



        $(function () {

            //used to control navigation for OnlineAccess
            var OnlineAccess = false;
            var listOfOnlineAccessDocs = [];
            //determines which pathway will be followed for navigation - controlled by Validate3B()
            var pathway = 0;
            var exemptionParty = "";

            var hidden = false;
            var sigsNeeded = false;
            var tablistelement = document.getElementById("tablist");
            $('.ajaxSignatures').hide();
            $("#Signatures").prop('checked', false);
            $(".ajaxMeRadioButtons").hide();

            //ensure additional step 3b and step 3c tabs are hidden at start
            $("#step-3b-tab").hide();
            $("#step-3c-tab").hide();

            function SetupEvents() {

                $('#Back-Step-2').on("click", function (e) {
                    e.preventDefault();
                    if (GenerateTextBox()) {
                        $(".ajaxMeRadioButtons").hide();
                        //userDefinedParty = []; //reset our lists
                        //counter = 0;
                        isValidSoc = false;
                        //clean up tables; remove all numbered rows
                       // $("#PartyList  tbody").empty();
                        $('#tablist a[href="#step-1"]').tab('show');
                        //document.getElementById("addrow_Party").style.visibility = "hidden";
                    }
                });

                $('#Back-Step-3').on("click", function (e) {
                    e.preventDefault();
                    if (GenerateTextBox()) {
                        fileList = [];
                        isValidSoc = false;
                        otherCounter = 0;
                        //clean up tables; remove all numbered rows
                        $("#docList tbody").empty();
                        deleteFiles();

                        userDefinedParty = [];//prevent double scrapping

                        if (sigsNeeded)
                        {
                            $('.ajaxSignatures').hide();
                            $("#Signatures").prop('checked', false);
                        }
                        sigsNeeded = false;
                        $('#tablist a[href="#step-2"]').tab('show');
                    }
                });

                $('#Back-Step-3b').on("click", function (e) {
                    e.preventDefault();
                    if (GenerateTextBox()) {
                        $("#documentList3b").empty();
                    }


                    $('#step-3b-tab').hide();
                    $('#step-3-tab').show();
                    $('#step-3-tab').removeClass("disabled");
                    $('#tablist a[href="#step-3"]').tab('show');
                });

                $('#Back-Step-3c').on("click", function (e) {
                    e.preventDefault();
                    if (GenerateTextBox()) {

                        //clear fields
                        $("#exemptionDocNames").html("");
                        $("#exemptionFile").val('');
                        $("#exemptionDocumentLanguage").selectedIndex = 0;

                    }


                    $('#step-3c-tab').hide();
                    $('#step-3b-tab').show();
                    $('#step-3b-tab').removeClass("disabled");
                    $('#tablist a[href="#step-3b"]').tab('show');
                });

                $('#Back-Step-4').on("click", function (e) {

                    e.preventDefault();
                    if (GenerateTextBox()) {
                        deleteFiles();

                        if (OnlineAccess && pathway == 2) {
                            $('#tablist a[href="#step-3c"]').tab('show');
                        }
                        else {
                            $("#documentList3b").empty();
                            $('#tablist a[href="#step-3"]').tab('show');
                        }

                    }
                });

                $('#Back-Step-5').on("click", function (e) {
                    e.preventDefault();
                    if (GenerateTextBox()) {
                        $('#tablist a[href="#step-4"]').tab('show');
                        if (hidden)
                        {
                           // $(".stepFiveA").appendTo("<div class='stepFive'><button type='button' class='btn btn-primary' id='Submit-Step-5'>Continue<i class='fa fa-chevron-right'></i></button><div>");
                            $('.stepFive').show();
                            hidden = false;
                        }
                    }
                });

            }



            function generateStyleOfCause() {
                //ajax post the party names, and party roles
                //if the return is null or false we are not valid

                createPartyLists();

                $.ajax({
                    type: "POST",
                    url: '/onlineaccess/ValiStyleOfCauseConfirmationdSoc',
                    dataType: "json",
                    async: false,
                    data: JSON.stringify({ lop: userDefinedParty, lang: "False" }),
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        isValidSoc = result;
                        userDefinedParty = []; //reset the array
                    },
                    fail: function (result) {
                            isValidSoc = result;
                            userDefinedParty = []; //reset the array
                    }

                });
            }

            function areSignaturesNeeded(othercounter) {

                var model = {
                    value: $('#DocumentType_' + othercounter).find('option:selected').val()
                };

                $.ajax({
                    type: "POST",
                    url: '/onlineaccess/getSignatures',
                    dataType: "json",
                    async: false,
                    data: JSON.stringify(model),
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        sigsNeeded = sigsNeeded || result;
                    }
                });
            }

            function updateAllSignatures() {

                var i = 0;
                var dTypes = [];
                for (i = 0; i < otherCounter; i++)
                {
                    dTypes.push($('#DocumentType_' + i).find('option:selected').text());

                }


                $.ajax({
                    type: "POST",
                    url: '/onlineaccess/areSignaturesStillNeeded',
                    dataType: "json",
                    async: false,
                    data: JSON.stringify({ lod: dTypes }),
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        sigsNeeded = result;
                        if (!sigsNeeded) {
                            $('.ajaxSignatures').hide();
                            $("#Signatures").prop('checked', false);
                        }
                        else
                            $('.ajaxSignatures').show();
                    }
                });

            }



            SetupEvents();

            function isUrgencyChecked() {
                if ($('#isUrgent').prop('checked')) {
                    $('#urgDesc').rules("add",
                        {
                        required: true,
                        messages: { required: "<span style=\"color: red;\">Urgency description required</span>" }
                        });
                    return true;
                }
                else {
                    $('#urgDesc').rules("remove");
                    return false;
                }
            }


            function areFilingPartiesAssigned() {

                 var retVal = false;
                //var _partychkbox = $("[id^='filer_']");

                //var _listlength = _partychkbox.length;
                var _partylist = $("#PartyList  tbody tr");
                var _listlength = _partylist.length;

                //for (var i = 0; i < _listlength; i++) {
                //    var id = _partychkbox[i].id;
                //    if ($('#' + id).prop('checked') == true) {
                //        retVal = true;
                //    }

                //}




                var i = 0;
                var j = 0;
                //need at least one checked per row
                var retVal = false;
                for (i = 0; i < otherCounter; i++) {
                    for (j = 0; j < _listlength; j++) {
                        if ($('#filer_' + i + '_' + j).prop('checked') == true) {
                            retVal = true;

                            //set the exemption file party to the first one checked. We need some sort of default value for this document,
                            //and there is no input for the party on 3C
                            if (exemptionParty == "") {
                                exemptionParty = $('#filer_' + i + '_' + j).parent().text();
                            }
                        }
                    }
                    if (retVal != true)
                        return false;
                    //reset for next roww
                    retVal = false;
                }
                return true;

                //return retVal;
            }

            var userDefinedParty = []; //elements from party form
            var fileList = [];  //elements from documents form
            var isValidSoc = false;

            var filesAreValid = false;

            $('#proceedingType').on('change', function () {

                //clear subject and nature
                $("#proceedingSubject").empty();
                $("#proceedingNature").empty();
                var s = '<option value="">---Choose One---</option>';
                $("#proceedingNature").html(s);

                PopulateProceedingSubjectDropDown()
            });

            $('.error').each(function () {

                $(this).css('color','red');
            });

            $('#isUrgent').change(function () {
                var urgency = $('#isUrgent').prop('checked');

                if (urgency) {
                    $('#urgDesc').removeAttr('disabled');
                } else {
                    $('#urgDesc').attr('disabled', 'disabled');
                    $('#urgDesc').val('');
                }
            });

            $(document).keypress(function (e) {
                var code = (e.keyCode || e.which);
                if (code == 60 || code == 62 || code == 59)
                {   //           console.log("We got it");
                   e.preventDefault();
                }
            });

            $(document).on('change', '.partymain', function () {
           /* $('#PartyRole_0').on('change', function () {*/
                var selectedValue = $(this).val();

                var _partylist = $("[name^='PartyRole_']");
                var _listlength = _partylist.length;

                for (var i = 0; i < _listlength; i++) {


                        var name = _partylist[i].name;
                        //var elementExists = document.getElementsByName("PartyRole_" + i);
                        //if (elementExists != null) {
                        if (name != "PartyRole_0") {
                           PopulateDropdownSelected(name);
                        }
                        //    PopulateDropdowns(i);

                        }
                    //}

            });


            $(document).on('change', '.dropdowntarget', function () {
                var element = this;
                var id = element.name.match(/\d+/);
                    RestrictDropDown(id[0]);

            });



            $(document).on('change', '.partytypedropdown', function () {
                var element = this;
                var id = element.name.match(/\d+/);
                //RestrictDropDown(id[0]);

            });
                $("#form1").validate({
                rules: {
                    proceedingLang: {
                        required: true
                    },
                    proceedingType: {
                        required: true
                    },
                    proceedingSubject: {
                        required: true
                    },
                    proceedingNature: {
                        required: true
                    },
                    actionType: {
                        required: true
                    },
                    classAction: {
                        required: true
                    }

                },
                messages: {
                    proceedingLang: "<span style=\"color: red;\">Please select the language</span>",
                    proceedingType: "<span style=\"color: red;\">Proceeding Type is required</span>",
                    proceedingSubject: "<span style=\"color: red;\">Proceeding Subject is required</span>",
                    proceedingNature: "<span style=\"color: red;\">Proceeding Nature is required</span>",
                    actionType: "<span style=\"color: red;\">Action Type is required</span>",
                    classAction: "<span style=\"color: red;\">Proposed Class Action is required</span>",
                }
            });

            $.validator.addMethod(
                "regex",
                function (value, element, regexp) {
                    var re = new RegExp(regexp);
                    return this.optional(element) || re.test(value);
                },
                ""
            );
            $("#form4").validate({
                rules: {
                    firstName: {
                        required: true,
                    },
                    lastName: {
                        required: true,
                    },
                    phoneNumber: {
                        required: true,
                        regex: /^\(?([0-9]{3})\)?([ .-]?)([0-9]{3})\2([0-9]{4})$/,/* /^\\(?\d{3}\\)?-? *\\d{3}-? *-?\\d{4}$/*/
                    },
                    priEmail: {
                        required: true,
                        regex: /^(([0-9a-zA-ZÀ-ÿ]).*)@((([0-9a-zA-ZÀ-ÿ\-]){1,})((\.[A-Za-zÀ-ÿ0-9]{2,}){1,}))$/,
                    },
                    secEmail: {
                        required: false,
                        regex: /^(([0-9a-zA-ZÀ-ÿ]).*)@((([0-9a-zA-ZÀ-ÿ\-]){1,})((\.[A-Za-zÀ-ÿ0-9]{2,}){1,}))$/,
                    },
                   regOfficeDDL: {
                        required: true,
                    },
                    regOfficeDDL: {
                        required: true,
                    },
                    languageDDL: {
                        required: true,
                    },
                    provinceDDL: {
                        required: false,
                    },
                    postalCode: {
                        required: false,
                        regex: /^[aA-zZ]{1}[0-9]{1}[aA-zZ]{1}\s?[0-9]{1}[aA-zZ]{1}[0-9]{1}$/,
                    },


                },
                messages: {
                    firstName: "<span style=\"color: red;\">Filing party first name is required</span>",
                    lastName: "<span style=\"color: red;\">Filing party last name is required.</span>",
                    phoneNumber: {
                        regex: "<span style=\"color: red;\">Filing party phone number must be of the following format 999-999-9999</span>",
                        required: "<span style=\"color: red;\">Filing party phone number is required.</span>",
                    },
                     priEmail: {
                        required: "<span style=\"color: red;\">Filing party primary email is required.</span>",
                        email: "<span style=\"color: red;\">Not a valid Email Address</span>"
                    },
                    secEmail: {
                        email: "<span style=\"color: red;\">Not a valid Email Address</span>"
                    },
                    regOfficeDDL: "<span style=\"color: red;\">The registry office is required.</span>",
                    languageDDL: "<span style=\"color: red;\">Language of communication with Registry is required</span>",
                    
                    postalCode: "<span style=\"color: red;\">Postal Code must be of the following format A9A 9A9</span>"
                }
            });

            $("#form2").validate(
                {
                    rules: {
                        firstName: {
                            required: true
                        },
                        lastName: {
                            required: true
                        },
                        partyType: {
                            required: true
                        },
                        partyRole: {
                            required: true
                        }

                    },
                    messages: {
                        firstName: "<span style=\"color: red;\">Filing party first name is required</span>",
                        lastName: "<span style=\"color: red;\">Filing party last name is required.</span>",
                        partyType: "<span style=\"color: red;\">Select One: Individual/Other</span>",
                        partyRole: "<span style=\"color: red;\">Party Role is required</span>",
                    }
                });
            $("#form3").validate();

            $("#form3c").validate(
            {
                    rules: {
                        exemptionFile: {
                            required: true
                        },
                        exemptionDocumentLanguage: {
                            required: true
                        }

                    },
                    messages: {
                        exemptionFile: "</br><span style=\"color: red;\">Please select a document to add to the filing.</span>",
                        exemptionDocumentLanguage: "<span style=\"color: red;\">Please select the document language.</span>",
                    }
                });

            $("#Submit-Step-1").on("click", function (e) { //Proceeding Info
                e.preventDefault();
                var _partylist = $("#PartyList  tbody tr");
                var _listlength = _partylist.length;
                if ($("#form1").valid()) {
                     //set session timeout
                    setTimeout('window.location.replace("/en/online-access/sessionExpiration")', 3600000);
                    console.log('valid');

                    //stepOneSubmit();

                    $('#step-2-tab').removeClass("disabled");
                    $('#tablist a[href="#step-2"]').tab('show');
                    //PopulateDropdownMain();
                    //if ($("#PartyRoleMain").val() == null) {
                    //    document.getElementById("addrow_Party").style.visibility = "hidden";
                    //}

                } else {
                    console.log('not valid');
               }
            });

            $("#Submit-Step-2").on("click", function (e) { //Party info
                e.preventDefault();
                tablistelement.scrollIntoView();
                var firstnames = document.getElementsByName("firstName[]");
                var lastnames = document.getElementsByName("lastName[]");

                for (var i = 0; i < firstnames.length; i++)
                {
                    if (firstnames[i].value.trim().length == 0)
                    {
                        firstnames[i].value = "";
                    }
                }
                for (var i = 0; i < lastnames.length; i++) {
                    if (lastnames[i].value.trim().length == 0 && lastnames[i].readOnly == false) {
                        lastnames[i].value = "";
                    }
                }


                $('.new').each(function () {

                    $(this).rules("add", {
                        required: true
                    });

                });


                if ($("#form2").valid()) {
                    if (counter >=1) { //need at least one party
                        generateStyleOfCause();
                        if (isValidSoc) {
                            console.log('valid');

                            $('#step-3-tab').removeClass("disabled");
                            $('#tablist a[href="#step-3"]').tab('show');
                        }
                        else {
                            console.log('not valid a Style Of Cause');
                            var x = "You must enter a minimum of two opposing parties for an initial filing, for example:\nIn an action, the Plaintiff(s) and the Defendant(s)\nIn an application, the Applicant(s) and the Respondent(s)\nIn an appeal, the Appellant(s) and the Respondent(s)";
                            alert(x);
                        }
                    }
                    else {
                        console.log('not valid missing at least one party');
                        var x = "You must enter a minimum of two opposing parties for an initial filing, for example:\nIn an action, the Plaintiff(s) and the Defendant(s)\nIn an application, the Applicant(s) and the Respondent(s)\nIn an appeal, the Appellant(s) and the Respondent(s)";
                        alert(x);
                    }

                } else {
                    console.log('not valid');
                }
            });

             $("#Submit-Step-3").on("click", function (e) { //document info
                 e.preventDefault();

                $('.newer').each(function () {
                    $(this).rules("add", {
                        required: true
                    });
                });

                if ($("#form3").valid()) {
                    if (otherCounter > 0) { //need at least one document
                        if (areFilingPartiesAssigned()) {
                            if (sigsNeeded) {
                                if ($('#Signatures').prop('checked') == true) {   //check for signed if true then submit files

                                    OnlineAccessCriteriaMet();

                                    if (OnlineAccess == true) {
                                        Step3b(); //move to step 3b
                                    } else {
                                        Step4();
                                        //move to step 4

                                    }
                                }
                                else {
                                    console.log('need to check that box!');
                                    var x = "Please confirm that you agreed to keep signed copies";
                                    alert(x);
                                }
                            }
                            else {
                                OnlineAccessCriteriaMet();
                                if (OnlineAccess == true) {
                                    Step3b();
                                } else {
                                    Step4();
                                }
                            }

                        }
                        else {
                            console.log('not valid a document is not assigned a filing party');
                            var x = "Filing Parties are required";
                            alert(x);
                        }
                    }
                    else {
                        console.log('not valid missing at least one document');
                        var x = "The filing must include at least one document.";
                        alert(x);
                    }
                    tablistelement.scrollIntoView();
                }
                else {
                    console.log('not valid');

                }
            });

            //To go to Step 3b
            function Step3b() {

                $('#step-3-tab').hide();
                $('#step-3b-tab').show();
                $('#step-3b-tab').removeClass("disabled");
                $('#tablist a[href="#step-3b"]').tab('show');
                $('#datatable3b').show();
            }


            $("#Submit-Step-3b").on("click", function (e) {
                e.preventDefault();

                validate3B();

                //if 3b is valid and use requested exemption, go to 3C
                if (pathway == 2) {

                    $('#step-3b-tab').hide();
                    $('#step-3c-tab').show();
                    $('#step-3c-tab').removeClass("disabled");
                    $('#tablist a[href="#step-3c"]').tab('show');

                    Populate3C();
                }

                //go to step 4 instead of 3C if there is no request for exemption
                else if (pathway == 3) {

                    Step4();
                }

            });

            $("#Submit-Step-3c").on("click", function (e) { //document info

                //FC wanted this extra error message alert
                if ((document.getElementById('exemptionFile').value == '') && (document.getElementById('exemptionDocumentLanguage').selectedIndex == 0)) {
                    alert("You must provide a document in support of your request for exemption.");
                }

                //check if the form is valid - ensure they have filled out the fields
                if ($("#form3c").valid()) {
                    //go to step 4
                    Step4();
                }
            });


            $("#Submit-Step-4").on("click", function (e) { //file info
                e.preventDefault();
                tablistelement.scrollIntoView();

                var nodes = document.querySelectorAll("input[type=text]");

                for (var i = 0; i < nodes.length; i++) {
                    if (nodes[i].value.trim().length == 0) {
                        nodes[i].value = "";
                    }
                }


                //check urgency
                isUrgencyChecked();
                if ($("#form4").valid()) {

                    console.log('valid');
                    $('#step-5-tab').removeClass("disabled");
                    $('#tablist a[href="#step-5"]').tab('show');
                    Submit();
                    tablistelement.scrollIntoView();
                }
                else {
                    console.log('not valid');
                }
            });

            $("#Submit-Step-5").on("click", function (e) { //document info
                e.preventDefault();
                $('.ajaxMe').load("/onlineaccess/updateSubmission", { lang: "False" });
                $(".stepFive").hide();
                hidden = true;
                tablistelement.scrollIntoView();
            });

            function SubmitFiles()
            {
                var valid = false;
                var x = 0;

                var fileData = new FormData();

                for (x = 0; x < otherCounter; x++) {
                    for (var i = 0; i < $("#file_" + x).get(0).files.length; i++)
                        fileData.append('userfiles[]', $("#file_" + x).get(0).files[i]);
                }

                //check if we need to get the file in the request for exemption file input or not
                if (pathway == 2) {
                    fileData.append('userfiles[]', $("#exemptionFile").get(0).files[0]);
                }

                $.ajax({
                    type: "POST",
                    url: "/onlineaccess/uploadFiles",
                    data: fileData,
                    dataType: "json",
                    contentType: false,
                    processData: false,
                    error: function (jqXHR, result) {
                        console.log(jqXHR);
                        var ricky = (jqXHR.responseText);
                        //alert(ricky);
                        if (ricky != "") {
                            //alert(ricky);
                            valid = false;
                        }
                        else { valid = true; }
                        if (valid) {
                            console.log('valid');

                            //removed to accomodate the possibility of going from step 3a to 3b instead of 3a to 4
                            //$('#step-4-tab').removeClass("disabled");
                            //$('#tablist a[href="#step-4"]').tab('show');

                           // $('#datatable3b').DataTable().ajax.reload();
                        }
                        else {
                            console.log('Document upload reported errors to user');
                        }
                    }
                });

            }

            function Step4() {

                SubmitFiles();

                $('#step-4-tab').removeClass("disabled");
                $('#tablist a[href="#step-4"]').tab('show');

            }

            function Submit() {
                //userdefineded Party just clear and rebuild


                createFileLists();

                //update list of documents to Add document(s) from 3C
                if (pathway == 2) {
                    addFileFrom3c();
                }

                userDefinedParty = [];
                createPartyLists();

                var actiontype ="";

                if ($("#actionType").val() === ""){
                    actiontype = "Non-Action";
                }
                else {
                    actiontype = $("#actionType").val();
                }

                var decisionmaker = "";
                if ($('#DecisionMaker').find(":selected").index() != 0) {
                    decisionmaker = $('#DecisionMaker').find(":selected").text()
                }

                //decisionmaker = $('#DecisionMaker').find(":selected").index();

                var model = {
                    //form0
                    proceedingLang: $('#proceedingLang').val(),
                    proceedingType: $('#proceedingType').val(),
                    proceedingSubject: $('#proceedingSubject').val(),
                    proceedingNature: $('#proceedingNature').val(),
                    classAction: $('#classAction').val(),
                    DecisionMaker: decisionmaker,
                    //DecisionMaker: $('#DecisionMaker').find(":selected").text(),
                    iOfficeNo: $('#iOfficeNo').val(),
                    actionType: actiontype,
                    //actionType :$('#actionType').val(),
                };


                var model2 = {

                    //form4
                      //Encoded to prevent injection
                    firstName: $('<div />').text($('#firstName').val()).html(),
                    lastName: $('<div />').text($('#lastName').val()).html(),
                    phoneNumber: $('#phoneNumber').val(),
                    priEmail: $('#priEmail').val(),
                    secEmail: $('#secEmail').val(),
                    languageDDL: $('#languageDDL  option:selected').text(),
                    languageDDLCode: $('#languageDDL').val(),
                    regOfficeDDL: $('#regOfficeDDL').val(),
                    provinceDDL: $('#provinceDDL').val(),
                    isUrgent: $('#isUrgent').is(':checked'),
                    urgDesc: $('<div />').text($('#urgDesc').val()).html(),
                    postalCode: $('#postalCode').val(),
                    city: $('<div />').text($('#City').val()).html(),
                    address: $('<div />').text($('#Address').val()).html(),

                };




                var postData = {
                    s1: model,
                    s2: userDefinedParty,
                    s3: fileList,
                    ued: model2,
                };

                $.ajax({
                    url: "/onlineaccess/allSubmit",
                    type: "post",
                    data: JSON.stringify(postData),
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {

                        $('.ajaxMe').load("/onlineaccess/updateSummary", { lang: "False" });
                    }
                });

            } //end submit

        //function stepOneSubmit() {
                //userdefineded Party just clear and rebuild

                

            //} //end submit-->-->-->


            function createPartyLists() {
                //var MainParty = {};
                //MainParty.role = $('#PartyRoleMain').val();
                //MainParty.type = $('#PartyTypeMain').val();
                ////Encoded to prevent injection
                //var encodedfirstName = $('<div />').text($('#firstNameMain').val()).html();
                //var encodedlastName = $('<div />').text($('#lastNameMain').val()).html();

                //MainParty.firstName = encodedfirstName;
                //MainParty.lastName = encodedlastName;

                //userDefinedParty.push(MainParty);

                var _partylist = $("[name^='PartyRole_']");
                var _listlength = _partylist.length;
                var i = 0;
                for (i = 0; i < _listlength; i++) {
                    //for (i = 0; i < counter; i++) {
                    var name = _partylist[i].name;
                    //if (name != "PartyRole_Main") {
                        var Party = {};
                        //Party.role = $('#PartyRole_' + i).val();
                        //Party.type = $('#PartyType_' + i).val();
                    Party.role = $('#' + name).val();
                    Party.type = $('#' + name).val();
                        //Encoded to prevent injection
                    var Party_ID = name.substr(name.length - 1);

                    var encodedfirstName = $('<div />').text($('#firstName_' + Party_ID).val()).html();
                    var encodedlastName = $('<div />').text($('#lastName_' + Party_ID).val()).html();
                        //var encodedfirstName = $('<div />').text($('#firstName_' + i).val()).html();
                        //var encodedlastName = $('<div />').text($('#lastName_' + i).val()).html();

                        Party.firstName = encodedfirstName;
                        Party.lastName = encodedlastName;
                        //Party.firstName = $('#firstName_' + i).val();
                        //Party.lastName = $('#lastName_' + i).val();


                        userDefinedParty.push(Party);
                    //}
                }
            }

            function createFileLists() {
                var i = 0;
                var j = 0;
                fileList = []; //clean start [back forward page movement was creating ghost entries]
                for (i = 0; i < otherCounter; i++) {
                    var docs = {};
                    var filingParties = [];
                    docs.documentType = $('#DocumentType_' + i).val();
                    docs.documentLang = $('#DocumentLanguage_' + i).val();
                    docs.documentFileNameFromUpload = $('#file_' + i).val();
                    //Encoded to prevent injection
                    var encodeddocumentHandling = $('<div />').text($('#DocumentHandling_' + i).val()).html();

                    //need this loop to check if the dropdown exists or not, because the rows with "Not applicable" do not have a select
                    //element and therefor do not have an ID to check. They will be undefined.
                    var OADropDownId = "OADropDown_" + i;
                    if (document.contains(document.getElementById(OADropDownId))) {
                        docs.exemptionType = $('#OADropDown_' + i).val();
                    } else {
                        docs.exemptionType = "Not Applicable";
                    }


                    //docs.documentHandling = $('#DocumentHandling_' + i).val();
                    docs.documentHandling = encodeddocumentHandling;
                    var _partylist = $("#PartyList  tbody tr");
                    var _listlength = _partylist.length;
                    //need to loop through list and find those check marks that are true
                    for (j = 0; j < _listlength; j++)
                    //for (j = 0; j < counter; j++)
                    {
                        if ($('#filer_' + i+'_'+j).prop('checked')) {
                            var party = j;//userDefinedParty[j].firstName + ' ' + userDefinedParty[j].lastName;
                            filingParties.push(party)

                        }
                    }

                    docs.party = filingParties;
                    fileList.push(docs);
                    //do we care about the documents?
                }
            }

            function addFileFrom3c() {
                //based on the mechanism in CreateFileLists()
                var doc = {};
                var filingParties = [];
                //doc.party = exemptionParty;
                filingParties.push(exemptionParty);//get exemptionParty value from areFilingPartiesAssigned() - it will default to the first checked filing party of any document
                doc.party = filingParties;
                var docType = "Request for exemption";
                doc.documentType = docType.toUpperCase(); //needed so it matches the document type in the database
                doc.documentLang = $('#exemptionDocumentLanguage').val();
                doc.documentFileNameFromUpload = $('#exemptionFile').val();
                //default to request for exemption
                doc.exemptionType = "Request for exemption";

                fileList.push(doc);

                }


            function updateIndexes(table) {
                // get every tr element except the header
                table.find("tr:gt(0)").each(function (j, row) {
                    // get every input and select elements
                    $(row).find('input, select,textarea,span').each(function (k, input) {
                        // check whether the id-attribute is of type _[index]__
                        var id = input.id.match(/\d+/);

                        // if it is an element necessary for the ModelBinder => update the name attribute
                        if (id != null && id.length && id.length == 1) {
                            var attr = $(input).attr("id");
                            // replace the old index of the name attribute with the calculated index
                            var newName = attr.replace(attr.match(/\d+/), j);
                            $(input).attr("id", newName);
                            $(input).attr("name", newName);
                        }
                    });
                });
            }

             function RestrictDropDown(counter){
                //we know what row;
                //find out what if other, selected remove rule off lastname or give it a whitespace value and lock it.
                  var x = $("#PartyType_" + counter).find('option:selected').text();
                     if (x == "Other") {
                         $("#lastName_" + counter).val(" ");
                         $("#lastName_" + counter).attr('readonly', true);
                         $("#firstName_" + counter).attr('maxlength', '150');
                     }
                     else {
                         $("#lastName_" + counter).val("");
                         $("#lastName_" + counter).attr('readonly', false);
                         $("#firstName_" + counter).attr('maxlength', '100');
                     }
            }

            //Ajaxing in Parties
            var counter = 0;
            var otherCounter = 0;

            function FilingPartyList(otherCounter) {
                if (userDefinedParty.length == 0) {
                    createPartyLists();   //style of cause unsets this.
                }
                var x = 0;
                var retVal = '<div class="textAreaBoxStyle" style="overflow:auto; height: 150px">';
                for (x = 0; x < userDefinedParty.length; x++)
                //for (x = 0; x < counter +1; x++)
                {
                    retVal = retVal + '<p><input type="checkbox" id="filer_' + otherCounter + '_' + x + '"> ' + userDefinedParty[x].firstName + ' ' + userDefinedParty[x].lastName + '</p>';
                }
                retVal = retVal + '</div>';
                return retVal;
            }


            $("#addrow").on("click", function ()
            {
                var newRow = $("<tr>");
                var cols = "";

                cols += '<td width="15%"><select id="DocumentType_' + otherCounter + '" name="DocumentType_' + otherCounter + '"data-toggle="tooltip" data-placement="right" class="form-control newer" data-msg="Document Type is required." ></td>';
                    //document selection button
                //cols += '<td width="20%" height="auto"><input type = "file"  id="file_' + otherCounter + '"name ="file_' + otherCounter + '" accept = "application/pdf" class="form-control newer" data-msg="Please select a document to add to the filing."/><label class="custom-file-label" for="file_' + otherCounter + '">Browse</label></td>';
                //cols += '<td width="20%" height="auto"><div class="col-lg-6 col-sm-6 col-12"><label class="btn btn-primary"><i class="fas fa-file-upload"></i> Upload Files<input id="file_' + otherCounter + '"name ="file_' + otherCounter + '" accept = "application/pdf" type="file" class="btn btn-default"  style="visibility:hidden;" data-msg="Please select a document to add to the filing."/></label></div>'; //<input class="form-control" id="filename_' + otherCounter + '"name ="filename_' + otherCounter + '"type="text"  readonly></td>';
                 cols += '<td width="20%" height="auto"><div class="custom-file"><input type="file" id="file_' + otherCounter + '" name="file_' + otherCounter + '" accept="application/pdf" class="form-control newer" data-msg="Please select a document to add to the filing." /><label id="filelbl_' + otherCounter + '" class="custom-file-label" style="overflow:hidden" for="file_' + otherCounter + '" ></label></div></td>';


                //cols += '<td width="20%" height="auto"><div class="custom-file"><input style="visibility:hidden;" type = "file" class="custom-file-input" id="file_' + otherCounter + '"name ="file_' + otherCounter + '" accept = "application/pdf" class="custom-file-input" lang = "fr" data-msg="Please select a document to add to the filing."/><label class="custom-file-label" for="file_' + otherCounter + '">Browse</label></td></div >';
                //cols += '<td width="20%" height="auto"><div class="custom-file">< input type = "file" class="custom-file-input" id="file_' + otherCounter + '"name ="file_' + otherCounter + '" accept = "application/pdf" class="form-control newer" data-msg="Please select a document to add to the filing." lang = "fr" ><label class="custom-file-label" for="customFileLang">Seleccionar Archivo</label></div >";
                cols += '<td width="15%"><select id="DocumentLanguage_' + otherCounter + '" name="DocumentLanguage_' + otherCounter + '" class="form-control newer" data-msg="Please select the document language."></td>';
                //filingParties list
                cols += '<td width="25%">';
                cols += FilingPartyList(otherCounter);
                cols += '</td>';
                //handling instructions
                cols += '<td width="20%"><textarea id="DocumentHandling_' + otherCounter + '" name="DocumentHandling_' + otherCounter + '" class="form-control" maxlength="255"></textarea><span class="countDown_' + otherCounter + '" id="countDown_' + otherCounter +'"></span></td>';
                cols += '<td width="5%"><button id="' + otherCounter + '" class="delete btn-md btn-block btn-danger" name="delete" type="button">Remove</button></td></tr>';

                newRow.append(cols);
                $("#docList").append(newRow);
                PopulateDocumentDropdowns(otherCounter);




                $('#DocumentHandling_' + otherCounter).keyup(function () {
                    var x = $(this).attr('id').split("_");
                    $('#countDown_' + x[1]).text("Characters left:" + (255 - $(this).val().length));
                });


                
                $("#file_" + otherCounter).on('change', function () {
                    var oFile = document.getElementById(this.id).files[0];
                    var x = $(this).attr('id').split("_");
                    var objtid = this.id;
                    var filelblobj = "filelbl_" + x[1];
                    var filename = this.value.replace(/C:\\fakepath\\/i, '');


                    if (oFile.size > 104857600) {
                        alert('Document must be less than 100Mb');
                        $("#" + filelblobj).text("");
                        $("#" + objtid).val('');
                    }
                    else {
                        if (oFile.type != "application/pdf") {
                            alert('Document Type must be PDF');
                            $("#" + filelblobj).text("");
                            $("#" + objtid).val('');
                        }
                        else {
                            $('#loadingscreen').show();
                            var xhr = new XMLHttpRequest();
                            xhr.open('POST', '/onlineaccess/CheckPdfProtection');
                            xhr.setRequestHeader('Content-type', 'multipart/form-data');
                            //Appending file information in Http headers
                            xhr.setRequestHeader('X-File-Name', oFile.name);
                            xhr.setRequestHeader('X-File-Type', oFile.type);
                            xhr.setRequestHeader('X-File-Size', oFile.size);
                            //Sending file in XMLHttpRequest
                            xhr.send(oFile);
                            xhr.onreadystatechange = function () {
                                if (xhr.readyState == 4 && xhr.status == 200) {
                                    //alert(xhr.responseText);
                                    if (xhr.responseText == "false") {
                                        $('#loadingscreen').hide();
                                        $("#" + filelblobj).text(filename);
                                    }
                                    else {
                                        $('#loadingscreen').hide();
                                        $("#" + filelblobj).text("");
                                        $("#" + objtid).val('');

                                        var x = "This PDF is protected, please add an unprotected PDF.";
                                        alert(x);

                                    }
                                }
                            }
                        }
                    }
                });



                otherCounter++;
            });

            function getB64Str(buffer) {
                var binary = '';
                var bytes = new Uint8Array(buffer);
                var len = bytes.byteLength;
                for (var i = 0; i < len; i++) {
                    binary += String.fromCharCode(bytes[i]);
                }
                return window.btoa(binary);
            }

            $("#docList").on("click", ".delete", function (event) {
                $(this).closest("tr").remove();
                updateIndexes($("#docList"));
                otherCounter -= 1;

                updateAllSignatures();

            });

            function PopulateDocumentDropdowns(otherCounter){

                DocumentType(otherCounter);
                DocumentLanguage(otherCounter);


                function DocumentLanguage(otherCounter)
                {
                    var DDL_Model = { lang: "False" };
                    var jsonToPost = JSON.stringify(DDL_Model);
                    $.ajax({
                        url: '/onlineaccess/buildLanguageDDL',
                        type: "POST",
                        data: jsonToPost,
                        contentType: "application/json; charset=utf-8",
                        success: function (result) {
                            var s = '<option value="">---Choose One---</option>';
                            for (var i = 0; i < result.length; i++)
                            {
                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                            }
                            $("#DocumentLanguage_" + otherCounter).html(s);
                        }
                    })
                }

                function DocumentType(otherCounter) {
                    if (otherCounter > 0) {
                        var DDL_Model = {
                            lang: "False",
                            proceedingType: $('#proceedingType').find(":selected").text()
                        };

                        var jsonToPost = JSON.stringify(DDL_Model);

                        $.ajax({
                            url: '/onlineaccess/buildFCTSecondDocumentDDL',
                            type: "POST",
                            data: jsonToPost,
                            contentType: "application/json; charset=utf-8",
                            success: function (result) {
                                var s = '<option value="">---Choose One---</option>';
                                for (var i = 0; i < result.length; i++) {
                                    s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                }
                                $("#DocumentType_" + otherCounter).html(s);
                                $("#DocumentType_" + otherCounter).on('change', function () {
                                    updateAllSignatures();
                                    // areSignaturesNeeded(otherCounter);
                                    if (sigsNeeded) {
                                        $('.ajaxSignatures').show();
                                    }
                                    else {
                                        $('.ajaxSignatures').hide();
                                        $("#Signatures").prop('checked', false);
                                    }
                                });
                            }
                        })
                    }
                    else
                    {
                        var DDL_Model = {
                            lang: "False",
                            proceedingType: $('#proceedingType').find(":selected").text()
                        };

                        var jsonToPost = JSON.stringify(DDL_Model);

                           $.ajax({
                               url: '/onlineaccess/buildFCTFirstDocumentDDL',
                               type: "POST",
                               data: jsonToPost,
                               contentType: "application/json; charset=utf-8",
                                success: function (result) {
                                    var s = '<option value="">---Choose One---</option>';
                                    for (var i = 0; i < result.length; i++) {
                                        s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                    }
                                    $("#DocumentType_" + otherCounter).html(s);
                                    $("#DocumentType_" + otherCounter).on('change', function () {
                                        areSignaturesNeeded(otherCounter);
                                        if (sigsNeeded) {
                                           $('.ajaxSignatures').show();
                                        }
                                        else {
                                            $('.ajaxSignatures').hide();
                                            $("#Signatures").prop('checked', false);
                                        }

                                    });
                                }
                           })
                    }
                }
            }
            $("#addrow_Party").on("click", function () {

                        var newRow = $("<tr>");
                        var cols = "";

                cols += '<td width="20%"><select id="PartyRole_' + counter + '" name="PartyRole_' + counter + '"data-toggle="tooltip" data-placement="right" class="form-control new partytypedropdown ' + (counter == 0 ? "partymain":"") + '"   data-msg="Filing Parties are required"></td>';
                        cols += '<td width="15%"><select id="PartyType_' + counter + '" name="PartyType_' + counter + '"data-toggle="tooltip" data-placement="right" class="form-control new dropdowntarget" data-msg="Select One: Individual/Other"></td>';
                        cols += '<td width="30%"><input type="text" class="form-control new" id="firstName_' + counter + '" name="firstName[]" data-msg="Filing party first name is required" maxlength="100"/></td>';
                        cols += '<td width="25%"><input type="text" class="form-control new" id="lastName_' + counter + '" name="lastName[]" data-msg="Filing party last name is required." maxlength="100"/></td>';

                        cols += '<td width="10%"><input type="button" class="ibtnDel btn btn-md btn-danger"  value="Remove"></td>';
                        newRow.append(cols);
                        $("#PartyList").append(newRow);
                        PopulateDropdowns(counter);

                counter++;
            });

            $("#PartyList").on("click", ".ibtnDel", function (event) {
                $(this).closest("tr").remove();
                updateIndexes($("table.party-list"));
                counter -= 1;
            });



 function PopulateDropdownSelected (name) {
        var _selected = $("#PartyRole_0").val();


        if (_selected != null) {

                PartyRoles();
                PartyTypes();

            function PartyRoles() {
                var DDL_Model = {

                    lang: "False"
                };

                var jsonToPost = JSON.stringify(DDL_Model);

                $.ajax({
                    url: '/onlineaccess/buildFCPartyRoleDDL',
                    type: "POST",
                    data: jsonToPost,
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        var s = '<option value="">---Choose One---</option>';
                        for (var i = 0; i < result.length; i++) {

                            switch (_selected) {
                                case "Plaintiff":
                                    if (result[i] != "Appellant" && result[i] != "Applicant" && result[i] != "Respondent (application)" && result[i] != "Respondent (appeal)") {

                                        s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                    }
                                    break;
                                case "Partie demanderesse (action)":
                                    if (result[i] != "Partie appelante" && result[i] != "Partie demanderesse (demande)" && result[i] != "Partie défenderesse (demande)" && result[i] != "Partie intimée") {

                                        s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                    }
                                    break;
                                case "Appellant":
                                    if (result[i] != "Plaintiff" && result[i] != "Applicant" && result[i] != "Defendant to Counterclaim" && result[i] != "Respondent (application)" && result[i] != "Defendant") {
                                        s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                    }
                                    break;
                                case "Partie appelante":
                                    if (result[i] != "Partie demanderesse (action)" && result[i] != "Partie demanderesse (demande)" && result[i] != "Partie défenderesse (action)" && result[i] != "Partie défenderesse (demande)" && result[i] != "Défendeur reconventionnel") {
                                        s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                    }
                                    break;
                                case "Applicant":
                                    if (result[i] != "Plaintiff" && result[i] != "Appellant" && result[i] != "Defendant" && result[i] != "Respondent (appeal)" && result[i] != "Defendant to Counterclaim") {
                                        s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                    }
                                    break;
                                case "Partie demanderesse (demande)":
                                    if (result[i] != "Partie demanderesse (action)" && result[i] != "Partie appelante" && result[i] != "Partie défenderesse (action)" && result[i] != "Partie intimée" && result[i] != "Défendeur reconventionnel") {
                                        s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                    }
                                    break;
                                case "Defendant":
                                    if (result[i] != "Defendant to Counterclaim" && result[i] != "Respondent (application)" && result[i] != "Respondent (appeal)" && result[i] != "Appellant" && result[i] != "Applicant") {
                                        s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                    }
                                    break;
                                case "Partie défenderesse (action)":
                                    if (result[i] != "Défendeur reconventionnel" && result[i] != "Partie défenderesse (demande)" && result[i] != "Partie intimée" && result[i] != "Partie appelante" && result[i] != "Partie demanderesse (demande)") {
                                        s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                    }
                                    break;
                                case "Defendant to Counterclaim":
                                    if (result[i] != "Defendant" && result[i] != "Respondent (application)" && result[i] != "Respondent (appeal)" && result[i] != "Appellant" && result[i] != "Applicant") {
                                        s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                    }
                                    break;
                                case "Défendeur reconventionnel":
                                    if (result[i] != "Partie défenderesse (action)" && result[i] != "Partie défenderesse (demande)" && result[i] != "Partie intimée" && result[i] != "Partie appelante" && result[i] != "Partie demanderesse (demande)") {
                                        s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                    }
                                    break;
                                case "Respondent (appeal)":
                                    if (result[i] != "Defendant" && result[i] != "Respondent (application)" && result[i] != "Defendant to Counterclaim" && result[i] != "Plaintiff" && result[i] != "Applicant") {
                                        s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                    }
                                    break;
                                case "Partie intimée":
                                    if (result[i] != "Partie défenderesse (action)" && result[i] != "Partie défenderesse (demande)" && result[i] != "Défendeur reconventionnel" && result[i] != "Partie demanderesse (action)" && result[i] != "Partie demanderesse (demande)") {
                                        s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                    }
                                    break;
                                case "Respondent (application)":
                                    if (result[i] != "Defendant" && result[i] != "Respondent (appeal)" && result[i] != "Defendant to Counterclaim" && result[i] != "Plaintiff" && result[i] != "Appellant") {
                                        s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                    }
                                    break;
                                case "Partie défenderesse (demande)":
                                    if (result[i] != "Partie défenderesse (action)" && result[i] != "Partie intimée" && result[i] != "Défendeur reconventionnel" && result[i] != "Partie demanderesse (action)" && result[i] != "Partie appelante") {
                                        s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                    }
                                    break;
                                default:
                                    s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                    break;
                            }


                        }
                        $("#" + name).html(s);
                    }
                })
            }
                }

                function PartyTypes() {
                   var DDL_Model = { lang: "False"    };

                    var jsonToPost = JSON.stringify(DDL_Model);
                    $.ajax({
                        url: '/onlineaccess/buildPartyTypeDDL',
                        type: "POST",
                        data: jsonToPost,
                        contentType: "application/json; charset=utf-8",
                        success: function (result) {
                            var s = '<option value="">---Choose One---</option>';
                            for (var i = 0; i < result.length; i++) {
                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                            }
                            $("#PartyTypeMain").html(s);

                        }
                    })
                }
            }

            function PopulateDropdowns(counter) {
                //var _partylist = $("#PartyList  tbody tr");
                //var _listlength = _partylist.length;


                PartyRoles(counter);


                    PartyTypes(counter);

                function PartyRoles(counter) {
                      var DDL_Model = {

                        lang: "False"
                    };

                    var jsonToPost = JSON.stringify(DDL_Model);

                    $.ajax({
                        url: '/onlineaccess/buildFCPartyRoleDDL',
                        type: "POST",
                        data: jsonToPost,
                        contentType: "application/json; charset=utf-8",
                        success: function (result) {
                            var s = '<option value="">---Choose One---</option>';
                            for (var i = 0; i < result.length; i++) {

                                    var _selected = $("#PartyRole_0").val();


                                   switch (_selected)
                                    {
                                        case "Plaintiff":
                                            if (result[i] != "Appellant" && result[i] != "Applicant" && result[i] != "Respondent (application)" && result[i] != "Respondent (appeal)")
                                            {

                                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                            }
                                            break;
                                        case "Partie demanderesse (action)":
                                            if (result[i] != "Partie appelante" && result[i] != "Partie demanderesse (demande)" && result[i] != "Partie défenderesse (demande)" && result[i] != "Partie intimée") {

                                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                            }
                                            break;
                                        case "Appellant":
                                            if (result[i] != "Plaintiff" && result[i] != "Applicant" && result[i] != "Defendant to Counterclaim" && result[i] != "Respondent (application)" && result[i] != "Defendant") {
                                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                            }
                                            break;
                                        case "Partie appelante":
                                            if (result[i] != "Partie demanderesse (action)" && result[i] != "Partie demanderesse (demande)" && result[i] != "Partie défenderesse (action)" && result[i] != "Partie défenderesse (demande)" && result[i] != "Défendeur reconventionnel") {
                                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                            }
                                            break;
                                        case "Applicant":
                                            if (result[i] != "Plaintiff" && result[i] != "Appellant" && result[i] != "Defendant" && result[i] != "Respondent (appeal)" && result[i] != "Defendant to Counterclaim") {
                                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                            }
                                            break;
                                        case "Partie demanderesse (demande)":
                                            if (result[i] != "Partie demanderesse (action)" && result[i] != "Partie appelante" && result[i] != "Partie défenderesse (action)" && result[i] != "Partie intimée" && result[i] != "Défendeur reconventionnel") {
                                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                            }
                                            break;
                                        case "Defendant":
                                            if (result[i] != "Defendant to Counterclaim" && result[i] != "Respondent (application)" && result[i] != "Respondent (appeal)" && result[i] != "Appellant" && result[i] != "Applicant") {
                                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                            }
                                            break;
                                        case "Partie défenderesse (action)":
                                            if (result[i] != "Défendeur reconventionnel" && result[i] != "Partie défenderesse (demande)" && result[i] != "Partie intimée" && result[i] != "Partie appelante" && result[i] != "Partie demanderesse (demande)") {
                                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                            }
                                            break;
                                        case "Defendant to Counterclaim":
                                            if (result[i] != "Defendant" && result[i] != "Respondent (application)" && result[i] != "Respondent (appeal)" && result[i] != "Appellant" && result[i] != "Applicant") {
                                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                            }
                                            break;
                                        case "Défendeur reconventionnel":
                                            if (result[i] != "Partie défenderesse (action)" && result[i] != "Partie défenderesse (demande)" && result[i] != "Partie intimée" && result[i] != "Partie appelante" && result[i] != "Partie demanderesse (demande)") {
                                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                            }
                                            break;
                                        case "Respondent (appeal)":
                                            if (result[i] != "Defendant" && result[i] != "Respondent (application)" && result[i] != "Defendant to Counterclaim" && result[i] != "Plaintiff" && result[i] != "Applicant") {
                                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                            }
                                            break;
                                        case "Partie intimée":
                                            if (result[i] != "Partie défenderesse (action)" && result[i] != "Partie défenderesse (demande)" && result[i] != "Défendeur reconventionnel" && result[i] != "Partie demanderesse (action)" && result[i] != "Partie demanderesse (demande)") {
                                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                            }
                                            break;
                                        case "Respondent (application)":
                                            if (result[i] != "Defendant" && result[i] != "Respondent (appeal)" && result[i] != "Defendant to Counterclaim" && result[i] != "Plaintiff" && result[i] != "Appellant") {
                                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                            }
                                            break;
                                        case "Partie défenderesse (demande)":
                                            if (result[i] != "Partie défenderesse (action)" && result[i] != "Partie intimée" && result[i] != "Défendeur reconventionnel" && result[i] != "Partie demanderesse (action)" && result[i] != "Partie appelante") {
                                                s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                            }
                                            break;
                                        default:
                                            s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                            break;
                                    }



                            }
                            $("#PartyRole_" + counter).html(s);
                        }
                    })
                }

                function PartyTypes(counter) {
                   var DDL_Model = { lang: "False"    };

                    var jsonToPost = JSON.stringify(DDL_Model);
                    $.ajax({
                        url: '/onlineaccess/buildPartyTypeDDL',
                        type: "POST",
                        data: jsonToPost,
                        contentType: "application/json; charset=utf-8",
                        success: function (result) {


                            if ($("#PartyType_" + counter).val() == null) {
                                var s = '<option value="">---Choose One---</option>';
                                for (var i = 0; i < result.length; i++) {
                                    s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                                }
                                $("#PartyType_" + counter).html(s);
                            }
                        }
                    })
                }
            }

           function PopulateProceedingSubjectDropDown() {

               var DDL_Model = {
                   lang: "False",
                   proceedingType: $('#proceedingType').find(":selected").text(),
               };

               var jsonToPost = JSON.stringify(DDL_Model);

               $.ajax({
                   url: '/onlineaccess/FetchProceedingSubjectsDDL',
                   type: "POST",
                   data: jsonToPost,
                   contentType: "application/json; charset=utf-8",

                   success: function (result) {
                       if (result.length > 1) {
                           var s = '<option value="">---Choose One---</option>';
                       }
                           for (var i = 0; i < result.length; i++) {
                               s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                           }
                           $("#proceedingSubject").html(s);
                       if (result.length > 1) {
                           $('#proceedingSubject').on('change', function () { PopulateProceedingNatureDropDown() });
                       }
                       else {
                           PopulateProceedingNatureDropDown();
                       }
                   }
               });
            }

           function PopulateDecisionMakerDropDown() {

               var DDL_Model = {
                   lang: "False",
                   //DecisionMaker: $('#DecisionMaker').find(":selected").text(),
               };

               var jsonToPost = JSON.stringify(DDL_Model);

               $.ajax({
                   url: '/onlineaccess/FetchProceedingDecisionMakerDDL',
                   type: "POST",
                   data: jsonToPost,
                   contentType: "application/json; charset=utf-8",

                   success: function (result) {
                       if (result.length > 1) {
                           var s = '<option value="">---Choose One---</option>';
                       }
                           for (var i = 0; i < result.length; i++) {
                               s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                           }
                       $("#DecisionMaker").html(s);
                   }
               });
            }



            function PopulateProceedingNatureDropDown() {
                var x = {
                    proceedingSubject: $('#proceedingSubject').find('option:selected').text(),
                    lang: "False"
                };

                $.ajax({
                    url: '/onlineaccess/FetchProceedingNaturesDDL',
                    type: "post",
                    data: JSON.stringify(x),
                    dataType: "json",
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {

                        var s = '<option value="">---Choose One---</option>';
                        for (var i = 0; i < result.length; i++) {
                            s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                        }
                        $("#proceedingNature").html(s);
                        $('#proceedingNature').on('change', function () { PopulateActionType() });
                    }
                })
            }

            function PopulateActionType() {
                var x = {
                    proceedingNature: $('#proceedingNature').find('option:selected').text(),
                };
                $.ajax({
                    url: '/onlineaccess/determineOrdinaryOrSimpleAction',
                    type: "post",
                    data: JSON.stringify(x),
                    dataType: "json",
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        if (result) {
                            //true; show unselect options
                            $(".ajaxMeRadioButtons").show();
                            //add rule
                        }
                        else {
                            //false; hide and set default
                            $(".ajaxMeRadioButtons").hide();
                            //remove selected
                            $('select[name^="actionType"] option:selected').attr("selected", null);
                            $('select[name^="actionType"] option[value="Ordinary"]').attr("selected", "selected");
                        }
                    }
                })
            }

            function GenerateTextBox()
            {
                var x = "Go back a step? You will lose what you have entered on this page.";
               return confirm(x);
            }

            function deleteFiles()
            {
                $.ajax({
                    url: '/onlineaccess/deleteAllFiles',
                    type: "post",
                    contentType: "application/json; charset=utf-8",
                });

            }

        //Show Proposed Class Action dropdown if Type is Federal Court
            $(document).ready(function () {
            $("#classActionDropDown").hide();
        });

        $("#typeDropDown").change(function () {

            var $typeOption = $(this).find('option:selected');

            if ($typeOption.val() == "Federal Court" || $typeOption.val() == "Cour fédérale") {
                //reset class action dropdown to default value
                $("#classActionDropDown option").prop("selected", false);
                $("#classActionDropDown").show();

            }
            else {

                $("#classActionDropDown option").prop("selected", false);
                $("#classActionDropDown").hide();
            }
        });


        function OnlineAccessCriteriaMet() {

            //based on mechanism in populateactiontype()

            //this is probably a bad way to populate an array of the document types, but it's all I can come up with at the moment
            var docTypes = [];
            var documentExists = true;
            //var document;
            var documentCounter = 0;

            while (documentExists) {
                /*var document = document.getElementById(documentId).val();*/
                var documentId = "DocumentType_" + documentCounter;

                var doc = document.getElementById(documentId);

                if (doc == null) {
                    documentExists = false;
                }

                else {
                    var docType = doc.value;
                    docTypes.push(docType);
                    documentCounter++;
                }
            }

            var x = {
                proceedingNature: $('#proceedingNature').find('option:selected').val(),
                proceedingType: $('#proceedingType').find('option:selected').val(),
                documents: docTypes,
                //documentType: $('#DocumentType_0').find('option:selected').val(),
                classAction: $('#classAction').find('option:selected').val(),

            };

            $.ajax({
                url: "/OnlineAccess/OnlineAccessCriteriaMet",
                type: "POST",
                data: JSON.stringify(x),
                async: false,
                contentType: "application/json; charset=utf-8:",

                success: function (result) {
                    if (result) {

                        setPilot(true);
                        //another ajax call to populate a list of documents that are of the pilot document types? Then use this to populate the table via js
                        getListOfOnlineAccessDocuments();
                    }

                    else {
                        setPilot(false);
                    }
                }

            });

        }

        function setPilot(x) {
            OnlineAccess = x;
                    }

        //used to populate table in 3b
        function getListOfOnlineAccessDocuments() {
            $.ajax({
                url: "/OnlineAccess/getListOfOnlineAccessDocuments",
                type: "GET",
                async: false,
                contentType: "application/json; charset=utf-8:",

                success: function (result) {
                    //add each item in result to the listOfOnlineAccessDocs
                    result.forEach((x, i) => listOfOnlineAccessDocs.push(x));

                    //for each row in #docList where value = value in listOfOnlineAccessDocs:
                    //make new row in #dataTable3b

                    var table = document.getElementById("docList");
                    //var row = table.rows[i++];
                    var count = $("#docList > tbody").children().length;
                    for (var i = 0; i < count; i++) {

                        var documentTypeId = "DocumentType_" + i;
                        var documentType = document.getElementById(documentTypeId).value;

                        var documentNameId = "file_" + i;
                        var documentName = document.getElementById(documentNameId).value;

                        //remove fake path
                        var tempDocName = documentName.split("\\");
                        //get last part of path (ie go from C:\\fakepath\\filename to filename)
                        var documentName = tempDocName[tempDocName.length - 1];


                        var onlineAccessDropDownId = "OADropDown_" + i;

                        var removeButtonId = "RemoveDocument_" + i;

                        if (listOfOnlineAccessDocs.includes(documentType)) {
                            //add additional id to the td so it's value can be accessed easily by the table in Step 3C
                            var tdDocTypeId = "td_docType_" + i;

                            var tdNameId = "td_name_" + i;

                            var col = '<tr><td id="' + tdDocTypeId + '">' + documentType + '</td><td id="' + tdNameId + '">' + documentName + '</td><td><select id="' + onlineAccessDropDownId + '"></td><td><button id="' + removeButtonId + '" class="delete btn-md btn-block btn-danger" type="button">Remove Confidential Document</td></tr>';

                            $("#documentList3b").append(col);
                            PopulateOnlineAccessDropdown(onlineAccessDropDownId);
                        }

                        else {

                            var col = '<tr><td>' + documentType + '</td><td>' + documentName + '</td><td>Not Applicable</td><td></td></tr> ';
                            $("#documentList3b").append(col);
                        }


                    }
                }
            });
        }

        //Populate the OnlineAccess Dropdown menu in step 3B
        function PopulateOnlineAccessDropdown(onlineAccessDropDownId) {
            var DDL_Model = { lang: "False" };
                var jsonToPost = JSON.stringify(DDL_Model);
                $.ajax({
                    url: '/onlineaccess/buildOnlineAccessDDL',
                    type: "POST",
                    data: jsonToPost,
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        var s = '<option value="---Choose One---">---Choose One---</option>';
                        for (var i = 0; i < result.length; i++) {
                            s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                        }
                        $("#" + onlineAccessDropDownId).html(s);
                    }
                });
        }


        //will set global variable "pathway" declared at top of script. The following functions will add a number to the priority array
        //as each document is looped through. The pathway variable is assigned the min number( highest priority) in priority, and controls navigation
        //priority 1 will be taken, then 2, then 3
        // 1 - form invalid (either did not fill in all required fields, or selected a confidential type)
        // 2 - request for exemption present -> go to step 3C
        // 3 - no request for exemption present, but form is otherwise valid -> go to step 4
        function validate3B() {

            var priority = [];

            var DDL_Model = { lang: "False" };
            var jsonToPost = JSON.stringify(DDL_Model);
            $.ajax({
                url: '/onlineaccess/getAllowedOnlineAccessTypes',
                type: "POST",
                async: false,
                data: jsonToPost,
                contentType: "application/json; charset=utf-8",
                success: function (result) {

                    var count = $("#documentList3b").children().length;
                    for (var i = 0; i < count; i++) {

                        var onlineAccessDropDownId = "OADropDown_" + i;

                        //check if the element exists, to prevent breaking on docs with N/A value in Online Access column
                        if (document.contains(document.getElementById(onlineAccessDropDownId))) {

                            //get user selection from Online Access dropdown
                            var selection = document.getElementById(onlineAccessDropDownId).value;

                            //if user hasn't selected a value, notify them and block forward navigation
                            if (selection == "---Choose One---") {
                                alert("You must make a selection for each document.");
                                priority.push(1); //invalid. User must deal with issue in prompt. Highest priority
                            }

                            //if the selection is not in the allowed list, alert user and block forward navigation
                            else if (!result.includes(selection)) {
                                alert("You cannot file confidential documents via the Federal Court Electronic Filing System. Please remove the document.");
                                priority.push(1); //invalid. User must deal with issue in prompt. Highest priority
                            }

                            else {
                                 $.ajax({
                                     url: '/onlineaccess/getRequestForExemptionValues',
                                    type: "GET",
                                    async: false,
                                    contentType: "application/json; charset=utf-8",
                                    success: function (result) {
                                        if (result.includes(selection)) {
                                            priority.push(2); //valid, request for exemption present. Middle priority
                                        }
                                        else
                                            //valid, no request for exemption - lowest priority
                                            priority.push(3);
                                        }
                                 });
                             }
                        }
                    }
                    //for condition where user clicks every remove confidential document button, leaving just N/A documents in the table
                    if (priority.length == 0) {
                        priority.push(3);
                        OnlineAccess = false;
                    }
                }
            });
            //set pathway control to the highest priority (min value)
            pathway = Math.min(...priority);


        }

        //3B delete buttons
        $("#documentList3b").on("click", ".delete", function (event) {

            //get row index, use it to remove document from 3A as well.
            var index = $(this).closest("tr").index();

            $(this).closest("tr").remove();

            //remove corresponding row in 3A
            $('#docListBody tr').eq(index).remove();

            //need to change indexes now.

            updateIndexes($("#docList"));
            otherCounter--;

        });

        //for the language dropdown in 3C
        function PopulateExemptionDocLanguageDropdown() {
                var DDL_Model = { lang: "False" };
                var jsonToPost = JSON.stringify(DDL_Model);
                $.ajax({
                    url: '/onlineaccess/buildLanguageDDL',
                    type: "POST",
                    data: jsonToPost,
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        var s = '<option value="">---Choose One---</option>';
                        for (var i = 0; i < result.length; i++) {
                            s += '<option value="' + result[i] + '">' + result[i] + '</option>';
                        }
                        $("#exemptionDocumentLanguage").html(s);
                    }
                });
            }

        function Populate3C() {
            //for each row in 3b table
            //var table = document.getElementById("docList3b");

            var docName = '';

            //iterate through rows of table in 3B
            var count = $("#documentList3b").children().length;
            for (var i = 0; i < count; i++) {

                //get document name, document type
                var tdNameId = "td_name_" + i;

                //need to check if the element exists, because in the 3B table the documents that do not
                //qualify for online access are not assigned an ID.

                //must also check if the row's select value = Request for exemption / Demande d'exemption
                if (document.contains(document.getElementById(tdNameId)) ) {

                    docName += document.getElementById(tdNameId).innerHTML;
                    docName += "</br>";

                }
            }
            //add to respective 3c table td item
            $('#exemptionDocNames').html(docName);
            PopulateExemptionDocLanguageDropdown();

            }

            //remove button functionality on 3C - clears file input and language selection
            $(document).ready(function () {
                $('#exemptionRemove').on('click', function (e) {
                    var $el = $('#exemptionFile');
                    $el.wrap('<form>').closest('form').get(0).reset();
                    $el.unwrap();
                    document.getElementById('exemptionDocumentLanguage').selectedIndex = 0;
                    $("#exemptionFileLabel").text('');
                });
            });

            //functionality for document select on 3C
            $("#exemptionFile").on('change', function () {
                var oFile = document.getElementById(this.id).files[0];
                var x = $(this).attr('id');
                var objtid = this.id;
                var filelblobj = "exemptionFileLabel";
                var filename = this.value.replace(/C:\\fakepath\\/i, '');


                if (oFile.size > 104857600) {
                    alert('Document must be less than 100Mb');
                    $("#" + filelblobj).text("");
                    $("#" + objtid).val('');
                }
                else {
                    if (oFile.type != "application/pdf") {
                        alert('Document Type must be PDF');
                        $("#" + filelblobj).text("");
                        $("#" + objtid).val('');
                    }
                    else {
                        $('#loadingscreen').show();
                        var xhr = new XMLHttpRequest();
                        xhr.open('POST', '/onlineaccess/CheckPdfProtection');
                        xhr.setRequestHeader('Content-type', 'multipart/form-data');
                        //Appending file information in Http headers
                        xhr.setRequestHeader('X-File-Name', oFile.name);
                        xhr.setRequestHeader('X-File-Type', oFile.type);
                        xhr.setRequestHeader('X-File-Size', oFile.size);
                        //Sending file in XMLHttpRequest
                        xhr.send(oFile);
                        xhr.onreadystatechange = function () {
                            if (xhr.readyState == 4 && xhr.status == 200) {
                                //alert(xhr.responseText);
                                if (xhr.responseText == "false") {
                                    $('#loadingscreen').hide();
                                    $("#" + filelblobj).text(filename);
                                }
                                else {
                                    $('#loadingscreen').hide();
                                    $("#" + filelblobj).text("");
                                    $("#" + objtid).val('');

                                    var x = "This PDF is protected, please add an unprotected PDF.";
                                    alert(x);

                                }
                            }
                        }
                    }
                }

            });


        }); // end of main function


    </script>


    <script type="text/javascript">
        $body = $("body");
        $(document).on({
            //ajaxStart: function () { $body.addClass("loading"); },
            //ajaxStop: function () { $body.removeClass("loading"); },
            //ajaxError: function (xhr, txt, err) { redirectToErrorPage(); }
            ajaxStart: function () { $('#loadingscreen').show(); },
            ajaxStop: function () { $('#loadingscreen').hide(); },

        });

        $(document).ready(function () {

            //CheckSession();
            $('[data-toggle="tooltip"]').tooltip();
         
            $('#idMyBtn').on('click',
                function (event) {
                    $('#idMyBtn').prop('disabled', true);
                    $('#idMyForm').submit();
                }

            );

            
        });

    //function CheckSession() {
    //    $.ajax({

    //        type: 'POST',
    //        dataType: 'json',
    //        contentType: 'application/json',
    //        url: '/OnlineAccess/SessionInfo',
    //        data: '{}',
    //        success: function (data) {
    //            //alert(data.sessionValue);
    //            if (data.expired == true) {
    //                if (data.lang == "en") {
    //                    location.href = "/en/online-access/sessionExpiration"
    //                }
    //                else {
    //                    location.href = "/fr/acces-en-ligne/sessionExpiration"
    //                }
    //            }
    //            else {
    //                if (data.lang == "en") {
    //                    //location.href = "/en/online-access/sessionExpiration"
    //                }
    //                else {
    //                   // location.href = "/fr/acces-en-ligne/sessionExpiration"
    //                }
    //                //location.href = "/Home/Login"
    //            }
    //        },
    //        error: function (xhr) {
    //            alert('error');
    //        }
    //    });

    
//}

    </script>



</body>
</html>